var Al=Object.defineProperty;var Cl=(n,e,t)=>e in n?Al(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var $=(n,e,t)=>(Cl(n,typeof e!="symbol"?e+"":e,t),t),fs=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Rt=(n,e,t)=>(fs(n,e,"read from private field"),t?t.call(n):e.get(n)),Qn=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Et=(n,e,t,r)=>(fs(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),jr=(n,e,t,r)=>({set _(i){Et(n,e,i,t)},get _(){return Rt(n,e,r)}});import{i as nt,_ as Vi,S as Il,a as $t,o as Na,b as Bl,c as Fa,d as Wr,O as vt,r as Pl,e as Nl,f as Fl,g as Ol,h as Oa,n as Rl,j as Ra,k as Dl,l as Ml,m as Tt,p as qt,q as Wn,s as Da}from"./error-handler.2c73d00e.js";import{S as Hn,i as qn,a as Zn,N as Hr,l as ge,b as St,m as we,p as xe,j as K,c as At,q as oe,d as Ie,H as ue,P as qr,Q as Zr,R as Gr,h as he,f as Ce,Y as Ll,Z as Ul,_ as Vl,x as wi,g as bi,$ as $l,r as Dt,O as Gn,M as $i,a0 as jl,n as Or,a1 as kr,y as Ma,A as Zt,B as Gt,C as Xt,D as zt,a2 as La,u as et,v as tt,w as on,o as Wl,a3 as Ua,a4 as us}from"./index.a1b1e1bc.js";const Hl=!0,ql=Hl;/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const Ph="relative h-12 bg-gray-700 text-white xl:h-10",Zl="p-3 xl:p-2.5",Nh="px-4 md:px-8 lg:max-w-4xl xl:max-w-none 2xl:max-w-6xl mx-auto",Gl="opacity-60 hover:opacity-100 transition-opacity",Fh="p-4 xl:p-3",Oh="-translate-x-4 xl:-translate-x-3",Rh="translate-x-4 xl:translate-x-3",Dh="mt-1 block w-full px-0.5 bg-background-color border-0 border-b-2 border-gray-400/50 focus:ring-0 focus:border-black transition",Ln="inline-block no-underline font-medium rounded min-w-[32px] sm:min-w-[64px] px-4 leading-9 cursor-pointer text-cyan-900",Mh=`flex justify-center select-none items-center h-12 w-12 cursor-pointer text-xl xl:h-10 xl:w-10 xl:text-lg ${Zl} ${Gl}`,Xl=n=>({}),hs=n=>({}),zl=n=>({}),ps=n=>({}),Kl=n=>({}),ms=n=>({});function Ql(n){let e,t,r,i,s,a;const l=n[1].header,o=Hr(l,n,n[0],ms),c=n[1].content,d=Hr(c,n,n[0],ps),f=n[1].footer,u=Hr(f,n,n[0],hs);return{c(){e=ge("section"),t=ge("h2"),o&&o.c(),r=St(),d&&d.c(),i=St(),s=ge("footer"),u&&u.c(),this.h()},l(m){e=we(m,"SECTION",{class:!0});var g=xe(e);t=we(g,"H2",{class:!0});var h=xe(t);o&&o.l(h),h.forEach(K),r=At(g),d&&d.l(g),i=At(g),s=we(g,"FOOTER",{class:!0});var p=xe(s);u&&u.l(p),p.forEach(K),g.forEach(K),this.h()},h(){oe(t,"class","weight-medium mb-5 text-xl"),oe(s,"class","flex flex-wrap items-center justify-end pt-5"),oe(e,"class","mdc-elevation--z24 rounded bg-white p-6")},m(m,g){Ie(m,e,g),ue(e,t),o&&o.m(t,null),ue(e,r),d&&d.m(e,null),ue(e,i),ue(e,s),u&&u.m(s,null),a=!0},p(m,[g]){o&&o.p&&(!a||g&1)&&qr(o,l,m,m[0],a?Gr(l,m[0],g,Kl):Zr(m[0]),ms),d&&d.p&&(!a||g&1)&&qr(d,c,m,m[0],a?Gr(c,m[0],g,zl):Zr(m[0]),ps),u&&u.p&&(!a||g&1)&&qr(u,f,m,m[0],a?Gr(f,m[0],g,Xl):Zr(m[0]),hs)},i(m){a||(he(o,m),he(d,m),he(u,m),a=!0)},o(m){Ce(o,m),Ce(d,m),Ce(u,m),a=!1},d(m){m&&K(e),o&&o.d(m),d&&d.d(m),u&&u.d(m)}}}function Yl(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&t(0,i=s.$$scope)},[i,r]}class ji extends Hn{constructor(e){super(),qn(this,e,Yl,Ql,Zn,{})}}function Va(n){const e=n-1;return e*e*e+1}function Lh(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}function Er(n){return--n*n*n*n*n+1}function Tr(n,{delay:e=0,duration:t=400,easing:r=Ll}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:s=>`opacity: ${s*i}`}}function Uh(n,{delay:e=0,duration:t=400,easing:r=Va,x:i=0,y:s=0,opacity:a=0}={}){const l=getComputedStyle(n),o=+l.opacity,c=l.transform==="none"?"":l.transform,d=o*(1-a);return{delay:e,duration:t,easing:r,css:(f,u)=>`
			transform: ${c} translate(${(1-f)*i}px, ${(1-f)*s}px);
			opacity: ${o-d*u}`}}function Vh(n,{delay:e=0,duration:t=400,easing:r=Va,start:i=0,opacity:s=0}={}){const a=getComputedStyle(n),l=+a.opacity,o=a.transform==="none"?"":a.transform,c=1-i,d=l*(1-s);return{delay:e,duration:t,easing:r,css:(f,u)=>`
			transform: ${o} scale(${1-c*u});
			opacity: ${l-d*u}
		`}}function gs(n,e,t){const r=n.slice();return r[16]=e[t],r}function ws(n,e){let t,r,i=`${e[1]}px`,s=`${e[1]}px`,a=`${e[3]}px`,l=`${e[2]}px`,o,c;return{key:n,first:null,c(){t=ge("span"),this.h()},l(d){t=we(d,"SPAN",{class:!0}),xe(t).forEach(K),this.h()},h(){oe(t,"class","absolute rounded-full bg-gray-400/50"),Dt(t,"width",i),Dt(t,"height",s),Dt(t,"top",a),Dt(t,"left",l),this.first=t},m(d,f){Ie(d,t,f),o||(c=Gn(t,"introend",e[8]),o=!0)},p(d,f){e=d,f&2&&i!==(i=`${e[1]}px`)&&Dt(t,"width",i),f&2&&s!==(s=`${e[1]}px`)&&Dt(t,"height",s),f&8&&a!==(a=`${e[3]}px`)&&Dt(t,"top",a),f&4&&l!==(l=`${e[2]}px`)&&Dt(t,"left",l)},i(d){d&&(r||$i(()=>{r=jl(t,ec,{}),r.start()}))},o:Or,d(d){d&&K(t),o=!1,c()}}}function bs(n){let e,t,r;return{c(){e=ge("span"),this.h()},l(i){e=we(i,"SPAN",{class:!0}),xe(e).forEach(K),this.h()},h(){oe(e,"class","absolute inset-0 h-full w-full bg-gray-400/25")},m(i,s){Ie(i,e,s),r=!0},p(i,s){},i(i){r||(i&&$i(()=>{t||(t=kr(e,Tr,{easing:Er},!0)),t.run(1)}),r=!0)},o(i){i&&(t||(t=kr(e,Tr,{easing:Er},!1)),t.run(0)),r=!1},d(i){i&&K(e),i&&t&&t.end()}}}function xs(n){let e,t,r;return{c(){e=ge("span"),this.h()},l(i){e=we(i,"SPAN",{class:!0}),xe(e).forEach(K),this.h()},h(){oe(e,"class","absolute inset-0 h-full w-full bg-gray-400/[.10]")},m(i,s){Ie(i,e,s),r=!0},p(i,s){},i(i){r||(i&&$i(()=>{t||(t=kr(e,Tr,{easing:Er},!0)),t.run(1)}),r=!0)},o(i){i&&(t||(t=kr(e,Tr,{easing:Er},!1)),t.run(0)),r=!1},d(i){i&&K(e),i&&t&&t.end()}}}function Jl(n){let e,t=[],r=new Map,i,s,a=n[4];const l=d=>d[16].id;for(let d=0;d<a.length;d+=1){let f=gs(n,a,d),u=l(f);r.set(u,t[d]=ws(u,f))}let o=n[5]&&bs(),c=(n[5]||n[6])&&xs();return{c(){e=ge("span");for(let d=0;d<t.length;d+=1)t[d].c();i=St(),o&&o.c(),s=St(),c&&c.c(),this.h()},l(d){e=we(d,"SPAN",{class:!0});var f=xe(e);for(let u=0;u<t.length;u+=1)t[u].l(f);i=At(f),o&&o.l(f),s=At(f),c&&c.l(f),f.forEach(K),this.h()},h(){oe(e,"class","absolute inset-0 h-full w-full")},m(d,f){Ie(d,e,f);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);ue(e,i),o&&o.m(e,null),ue(e,s),c&&c.m(e,null),n[9](e)},p(d,[f]){f&30&&(a=d[4],t=Ul(t,f,l,1,d,a,r,e,Vl,ws,i,gs)),d[5]?o?(o.p(d,f),f&32&&he(o,1)):(o=bs(),o.c(),he(o,1),o.m(e,s)):o&&(wi(),Ce(o,1,1,()=>{o=null}),bi()),d[5]||d[6]?c?(c.p(d,f),f&96&&he(c,1)):(c=xs(),c.c(),he(c,1),c.m(e,null)):c&&(wi(),Ce(c,1,1,()=>{c=null}),bi())},i(d){for(let f=0;f<a.length;f+=1)he(t[f]);he(o),he(c)},o(d){Ce(o),Ce(c)},d(d){d&&K(e);for(let f=0;f<t.length;f+=1)t[f].d();o&&o.d(),c&&c.d(),n[9](null)}}}function ec(n,e){return{delay:0,duration:400,css:(t,r)=>`
          transform: scale(${t*4});
          opacity: ${r}
        `}}function tc(n,e,t){let r,i=0,s=0,a=0,l=[],o=!1,c=!1,d,f=[];$l(()=>{m()});function u(b,y,v){b.addEventListener(y,v),f.push({el:b,type:y,listener:v})}function m(){f.forEach(({el:b,type:y,listener:v})=>b.removeEventListener(y,v)),f=[]}function g(b,y,v,_,k,T){t(1,i=Math.max(k,T));const C=i/2;t(2,s=b-v-C),t(3,a=y-_-C),t(4,l=[{id:Date.now()}]),t(5,o=!0),t(6,c=!1)}function h(b,y){const v=y.getBoundingClientRect();g(b.clientX,b.clientY,v.left,v.top,v.width,v.height)}function p(b,y){const v=b.touches[0],_=y.getBoundingClientRect();g(v.clientX,v.clientY,_.left,_.top,_.width,_.height)}const w=()=>t(4,l=[]);function x(b){Ma[b?"unshift":"push"](()=>{d=b,t(0,d)})}return n.$$.update=()=>{if(n.$$.dirty&1&&t(7,r=d==null?void 0:d.parentElement),n.$$.dirty&128&&r){r.classList.add("relative","overflow-hidden"),m();const b=r;u(b,"focusin",()=>t(6,c=!0)),u(b,"focusout",()=>t(6,c=!1)),u(b,"mouseenter",()=>t(6,c=!0)),u(b,"mouseleave",()=>{t(5,o=!1),t(6,c=!1)}),u(b,"mousedown",y=>h(y,b)),u(b,"mouseup",()=>t(5,o=!1)),u(b,"touchstart",y=>p(y,b)),u(b,"touchend",()=>t(5,o=!1)),u(b,"touchcancel",()=>t(5,o=!1))}},[d,i,s,a,l,o,c,r,w,x]}class Un extends Hn{constructor(e){super(),qn(this,e,tc,Jl,Zn,{})}}function nc(n){let e;return{c(){e=et(n[0])},l(t){e=tt(t,n[0])},m(t,r){Ie(t,e,r)},p(t,r){r&1&&on(e,t[0])},d(t){t&&K(e)}}}function rc(n){let e,t;return{c(){e=ge("p"),t=et(n[1])},l(r){e=we(r,"P",{});var i=xe(e);t=tt(i,n[1]),i.forEach(K)},m(r,i){Ie(r,e,i),ue(e,t)},p(r,i){i&2&&on(t,r[1])},d(r){r&&K(e)}}}function ic(n){let e,t,r,i,s,a;return r=new Un({}),{c(){e=ge("button"),t=et(`Close
      `),Zt(r.$$.fragment),this.h()},l(l){e=we(l,"BUTTON",{class:!0});var o=xe(e);t=tt(o,`Close
      `),Gt(r.$$.fragment,o),o.forEach(K),this.h()},h(){oe(e,"class",Ln)},m(l,o){Ie(l,e,o),ue(e,t),Xt(r,e,null),i=!0,s||(a=Gn(e,"click",n[3]),s=!0)},p:Or,i(l){i||(he(r.$$.fragment,l),i=!0)},o(l){Ce(r.$$.fragment,l),i=!1},d(l){l&&K(e),zt(r),s=!1,a()}}}function sc(n){let e,t;return e=new ji({props:{$$slots:{footer:[ic],content:[rc],header:[nc]},$$scope:{ctx:n}}}),{c(){Zt(e.$$.fragment)},l(r){Gt(e.$$.fragment,r)},m(r,i){Xt(e,r,i),t=!0},p(r,[i]){const s={};i&19&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||(he(e.$$.fragment,r),t=!0)},o(r){Ce(e.$$.fragment,r),t=!1},d(r){zt(e,r)}}}function ac(n,e,t){let{title:r}=e,{message:i}=e;const s=La(),a=()=>s("close");return n.$$set=l=>{"title"in l&&t(0,r=l.title),"message"in l&&t(1,i=l.message)},[r,i,s,a]}class oc extends Hn{constructor(e){super(),qn(this,e,ac,sc,Zn,{title:0,message:1})}}function lc(n){return nt(n==null?void 0:n.lift)}function yt(n){return function(e){if(lc(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pt(n,e,t,r,i){return new cc(n,e,t,r,i)}var cc=function(n){Vi(e,n);function e(t,r,i,s,a,l){var o=n.call(this,t)||this;return o.onFinalize=a,o.shouldUnsubscribe=l,o._next=r?function(c){try{r(c)}catch(d){t.error(d)}}:n.prototype._next,o._error=s?function(c){try{s(c)}catch(d){t.error(d)}finally{this.unsubscribe()}}:n.prototype._error,o._complete=i?function(){try{i()}catch(c){t.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,o}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(Il),dc=function(n){Vi(e,n);function e(t){var r=n.call(this)||this;return r._value=t,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var r=n.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},e.prototype.getValue=function(){var t=this,r=t.hasError,i=t.thrownError,s=t._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(t){n.prototype.next.call(this,this._value=t)},e}($t),$a={now:function(){return($a.delegate||Date).now()},delegate:void 0},fc=function(n){Vi(e,n);function e(t,r,i){t===void 0&&(t=1/0),r===void 0&&(r=1/0),i===void 0&&(i=$a);var s=n.call(this)||this;return s._bufferSize=t,s._windowTime=r,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,r),s}return e.prototype.next=function(t){var r=this,i=r.isStopped,s=r._buffer,a=r._infiniteTimeWindow,l=r._timestampProvider,o=r._windowTime;i||(s.push(t),!a&&s.push(l.now()+o)),this._trimBuffer(),n.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(t),i=this,s=i._infiniteTimeWindow,a=i._buffer,l=a.slice(),o=0;o<l.length&&!t.closed;o+=s?1:2)t.next(l[o]);return this._checkFinalizedStatuses(t),r},e.prototype._trimBuffer=function(){var t=this,r=t._bufferSize,i=t._timestampProvider,s=t._buffer,a=t._infiniteTimeWindow,l=(a?1:2)*r;if(r<1/0&&l<s.length&&s.splice(0,s.length-l),!a){for(var o=i.now(),c=0,d=1;d<s.length&&s[d]<=o;d+=2)c=d;c&&s.splice(0,c+1)}},e}($t);function uc(n){return n&&nt(n.schedule)}function Wi(n){return n[n.length-1]}function $h(n){return nt(Wi(n))?n.pop():void 0}function ja(n){return uc(Wi(n))?n.pop():void 0}function jh(n,e){return typeof Wi(n)=="number"?n.pop():e}var Wa=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function Ha(n){return nt(n==null?void 0:n.then)}function qa(n){return nt(n[Na])}function Za(n){return Symbol.asyncIterator&&nt(n==null?void 0:n[Symbol.asyncIterator])}function Ga(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function hc(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xa=hc();function za(n){return nt(n==null?void 0:n[Xa])}function Ka(n){return Bl(this,arguments,function(){var t,r,i,s;return Fa(this,function(a){switch(a.label){case 0:t=n.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Wr(t.read())];case 3:return r=a.sent(),i=r.value,s=r.done,s?[4,Wr(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Wr(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Qa(n){return nt(n==null?void 0:n.getReader)}function Nt(n){if(n instanceof vt)return n;if(n!=null){if(qa(n))return pc(n);if(Wa(n))return mc(n);if(Ha(n))return gc(n);if(Za(n))return Ya(n);if(za(n))return wc(n);if(Qa(n))return bc(n)}throw Ga(n)}function pc(n){return new vt(function(e){var t=n[Na]();if(nt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mc(n){return new vt(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function gc(n){return new vt(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,Pl)})}function wc(n){return new vt(function(e){var t,r;try{for(var i=Nl(n),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()})}function Ya(n){return new vt(function(e){xc(n,e).catch(function(t){return e.error(t)})})}function bc(n){return Ya(Ka(n))}function xc(n,e){var t,r,i,s;return Fl(this,void 0,void 0,function(){var a,l;return Fa(this,function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),t=Ol(n),o.label=1;case 1:return[4,t.next()];case 2:if(r=o.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=o.sent(),i={error:l},[3,11];case 6:return o.trys.push([6,,9,10]),r&&!r.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Wt(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ja(n,e){return e===void 0&&(e=0),yt(function(t,r){t.subscribe(Pt(r,function(i){return Wt(r,n,function(){return r.next(i)},e)},function(){return Wt(r,n,function(){return r.complete()},e)},function(i){return Wt(r,n,function(){return r.error(i)},e)}))})}function eo(n,e){return e===void 0&&(e=0),yt(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},e))})}function vc(n,e){return Nt(n).pipe(eo(e),Ja(e))}function yc(n,e){return Nt(n).pipe(eo(e),Ja(e))}function _c(n,e){return new vt(function(t){var r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function kc(n,e){return new vt(function(t){var r;return Wt(t,e,function(){r=n[Xa](),Wt(t,e,function(){var i,s,a;try{i=r.next(),s=i.value,a=i.done}catch(l){t.error(l);return}a?t.complete():t.next(s)},0,!0)}),function(){return nt(r==null?void 0:r.return)&&r.return()}})}function to(n,e){if(!n)throw new Error("Iterable cannot be null");return new vt(function(t){Wt(t,e,function(){var r=n[Symbol.asyncIterator]();Wt(t,e,function(){r.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function Ec(n,e){return to(Ka(n),e)}function Tc(n,e){if(n!=null){if(qa(n))return vc(n,e);if(Wa(n))return _c(n,e);if(Ha(n))return yc(n,e);if(Za(n))return to(n,e);if(za(n))return kc(n,e);if(Qa(n))return Ec(n,e)}throw Ga(n)}function xi(n,e){return e?Tc(n,e):Nt(n)}function Hi(n,e){return yt(function(t,r){var i=0;t.subscribe(Pt(r,function(s){r.next(n.call(e,s,i++))}))})}function Sc(n,e,t,r,i,s,a,l){var o=[],c=0,d=0,f=!1,u=function(){f&&!o.length&&!c&&e.complete()},m=function(h){return c<r?g(h):o.push(h)},g=function(h){s&&e.next(h),c++;var p=!1;Nt(t(h,d++)).subscribe(Pt(e,function(w){i==null||i(w),s?m(w):e.next(w)},function(){p=!0},void 0,function(){if(p)try{c--;for(var w=function(){var x=o.shift();a?Wt(e,a,function(){return g(x)}):g(x)};o.length&&c<r;)w();u()}catch(x){e.error(x)}}))};return n.subscribe(Pt(e,m,function(){f=!0,u()})),function(){l==null||l()}}function no(n,e,t){return t===void 0&&(t=1/0),nt(e)?no(function(r,i){return Hi(function(s,a){return e(r,s,i,a)})(Nt(n(r,i)))},t):(typeof e=="number"&&(t=e),yt(function(r,i){return Sc(r,i,n,t)}))}function Ac(n){return n===void 0&&(n=1/0),no(Oa,n)}function Cc(){return Ac(1)}function vs(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Cc()(xi(n,ja(n)))}var Ic=new vt(Rl);function Bc(n,e){return yt(function(t,r){var i=0;t.subscribe(Pt(r,function(s){return n.call(e,s,i++)&&r.next(s)}))})}function ro(n){return yt(function(e,t){var r=null,i=!1,s;r=e.subscribe(Pt(t,void 0,void 0,function(a){s=Nt(n(a,ro(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Pc(n){n===void 0&&(n={});var e=n.connector,t=e===void 0?function(){return new $t}:e,r=n.resetOnError,i=r===void 0?!0:r,s=n.resetOnComplete,a=s===void 0?!0:s,l=n.resetOnRefCountZero,o=l===void 0?!0:l;return function(c){var d,f,u,m=0,g=!1,h=!1,p=function(){f==null||f.unsubscribe(),f=void 0},w=function(){p(),d=u=void 0,g=h=!1},x=function(){var b=d;w(),b==null||b.unsubscribe()};return yt(function(b,y){m++,!h&&!g&&p();var v=u=u??t();y.add(function(){m--,m===0&&!h&&!g&&(f=Xr(x,o))}),v.subscribe(y),!d&&m>0&&(d=new Ra({next:function(_){return v.next(_)},error:function(_){h=!0,p(),f=Xr(w,i,_),v.error(_)},complete:function(){g=!0,p(),f=Xr(w,a),v.complete()}}),Nt(b).subscribe(d))})(c)}}function Xr(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];if(e===!0){n();return}if(e!==!1){var i=new Ra({next:function(){i.unsubscribe(),n()}});return Nt(e.apply(void 0,Dl([],Ml(t)))).subscribe(i)}}function Yn(n,e,t){var r,i,s,a,l=!1;return n&&typeof n=="object"?(r=n.bufferSize,a=r===void 0?1/0:r,i=n.windowTime,e=i===void 0?1/0:i,s=n.refCount,l=s===void 0?!1:s,t=n.scheduler):a=n??1/0,Pc({connector:function(){return new fc(a,e,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function Nc(n){return Bc(function(e,t){return n<=t})}function zr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=ja(n);return yt(function(r,i){(t?vs(n,r,t):vs(n,r)).subscribe(i)})}function dn(n,e){return yt(function(t,r){var i=null,s=0,a=!1,l=function(){return a&&!i&&r.complete()};t.subscribe(Pt(r,function(o){i==null||i.unsubscribe();var c=0,d=s++;Nt(n(o,d)).subscribe(i=Pt(r,function(f){return r.next(e?e(o,f,d,c++):f)},function(){i=null,l()}))},function(){a=!0,l()}))})}function ys(n,e,t){var r=nt(n)||e||t?{next:n,error:e,complete:t}:n;return r?yt(function(i,s){var a;(a=r.subscribe)===null||a===void 0||a.call(r);var l=!0;i.subscribe(Pt(s,function(o){var c;(c=r.next)===null||c===void 0||c.call(r,o),s.next(o)},function(){var o;l=!1,(o=r.complete)===null||o===void 0||o.call(r),s.complete()},function(o){var c;l=!1,(c=r.error)===null||c===void 0||c.call(r,o),s.error(o)},function(){var o,c;l&&((o=r.unsubscribe)===null||o===void 0||o.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Oa}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function Fc(n){return n.set=n.next,n}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function ln(n){return Fc(new dc(n))}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const Oc=ln([]),Sr={dialogs$:Oc};/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */var On=(n=>(n.ASC="asc",n.DESC="desc",n))(On||{});/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */var G=(n=>(n.BACKUP="backup",n.BROWSER="browser",n.FS="fs",n.GDRIVE="gdrive",n.ONEDRIVE="onedrive",n))(G||{}),vn=(n=>(n.DATA="data",n.PROGRESS="bookmark",n))(vn||{}),Ge=(n=>(n.GDRIVE_DEFAULT="ttu-gdrive-default",n.ONEDRIVE_DEFAULT="ttu-onedrive-default",n))(Ge||{});const qi="ttu-internal-source",Wh=[{name:"ttu-gdrive-default",type:"gdrive"},{name:"ttu-onedrive-default",type:"onedrive"}];/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */var be=(n=>(n.Overwrite="overwrite",n.NewOnly="new",n))(be||{}),io=(n=>(n.Off="off",n.Up="up",n.Down="down",n.All="all",n))(io||{});/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */var at=(n=>(n.AUTO_SCROLL_TOGGLE="autoScrollToggle",n.AUTO_SCROLL_INCREASE="autoScrollIncrease",n.AUTO_SCROLL_DECREASE="autoScrollDecrease",n.BOOKMARK="bookmark",n.JUMP_TO_BOOKMARK="jumpToBookmark",n.NEXT_CHAPTER="nextChapter",n.NEXT_PAGE="nextPage",n.PREV_CHAPTER="prevChapter",n.PREV_PAGE="prevPage",n.SET_READING_POINT="setCustomReadingPoint",n))(at||{});function Rc(n){let e;return{c(){e=et(n[0])},l(t){e=tt(t,n[0])},m(t,r){Ie(t,e,r)},p(t,r){r&1&&on(e,t[0])},d(t){t&&K(e)}}}function Dc(n){let e,t;return{c(){e=ge("p"),t=et(n[1])},l(r){e=we(r,"P",{});var i=xe(e);t=tt(i,n[1]),i.forEach(K)},m(r,i){Ie(r,e,i),ue(e,t)},p(r,i){i&2&&on(t,r[1])},d(r){r&&K(e)}}}function Mc(n){let e,t,r,i,s,a,l,o;return r=new Un({}),l=new Un({}),{c(){e=ge("a"),t=et(`Open Repository
      `),Zt(r.$$.fragment),i=St(),s=ge("a"),a=et(`Download Report
      `),Zt(l.$$.fragment),this.h()},l(c){e=we(c,"A",{class:!0,href:!0,target:!0,rel:!0});var d=xe(e);t=tt(d,`Open Repository
      `),Gt(r.$$.fragment,d),d.forEach(K),i=At(c),s=we(c,"A",{class:!0,href:!0,download:!0});var f=xe(s);a=tt(f,`Download Report
      `),Gt(l.$$.fragment,f),f.forEach(K),this.h()},h(){oe(e,"class",Ln),oe(e,"href","https://github.com/ttu-ttu/ebook-reader"),oe(e,"target","_blank"),oe(e,"rel","noreferrer"),oe(s,"class",Ln),oe(s,"href",n[2]),oe(s,"download","log.json")},m(c,d){Ie(c,e,d),ue(e,t),Xt(r,e,null),Ie(c,i,d),Ie(c,s,d),ue(s,a),Xt(l,s,null),o=!0},p:Or,i(c){o||(he(r.$$.fragment,c),he(l.$$.fragment,c),o=!0)},o(c){Ce(r.$$.fragment,c),Ce(l.$$.fragment,c),o=!1},d(c){c&&K(e),zt(r),c&&K(i),c&&K(s),zt(l)}}}function Lc(n){let e,t;return e=new ji({props:{$$slots:{footer:[Mc],content:[Dc],header:[Rc]},$$scope:{ctx:n}}}),{c(){Zt(e.$$.fragment)},l(r){Gt(e.$$.fragment,r)},m(r,i){Xt(e,r,i),t=!0},p(r,[i]){const s={};i&19&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||(he(e.$$.fragment,r),t=!0)},o(r){Ce(e.$$.fragment,r),t=!1},d(r){zt(e,r)}}}function Uc(n,e,t){var l,o;let{title:r="Error"}=e,{message:i}=e;const a=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify({userAgent:navigator.userAgent,viewport:{visualViewport:!!window.visualViewport,width:((l=window.visualViewport)==null?void 0:l.width)??window.innerWidth,height:((o=window.visualViewport)==null?void 0:o.height)??window.innerHeight},settings:{theme:th.getValue(),viewMode:dh.getValue(),fontFamilyGroupOne:rh.getValue(),fontFamilyGroupTwo:ih.getValue(),fontSize:sh.getValue(),lineHeight:ah.getValue(),firstDimensionMargin:uh.getValue(),secondDimensionMaxValue:fh.getValue(),swipeThreshold:hh.getValue(),disableWheelNavigation:ph.getValue(),writingMode:Tl.getValue(),confirmClose:xh.getValue(),autoBookmark:vh.getValue(),hideSpoilerImage:oh.getValue(),hideFurigana:lh.getValue(),furiganaStyle:ch.getValue(),avoidPageBreak:gh.getValue(),customReadingPointEnabled:wh.getValue(),selectionToBookmarkEnabled:bh.getValue(),pageColumns:yh.getValue(),autoPositionOnResize:mh.getValue(),requestPersistentStorage:Sl.getValue(),cacheStorageData:_h.getValue(),autoReplication:kh.getValue(),replicationSaveBehavior:Eh.getValue(),showExternalPlaceholder:Th.getValue(),gDriveStorageSource:as.getValue()===Ge.GDRIVE_DEFAULT,oneDriveStorageSource:os.getValue()===Ge.ONEDRIVE_DEFAULT,fsStorageSource:!!ls.getValue(),syncTarget:!!_r.getValue(),isOnline:Ah.getValue(),multiplier:nh.getValue()},log:Tt.history},null,2))}`;return n.$$set=c=>{"title"in c&&t(0,r=c.title),"message"in c&&t(1,i=c.message)},[r,i,a]}class Vc extends Hn{constructor(e){super(),qn(this,e,Uc,Lc,Zn,{title:0,message:1})}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const Jn=4;/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const Hh={}.VITE_BASE_PATH||"https://reader.ttsu.app",Kr={}.VITE_PAGE_PATH||"",$c={}.VITE_STORAGE_ROOT_NAME||"ttu-reader-data",so={}.VITE_GDRIVE_AUTH_ENDPOINT||"https://accounts.google.com/o/oauth2/v2/auth",jc={}.VITE_GDRIVE_TOKEN_ENDPOINT||"https://oauth2.googleapis.com/token",Wc={}.VITE_GDRIVE_REFRESH_ENDPOINT||"https://oauth2.googleapis.com/token",qh={}.VITE_GDRIVE_REVOKE_ENDPOINT||"https://oauth2.googleapis.com/revoke",ao={}.VITE_GDRIVE_SCOPE||"https://www.googleapis.com/auth/drive.file",oo={}.VITE_GDRIVE_CLIENT_ID||"",lo={}.VITE_ONEDRIVE_AUTH_ENDPOINT||"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",co={}.VITE_ONEDRIVE_TOKEN_ENDPOINT||"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",fo={}.VITE_ONEDRIVE_SCOPE||"files.readwrite",uo={}.VITE_ONEDRIVE_CLIENT_ID||"";/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const Hc={persist:async()=>!1,persisted:async()=>!1},qc=navigator.storage||Hc,Vn=15,vi=30,yi=19,Zc=29,Ar=256,Zi=Ar+1+Zc,_s=2*Zi+1,En=256,Gc=7,ks=16,Es=17,Ts=18,Qr=8*2,Cr=-1,Xc=1,er=2,zc=0,hn=0,Ss=1,Kc=3,Re=4,ot=0,ho=1,tr=2,ct=-2,Qc=-3,fn=-5;function Rr(n){return Dr(n.map(([e,t])=>new Array(e).fill(t,0,e)))}function Dr(n){return n.reduce((e,t)=>e.concat(Array.isArray(t)?Dr(t):t),[])}const As=[0,1,2,3].concat(...Rr([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function se(){const n=this;function e(i){const s=n.dyn_tree,a=n.stat_desc.static_tree,l=n.stat_desc.extra_bits,o=n.stat_desc.extra_base,c=n.stat_desc.max_length;let d,f,u,m,g,h,p=0;for(m=0;m<=Vn;m++)i.bl_count[m]=0;for(s[i.heap[i.heap_max]*2+1]=0,d=i.heap_max+1;d<_s;d++)f=i.heap[d],m=s[s[f*2+1]*2+1]+1,m>c&&(m=c,p++),s[f*2+1]=m,!(f>n.max_code)&&(i.bl_count[m]++,g=0,f>=o&&(g=l[f-o]),h=s[f*2],i.opt_len+=h*(m+g),a&&(i.static_len+=h*(a[f*2+1]+g)));if(p!==0){do{for(m=c-1;i.bl_count[m]===0;)m--;i.bl_count[m]--,i.bl_count[m+1]+=2,i.bl_count[c]--,p-=2}while(p>0);for(m=c;m!==0;m--)for(f=i.bl_count[m];f!==0;)u=i.heap[--d],!(u>n.max_code)&&(s[u*2+1]!=m&&(i.opt_len+=(m-s[u*2+1])*s[u*2],s[u*2+1]=m),f--)}}function t(i,s){let a=0;do a|=i&1,i>>>=1,a<<=1;while(--s>0);return a>>>1}function r(i,s,a){const l=[];let o=0,c,d,f;for(c=1;c<=Vn;c++)l[c]=o=o+a[c-1]<<1;for(d=0;d<=s;d++)f=i[d*2+1],f!==0&&(i[d*2]=t(l[f]++,f))}n.build_tree=function(i){const s=n.dyn_tree,a=n.stat_desc.static_tree,l=n.stat_desc.elems;let o,c,d=-1,f;for(i.heap_len=0,i.heap_max=_s,o=0;o<l;o++)s[o*2]!==0?(i.heap[++i.heap_len]=d=o,i.depth[o]=0):s[o*2+1]=0;for(;i.heap_len<2;)f=i.heap[++i.heap_len]=d<2?++d:0,s[f*2]=1,i.depth[f]=0,i.opt_len--,a&&(i.static_len-=a[f*2+1]);for(n.max_code=d,o=Math.floor(i.heap_len/2);o>=1;o--)i.pqdownheap(s,o);f=l;do o=i.heap[1],i.heap[1]=i.heap[i.heap_len--],i.pqdownheap(s,1),c=i.heap[1],i.heap[--i.heap_max]=o,i.heap[--i.heap_max]=c,s[f*2]=s[o*2]+s[c*2],i.depth[f]=Math.max(i.depth[o],i.depth[c])+1,s[o*2+1]=s[c*2+1]=f,i.heap[1]=f++,i.pqdownheap(s,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],e(i),r(s,n.max_code,i.bl_count)}}se._length_code=[0,1,2,3,4,5,6,7].concat(...Rr([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]]));se.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0];se.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];se.d_code=function(n){return n<256?As[n]:As[256+(n>>>7)]};se.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];se.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];se.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];se.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function Se(n,e,t,r,i){const s=this;s.static_tree=n,s.extra_bits=e,s.extra_base=t,s.elems=r,s.max_length=i}const Yc=[12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227],Jc=Rr([[144,8],[112,9],[24,7],[8,8]]);Se.static_ltree=Dr(Yc.map((n,e)=>[n,Jc[e]]));const ed=[0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23],td=Rr([[30,5]]);Se.static_dtree=Dr(ed.map((n,e)=>[n,td[e]]));Se.static_l_desc=new Se(Se.static_ltree,se.extra_lbits,Ar+1,Zi,Vn);Se.static_d_desc=new Se(Se.static_dtree,se.extra_dbits,0,vi,Vn);Se.static_bl_desc=new Se(null,se.extra_blbits,0,yi,Gc);const nd=9,rd=8;function gt(n,e,t,r,i){const s=this;s.good_length=n,s.max_lazy=e,s.nice_length=t,s.max_chain=r,s.func=i}const po=0,gr=1,tn=2,st=[new gt(0,0,0,0,po),new gt(4,4,8,4,gr),new gt(4,5,16,8,gr),new gt(4,6,32,32,gr),new gt(4,4,16,16,tn),new gt(8,16,32,32,tn),new gt(8,16,128,128,tn),new gt(8,32,128,256,tn),new gt(32,128,258,1024,tn),new gt(32,258,258,4096,tn)],nr=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Je=0,rr=1,Tn=2,ir=3,id=32,Yr=42,sr=113,Sn=666,Jr=8,sd=0,ei=1,ad=2,fe=3,wr=258,je=wr+fe+1;function Cs(n,e,t,r){const i=n[e*2],s=n[t*2];return i<s||i==s&&r[e]<=r[t]}function od(){const n=this;let e,t,r,i,s,a,l,o,c,d,f,u,m,g,h,p,w,x,b,y,v,_,k,T,C,S,A,R,F,V,O,L,j;const q=new se,ve=new se,U=new se;n.depth=[];let Ee,Z,X,ze,pe,te;n.bl_count=[],n.heap=[],O=[],L=[],j=[];function Qt(){c=2*s,f[m-1]=0;for(let E=0;E<m-1;E++)f[E]=0;S=st[A].max_lazy,F=st[A].good_length,V=st[A].nice_length,C=st[A].max_chain,v=0,w=0,k=0,x=T=fe-1,y=0,u=0}function _t(){let E;for(E=0;E<Zi;E++)O[E*2]=0;for(E=0;E<vi;E++)L[E*2]=0;for(E=0;E<yi;E++)j[E*2]=0;O[En*2]=1,n.opt_len=n.static_len=0,Z=X=0}function Ke(){q.dyn_tree=O,q.stat_desc=Se.static_l_desc,ve.dyn_tree=L,ve.stat_desc=Se.static_d_desc,U.dyn_tree=j,U.stat_desc=Se.static_bl_desc,pe=0,te=0,ze=8,_t()}n.pqdownheap=function(E,P){const B=n.heap,N=B[P];let M=P<<1;for(;M<=n.heap_len&&(M<n.heap_len&&Cs(E,B[M+1],B[M],n.depth)&&M++,!Cs(E,N,B[M],n.depth));)B[P]=B[M],P=M,M<<=1;B[P]=N};function ht(E,P){let B=-1,N,M=E[0*2+1],H=0,Q=7,Pe=4;M===0&&(Q=138,Pe=3),E[(P+1)*2+1]=65535;for(let it=0;it<=P;it++)N=M,M=E[(it+1)*2+1],!(++H<Q&&N==M)&&(H<Pe?j[N*2]+=H:N!==0?(N!=B&&j[N*2]++,j[ks*2]++):H<=10?j[Es*2]++:j[Ts*2]++,H=0,B=N,M===0?(Q=138,Pe=3):N==M?(Q=6,Pe=3):(Q=7,Pe=4))}function rt(){let E;for(ht(O,q.max_code),ht(L,ve.max_code),U.build_tree(n),E=yi-1;E>=3&&j[se.bl_order[E]*2+1]===0;E--);return n.opt_len+=3*(E+1)+5+5+4,E}function ye(E){n.pending_buf[n.pending++]=E}function pt(E){ye(E&255),ye(E>>>8&255)}function le(E){ye(E>>8&255),ye(E&255&255)}function ce(E,P){let B;const N=P;te>Qr-N?(B=E,pe|=B<<te&65535,pt(pe),pe=B>>>Qr-te,te+=N-Qr):(pe|=E<<te&65535,te+=N)}function de(E,P){const B=E*2;ce(P[B]&65535,P[B+1]&65535)}function Qe(E,P){let B,N=-1,M,H=E[0*2+1],Q=0,Pe=7,it=4;for(H===0&&(Pe=138,it=3),B=0;B<=P;B++)if(M=H,H=E[(B+1)*2+1],!(++Q<Pe&&M==H)){if(Q<it)do de(M,j);while(--Q!==0);else M!==0?(M!=N&&(de(M,j),Q--),de(ks,j),ce(Q-3,2)):Q<=10?(de(Es,j),ce(Q-3,3)):(de(Ts,j),ce(Q-11,7));Q=0,N=M,H===0?(Pe=138,it=3):M==H?(Pe=6,it=3):(Pe=7,it=4)}}function kn(E,P,B){let N;for(ce(E-257,5),ce(P-1,5),ce(B-4,4),N=0;N<B;N++)ce(j[se.bl_order[N]*2+1],3);Qe(O,E-1),Qe(L,P-1)}function zn(){te==16?(pt(pe),pe=0,te=0):te>=8&&(ye(pe&255),pe>>>=8,te-=8)}function Kn(){ce(ei<<1,3),de(En,Se.static_ltree),zn(),1+ze+10-te<9&&(ce(ei<<1,3),de(En,Se.static_ltree),zn()),ze=7}function Ot(E,P){let B,N,M;if(n.dist_buf[Z]=E,n.lc_buf[Z]=P&255,Z++,E===0?O[P*2]++:(X++,E--,O[(se._length_code[P]+Ar+1)*2]++,L[se.d_code(E)*2]++),!(Z&8191)&&A>2){for(B=Z*8,N=v-w,M=0;M<vi;M++)B+=L[M*2]*(5+se.extra_dbits[M]);if(B>>>=3,X<Math.floor(Z/2)&&B<Math.floor(N/2))return!0}return Z==Ee-1}function Oe(E,P){let B,N,M=0,H,Q;if(Z!==0)do B=n.dist_buf[M],N=n.lc_buf[M],M++,B===0?de(N,E):(H=se._length_code[N],de(H+Ar+1,E),Q=se.extra_lbits[H],Q!==0&&(N-=se.base_length[H],ce(N,Q)),B--,H=se.d_code(B),de(H,P),Q=se.extra_dbits[H],Q!==0&&(B-=se.base_dist[H],ce(B,Q)));while(M<Z);de(En,E),ze=E[En*2+1]}function kt(){te>8?pt(pe):te>0&&ye(pe&255),pe=0,te=0}function cn(E,P,B){kt(),ze=8,B&&(pt(P),pt(~P)),n.pending_buf.set(o.subarray(E,E+P),n.pending),n.pending+=P}function z(E,P,B){ce((sd<<1)+(B?1:0),3),cn(E,P,!0)}function J(E,P,B){let N,M,H=0;A>0?(q.build_tree(n),ve.build_tree(n),H=rt(),N=n.opt_len+3+7>>>3,M=n.static_len+3+7>>>3,M<=N&&(N=M)):N=M=P+5,P+4<=N&&E!=-1?z(E,P,B):M==N?(ce((ei<<1)+(B?1:0),3),Oe(Se.static_ltree,Se.static_dtree)):(ce((ad<<1)+(B?1:0),3),kn(q.max_code+1,ve.max_code+1,H+1),Oe(O,L)),_t(),B&&kt()}function W(E){J(w>=0?w:-1,v-w,E),w=v,e.flush_pending()}function ne(){let E,P,B,N;do{if(N=c-k-v,N===0&&v===0&&k===0)N=s;else if(N==-1)N--;else if(v>=s+s-je){o.set(o.subarray(s,s+s),0),_-=s,v-=s,w-=s,E=m,B=E;do P=f[--B]&65535,f[B]=P>=s?P-s:0;while(--E!==0);E=s,B=E;do P=d[--B]&65535,d[B]=P>=s?P-s:0;while(--E!==0);N+=s}if(e.avail_in===0)return;E=e.read_buf(o,v+k,N),k+=E,k>=fe&&(u=o[v]&255,u=(u<<p^o[v+1]&255)&h)}while(k<je&&e.avail_in!==0)}function mt(E){let P=65535,B;for(P>r-5&&(P=r-5);;){if(k<=1){if(ne(),k===0&&E==hn)return Je;if(k===0)break}if(v+=k,k=0,B=w+P,(v===0||v>=B)&&(k=v-B,v=B,W(!1),e.avail_out===0)||v-w>=s-je&&(W(!1),e.avail_out===0))return Je}return W(E==Re),e.avail_out===0?E==Re?Tn:Je:E==Re?ir:rr}function $e(E){let P=C,B=v,N,M,H=T;const Q=v>s-je?v-(s-je):0;let Pe=V;const it=l,$r=v+wr;let cs=o[B+H-1],ds=o[B+H];T>=F&&(P>>=2),Pe>k&&(Pe=k);do if(N=E,!(o[N+H]!=ds||o[N+H-1]!=cs||o[N]!=o[B]||o[++N]!=o[B+1])){B+=2,N++;do;while(o[++B]==o[++N]&&o[++B]==o[++N]&&o[++B]==o[++N]&&o[++B]==o[++N]&&o[++B]==o[++N]&&o[++B]==o[++N]&&o[++B]==o[++N]&&o[++B]==o[++N]&&B<$r);if(M=wr-($r-B),B=$r-wr,M>H){if(_=E,H=M,M>=Pe)break;cs=o[B+H-1],ds=o[B+H]}}while((E=d[E&it]&65535)>Q&&--P!==0);return H<=k?H:k}function D(E){let P=0,B;for(;;){if(k<je){if(ne(),k<je&&E==hn)return Je;if(k===0)break}if(k>=fe&&(u=(u<<p^o[v+(fe-1)]&255)&h,P=f[u]&65535,d[v&l]=f[u],f[u]=v),P!==0&&(v-P&65535)<=s-je&&R!=er&&(x=$e(P)),x>=fe)if(B=Ot(v-_,x-fe),k-=x,x<=S&&k>=fe){x--;do v++,u=(u<<p^o[v+(fe-1)]&255)&h,P=f[u]&65535,d[v&l]=f[u],f[u]=v;while(--x!==0);v++}else v+=x,x=0,u=o[v]&255,u=(u<<p^o[v+1]&255)&h;else B=Ot(0,o[v]&255),k--,v++;if(B&&(W(!1),e.avail_out===0))return Je}return W(E==Re),e.avail_out===0?E==Re?Tn:Je:E==Re?ir:rr}function Yt(E){let P=0,B,N;for(;;){if(k<je){if(ne(),k<je&&E==hn)return Je;if(k===0)break}if(k>=fe&&(u=(u<<p^o[v+(fe-1)]&255)&h,P=f[u]&65535,d[v&l]=f[u],f[u]=v),T=x,b=_,x=fe-1,P!==0&&T<S&&(v-P&65535)<=s-je&&(R!=er&&(x=$e(P)),x<=5&&(R==Xc||x==fe&&v-_>4096)&&(x=fe-1)),T>=fe&&x<=T){N=v+k-fe,B=Ot(v-1-b,T-fe),k-=T-1,T-=2;do++v<=N&&(u=(u<<p^o[v+(fe-1)]&255)&h,P=f[u]&65535,d[v&l]=f[u],f[u]=v);while(--T!==0);if(y=0,x=fe-1,v++,B&&(W(!1),e.avail_out===0))return Je}else if(y!==0){if(B=Ot(0,o[v-1]&255),B&&W(!1),v++,k--,e.avail_out===0)return Je}else y=1,v++,k--}return y!==0&&(B=Ot(0,o[v-1]&255),y=0),W(E==Re),e.avail_out===0?E==Re?Tn:Je:E==Re?ir:rr}function Ye(E){return E.total_in=E.total_out=0,E.msg=null,n.pending=0,n.pending_out=0,t=sr,i=hn,Ke(),Qt(),ot}n.deflateInit=function(E,P,B,N,M,H){return N||(N=Jr),M||(M=rd),H||(H=zc),E.msg=null,P==Cr&&(P=6),M<1||M>nd||N!=Jr||B<9||B>15||P<0||P>9||H<0||H>er?ct:(E.dstate=n,a=B,s=1<<a,l=s-1,g=M+7,m=1<<g,h=m-1,p=Math.floor((g+fe-1)/fe),o=new Uint8Array(s*2),d=[],f=[],Ee=1<<M+6,n.pending_buf=new Uint8Array(Ee*4),r=Ee*4,n.dist_buf=new Uint16Array(Ee),n.lc_buf=new Uint8Array(Ee),A=P,R=H,Ye(E))},n.deflateEnd=function(){return t!=Yr&&t!=sr&&t!=Sn?ct:(n.lc_buf=null,n.dist_buf=null,n.pending_buf=null,f=null,d=null,o=null,n.dstate=null,t==sr?Qc:ot)},n.deflateParams=function(E,P,B){let N=ot;return P==Cr&&(P=6),P<0||P>9||B<0||B>er?ct:(st[A].func!=st[P].func&&E.total_in!==0&&(N=E.deflate(Ss)),A!=P&&(A=P,S=st[A].max_lazy,F=st[A].good_length,V=st[A].nice_length,C=st[A].max_chain),R=B,N)},n.deflateSetDictionary=function(E,P,B){let N=B,M,H=0;if(!P||t!=Yr)return ct;if(N<fe)return ot;for(N>s-je&&(N=s-je,H=B-N),o.set(P.subarray(H,H+N),0),v=N,w=N,u=o[0]&255,u=(u<<p^o[1]&255)&h,M=0;M<=N-fe;M++)u=(u<<p^o[M+(fe-1)]&255)&h,d[M&l]=f[u],f[u]=M;return ot},n.deflate=function(E,P){let B,N,M,H,Q;if(P>Re||P<0)return ct;if(!E.next_out||!E.next_in&&E.avail_in!==0||t==Sn&&P!=Re)return E.msg=nr[tr-ct],ct;if(E.avail_out===0)return E.msg=nr[tr-fn],fn;if(e=E,H=i,i=P,t==Yr&&(N=Jr+(a-8<<4)<<8,M=(A-1&255)>>1,M>3&&(M=3),N|=M<<6,v!==0&&(N|=id),N+=31-N%31,t=sr,le(N)),n.pending!==0){if(e.flush_pending(),e.avail_out===0)return i=-1,ot}else if(e.avail_in===0&&P<=H&&P!=Re)return e.msg=nr[tr-fn],fn;if(t==Sn&&e.avail_in!==0)return E.msg=nr[tr-fn],fn;if(e.avail_in!==0||k!==0||P!=hn&&t!=Sn){switch(Q=-1,st[A].func){case po:Q=mt(P);break;case gr:Q=D(P);break;case tn:Q=Yt(P);break}if((Q==Tn||Q==ir)&&(t=Sn),Q==Je||Q==Tn)return e.avail_out===0&&(i=-1),ot;if(Q==rr){if(P==Ss)Kn();else if(z(0,0,!1),P==Kc)for(B=0;B<m;B++)f[B]=0;if(e.flush_pending(),e.avail_out===0)return i=-1,ot}}return P!=Re?ot:ho}}function mo(){const n=this;n.next_in_index=0,n.next_out_index=0,n.avail_in=0,n.total_in=0,n.avail_out=0,n.total_out=0}mo.prototype={deflateInit:function(n,e){const t=this;return t.dstate=new od,e||(e=Vn),t.dstate.deflateInit(t,n,e)},deflate:function(n){const e=this;return e.dstate?e.dstate.deflate(e,n):ct},deflateEnd:function(){const n=this;if(!n.dstate)return ct;const e=n.dstate.deflateEnd();return n.dstate=null,e},deflateParams:function(n,e){const t=this;return t.dstate?t.dstate.deflateParams(t,n,e):ct},deflateSetDictionary:function(n,e){const t=this;return t.dstate?t.dstate.deflateSetDictionary(t,n,e):ct},read_buf:function(n,e,t){const r=this;let i=r.avail_in;return i>t&&(i=t),i===0?0:(r.avail_in-=i,n.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),e),r.next_in_index+=i,r.total_in+=i,i)},flush_pending:function(){const n=this;let e=n.dstate.pending;e>n.avail_out&&(e=n.avail_out),e!==0&&(n.next_out.set(n.dstate.pending_buf.subarray(n.dstate.pending_out,n.dstate.pending_out+e),n.next_out_index),n.next_out_index+=e,n.dstate.pending_out+=e,n.total_out+=e,n.avail_out-=e,n.dstate.pending-=e,n.dstate.pending===0&&(n.dstate.pending_out=0))}};function ld(n){const e=this,t=new mo,r=cd(n&&n.chunkSize?n.chunkSize:64*1024),i=hn,s=new Uint8Array(r);let a=n?n.level:Cr;typeof a>"u"&&(a=Cr),t.deflateInit(a),t.next_out=s,e.append=function(l,o){let c,d,f=0,u=0,m=0;const g=[];if(l.length){t.next_in_index=0,t.next_in=l,t.avail_in=l.length;do{if(t.next_out_index=0,t.avail_out=r,c=t.deflate(i),c!=ot)throw new Error("deflating: "+t.msg);t.next_out_index&&(t.next_out_index==r?g.push(new Uint8Array(s)):g.push(s.slice(0,t.next_out_index))),m+=t.next_out_index,o&&t.next_in_index>0&&t.next_in_index!=f&&(o(t.next_in_index),f=t.next_in_index)}while(t.avail_in>0||t.avail_out===0);return g.length>1?(d=new Uint8Array(m),g.forEach(function(h){d.set(h,u),u+=h.length})):d=g[0]||new Uint8Array(0),d}},e.flush=function(){let l,o,c=0,d=0;const f=[];do{if(t.next_out_index=0,t.avail_out=r,l=t.deflate(Re),l!=ho&&l!=ot)throw new Error("deflating: "+t.msg);r-t.avail_out>0&&f.push(s.slice(0,t.next_out_index)),d+=t.next_out_index}while(t.avail_in>0||t.avail_out===0);return t.deflateEnd(),o=new Uint8Array(d),f.forEach(function(u){o.set(u,c),c+=u.length}),o}}function cd(n){return n+5*(Math.floor(n/16383)+1)}const dd=15,Y=0,Ct=1,fd=2,Le=-2,ae=-3,Is=-4,It=-5,He=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],go=1440,ud=0,hd=4,pd=9,md=5,gd=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],wd=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],bd=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],xd=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],vd=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],yd=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Mt=15;function _i(){const n=this;let e,t,r,i,s,a;function l(c,d,f,u,m,g,h,p,w,x,b){let y,v,_,k,T,C,S,A,R,F,V,O,L,j,q;F=0,T=f;do r[c[d+F]]++,F++,T--;while(T!==0);if(r[0]==f)return h[0]=-1,p[0]=0,Y;for(A=p[0],C=1;C<=Mt&&r[C]===0;C++);for(S=C,A<C&&(A=C),T=Mt;T!==0&&r[T]===0;T--);for(_=T,A>T&&(A=T),p[0]=A,j=1<<C;C<T;C++,j<<=1)if((j-=r[C])<0)return ae;if((j-=r[T])<0)return ae;for(r[T]+=j,a[1]=C=0,F=1,L=2;--T!==0;)a[L]=C+=r[F],L++,F++;T=0,F=0;do(C=c[d+F])!==0&&(b[a[C]++]=T),F++;while(++T<f);for(f=a[_],a[0]=T=0,F=0,k=-1,O=-A,s[0]=0,V=0,q=0;S<=_;S++)for(y=r[S];y--!==0;){for(;S>O+A;){if(k++,O+=A,q=_-O,q=q>A?A:q,(v=1<<(C=S-O))>y+1&&(v-=y+1,L=S,C<q))for(;++C<q&&!((v<<=1)<=r[++L]);)v-=r[L];if(q=1<<C,x[0]+q>go)return ae;s[k]=V=x[0],x[0]+=q,k!==0?(a[k]=T,i[0]=C,i[1]=A,C=T>>>O-A,i[2]=V-s[k-1]-C,w.set(i,(s[k-1]+C)*3)):h[0]=V}for(i[1]=S-O,F>=f?i[0]=128+64:b[F]<u?(i[0]=b[F]<256?0:32+64,i[2]=b[F++]):(i[0]=g[b[F]-u]+16+64,i[2]=m[b[F++]-u]),v=1<<S-O,C=T>>>O;C<q;C+=v)w.set(i,(V+C)*3);for(C=1<<S-1;T&C;C>>>=1)T^=C;for(T^=C,R=(1<<O)-1;(T&R)!=a[k];)k--,O-=A,R=(1<<O)-1}return j!==0&&_!=1?It:Y}function o(c){let d;for(e||(e=[],t=[],r=new Int32Array(Mt+1),i=[],s=new Int32Array(Mt),a=new Int32Array(Mt+1)),t.length<c&&(t=[]),d=0;d<c;d++)t[d]=0;for(d=0;d<Mt+1;d++)r[d]=0;for(d=0;d<3;d++)i[d]=0;s.set(r.subarray(0,Mt),0),a.set(r.subarray(0,Mt+1),0)}n.inflate_trees_bits=function(c,d,f,u,m){let g;return o(19),e[0]=0,g=l(c,0,19,19,null,null,f,d,u,e,t),g==ae?m.msg="oversubscribed dynamic bit lengths tree":(g==It||d[0]===0)&&(m.msg="incomplete dynamic bit lengths tree",g=ae),g},n.inflate_trees_dynamic=function(c,d,f,u,m,g,h,p,w){let x;return o(288),e[0]=0,x=l(f,0,c,257,bd,xd,g,u,p,e,t),x!=Y||u[0]===0?(x==ae?w.msg="oversubscribed literal/length tree":x!=Is&&(w.msg="incomplete literal/length tree",x=ae),x):(o(288),x=l(f,c,d,0,vd,yd,h,m,p,e,t),x!=Y||m[0]===0&&c>257?(x==ae?w.msg="oversubscribed distance tree":x==It?(w.msg="incomplete distance tree",x=ae):x!=Is&&(w.msg="empty distance tree with lengths",x=ae),x):Y)}}_i.inflate_trees_fixed=function(n,e,t,r){return n[0]=pd,e[0]=md,t[0]=gd,r[0]=wd,Y};const ar=0,Bs=1,Ps=2,Ns=3,Fs=4,Os=5,Rs=6,ti=7,Ds=8,or=9;function _d(){const n=this;let e,t=0,r,i=0,s=0,a=0,l=0,o=0,c=0,d=0,f,u=0,m,g=0;function h(p,w,x,b,y,v,_,k){let T,C,S,A,R,F,V,O,L,j,q,ve,U,Ee,Z,X;V=k.next_in_index,O=k.avail_in,R=_.bitb,F=_.bitk,L=_.write,j=L<_.read?_.read-L-1:_.end-L,q=He[p],ve=He[w];do{for(;F<20;)O--,R|=(k.read_byte(V++)&255)<<F,F+=8;if(T=R&q,C=x,S=b,X=(S+T)*3,(A=C[X])===0){R>>=C[X+1],F-=C[X+1],_.win[L++]=C[X+2],j--;continue}do{if(R>>=C[X+1],F-=C[X+1],A&16){for(A&=15,U=C[X+2]+(R&He[A]),R>>=A,F-=A;F<15;)O--,R|=(k.read_byte(V++)&255)<<F,F+=8;T=R&ve,C=y,S=v,X=(S+T)*3,A=C[X];do if(R>>=C[X+1],F-=C[X+1],A&16){for(A&=15;F<A;)O--,R|=(k.read_byte(V++)&255)<<F,F+=8;if(Ee=C[X+2]+(R&He[A]),R>>=A,F-=A,j-=U,L>=Ee)Z=L-Ee,L-Z>0&&2>L-Z?(_.win[L++]=_.win[Z++],_.win[L++]=_.win[Z++],U-=2):(_.win.set(_.win.subarray(Z,Z+2),L),L+=2,Z+=2,U-=2);else{Z=L-Ee;do Z+=_.end;while(Z<0);if(A=_.end-Z,U>A){if(U-=A,L-Z>0&&A>L-Z)do _.win[L++]=_.win[Z++];while(--A!==0);else _.win.set(_.win.subarray(Z,Z+A),L),L+=A,Z+=A,A=0;Z=0}}if(L-Z>0&&U>L-Z)do _.win[L++]=_.win[Z++];while(--U!==0);else _.win.set(_.win.subarray(Z,Z+U),L),L+=U,Z+=U,U=0;break}else if(!(A&64))T+=C[X+2],T+=R&He[A],X=(S+T)*3,A=C[X];else return k.msg="invalid distance code",U=k.avail_in-O,U=F>>3<U?F>>3:U,O+=U,V-=U,F-=U<<3,_.bitb=R,_.bitk=F,k.avail_in=O,k.total_in+=V-k.next_in_index,k.next_in_index=V,_.write=L,ae;while(!0);break}if(A&64)return A&32?(U=k.avail_in-O,U=F>>3<U?F>>3:U,O+=U,V-=U,F-=U<<3,_.bitb=R,_.bitk=F,k.avail_in=O,k.total_in+=V-k.next_in_index,k.next_in_index=V,_.write=L,Ct):(k.msg="invalid literal/length code",U=k.avail_in-O,U=F>>3<U?F>>3:U,O+=U,V-=U,F-=U<<3,_.bitb=R,_.bitk=F,k.avail_in=O,k.total_in+=V-k.next_in_index,k.next_in_index=V,_.write=L,ae);if(T+=C[X+2],T+=R&He[A],X=(S+T)*3,(A=C[X])===0){R>>=C[X+1],F-=C[X+1],_.win[L++]=C[X+2],j--;break}}while(!0)}while(j>=258&&O>=10);return U=k.avail_in-O,U=F>>3<U?F>>3:U,O+=U,V-=U,F-=U<<3,_.bitb=R,_.bitk=F,k.avail_in=O,k.total_in+=V-k.next_in_index,k.next_in_index=V,_.write=L,Y}n.init=function(p,w,x,b,y,v){e=ar,c=p,d=w,f=x,u=b,m=y,g=v,r=null},n.proc=function(p,w,x){let b,y,v,_=0,k=0,T=0,C,S,A,R;for(T=w.next_in_index,C=w.avail_in,_=p.bitb,k=p.bitk,S=p.write,A=S<p.read?p.read-S-1:p.end-S;;)switch(e){case ar:if(A>=258&&C>=10&&(p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,x=h(c,d,f,u,m,g,p,w),T=w.next_in_index,C=w.avail_in,_=p.bitb,k=p.bitk,S=p.write,A=S<p.read?p.read-S-1:p.end-S,x!=Y)){e=x==Ct?ti:or;break}s=c,r=f,i=u,e=Bs;case Bs:for(b=s;k<b;){if(C!==0)x=Y;else return p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);C--,_|=(w.read_byte(T++)&255)<<k,k+=8}if(y=(i+(_&He[b]))*3,_>>>=r[y+1],k-=r[y+1],v=r[y],v===0){a=r[y+2],e=Rs;break}if(v&16){l=v&15,t=r[y+2],e=Ps;break}if(!(v&64)){s=v,i=y/3+r[y+2];break}if(v&32){e=ti;break}return e=or,w.msg="invalid literal/length code",x=ae,p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);case Ps:for(b=l;k<b;){if(C!==0)x=Y;else return p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);C--,_|=(w.read_byte(T++)&255)<<k,k+=8}t+=_&He[b],_>>=b,k-=b,s=d,r=m,i=g,e=Ns;case Ns:for(b=s;k<b;){if(C!==0)x=Y;else return p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);C--,_|=(w.read_byte(T++)&255)<<k,k+=8}if(y=(i+(_&He[b]))*3,_>>=r[y+1],k-=r[y+1],v=r[y],v&16){l=v&15,o=r[y+2],e=Fs;break}if(!(v&64)){s=v,i=y/3+r[y+2];break}return e=or,w.msg="invalid distance code",x=ae,p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);case Fs:for(b=l;k<b;){if(C!==0)x=Y;else return p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);C--,_|=(w.read_byte(T++)&255)<<k,k+=8}o+=_&He[b],_>>=b,k-=b,e=Os;case Os:for(R=S-o;R<0;)R+=p.end;for(;t!==0;){if(A===0&&(S==p.end&&p.read!==0&&(S=0,A=S<p.read?p.read-S-1:p.end-S),A===0&&(p.write=S,x=p.inflate_flush(w,x),S=p.write,A=S<p.read?p.read-S-1:p.end-S,S==p.end&&p.read!==0&&(S=0,A=S<p.read?p.read-S-1:p.end-S),A===0)))return p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);p.win[S++]=p.win[R++],A--,R==p.end&&(R=0),t--}e=ar;break;case Rs:if(A===0&&(S==p.end&&p.read!==0&&(S=0,A=S<p.read?p.read-S-1:p.end-S),A===0&&(p.write=S,x=p.inflate_flush(w,x),S=p.write,A=S<p.read?p.read-S-1:p.end-S,S==p.end&&p.read!==0&&(S=0,A=S<p.read?p.read-S-1:p.end-S),A===0)))return p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);x=Y,p.win[S++]=a,A--,e=ar;break;case ti:if(k>7&&(k-=8,C++,T--),p.write=S,x=p.inflate_flush(w,x),S=p.write,A=S<p.read?p.read-S-1:p.end-S,p.read!=p.write)return p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);e=Ds;case Ds:return x=Ct,p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);case or:return x=ae,p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x);default:return x=Le,p.bitb=_,p.bitk=k,w.avail_in=C,w.total_in+=T-w.next_in_index,w.next_in_index=T,p.write=S,p.inflate_flush(w,x)}},n.free=function(){}}const Ms=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],un=0,ni=1,Ls=2,Us=3,Vs=4,$s=5,lr=6,cr=7,js=8,Jt=9;function kd(n,e){const t=this;let r=un,i=0,s=0,a=0,l;const o=[0],c=[0],d=new _d;let f=0,u=new Int32Array(go*3);const m=0,g=new _i;t.bitk=0,t.bitb=0,t.win=new Uint8Array(e),t.end=e,t.read=0,t.write=0,t.reset=function(h,p){p&&(p[0]=m),r==lr&&d.free(h),r=un,t.bitk=0,t.bitb=0,t.read=t.write=0},t.reset(n,null),t.inflate_flush=function(h,p){let w,x,b;return x=h.next_out_index,b=t.read,w=(b<=t.write?t.write:t.end)-b,w>h.avail_out&&(w=h.avail_out),w!==0&&p==It&&(p=Y),h.avail_out-=w,h.total_out+=w,h.next_out.set(t.win.subarray(b,b+w),x),x+=w,b+=w,b==t.end&&(b=0,t.write==t.end&&(t.write=0),w=t.write-b,w>h.avail_out&&(w=h.avail_out),w!==0&&p==It&&(p=Y),h.avail_out-=w,h.total_out+=w,h.next_out.set(t.win.subarray(b,b+w),x),x+=w,b+=w),h.next_out_index=x,t.read=b,p},t.proc=function(h,p){let w,x,b,y,v,_,k,T;for(y=h.next_in_index,v=h.avail_in,x=t.bitb,b=t.bitk,_=t.write,k=_<t.read?t.read-_-1:t.end-_;;){let C,S,A,R,F,V,O,L;switch(r){case un:for(;b<3;){if(v!==0)p=Y;else return t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);v--,x|=(h.read_byte(y++)&255)<<b,b+=8}switch(w=x&7,f=w&1,w>>>1){case 0:x>>>=3,b-=3,w=b&7,x>>>=w,b-=w,r=ni;break;case 1:C=[],S=[],A=[[]],R=[[]],_i.inflate_trees_fixed(C,S,A,R),d.init(C[0],S[0],A[0],0,R[0],0),x>>>=3,b-=3,r=lr;break;case 2:x>>>=3,b-=3,r=Us;break;case 3:return x>>>=3,b-=3,r=Jt,h.msg="invalid block type",p=ae,t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p)}break;case ni:for(;b<32;){if(v!==0)p=Y;else return t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);v--,x|=(h.read_byte(y++)&255)<<b,b+=8}if((~x>>>16&65535)!=(x&65535))return r=Jt,h.msg="invalid stored block lengths",p=ae,t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);i=x&65535,x=b=0,r=i!==0?Ls:f!==0?cr:un;break;case Ls:if(v===0||k===0&&(_==t.end&&t.read!==0&&(_=0,k=_<t.read?t.read-_-1:t.end-_),k===0&&(t.write=_,p=t.inflate_flush(h,p),_=t.write,k=_<t.read?t.read-_-1:t.end-_,_==t.end&&t.read!==0&&(_=0,k=_<t.read?t.read-_-1:t.end-_),k===0)))return t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);if(p=Y,w=i,w>v&&(w=v),w>k&&(w=k),t.win.set(h.read_buf(y,w),_),y+=w,v-=w,_+=w,k-=w,(i-=w)!==0)break;r=f!==0?cr:un;break;case Us:for(;b<14;){if(v!==0)p=Y;else return t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);v--,x|=(h.read_byte(y++)&255)<<b,b+=8}if(s=w=x&16383,(w&31)>29||(w>>5&31)>29)return r=Jt,h.msg="too many length or distance symbols",p=ae,t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);if(w=258+(w&31)+(w>>5&31),!l||l.length<w)l=[];else for(T=0;T<w;T++)l[T]=0;x>>>=14,b-=14,a=0,r=Vs;case Vs:for(;a<4+(s>>>10);){for(;b<3;){if(v!==0)p=Y;else return t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);v--,x|=(h.read_byte(y++)&255)<<b,b+=8}l[Ms[a++]]=x&7,x>>>=3,b-=3}for(;a<19;)l[Ms[a++]]=0;if(o[0]=7,w=g.inflate_trees_bits(l,o,c,u,h),w!=Y)return p=w,p==ae&&(l=null,r=Jt),t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);a=0,r=$s;case $s:for(;w=s,!(a>=258+(w&31)+(w>>5&31));){let j,q;for(w=o[0];b<w;){if(v!==0)p=Y;else return t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);v--,x|=(h.read_byte(y++)&255)<<b,b+=8}if(w=u[(c[0]+(x&He[w]))*3+1],q=u[(c[0]+(x&He[w]))*3+2],q<16)x>>>=w,b-=w,l[a++]=q;else{for(T=q==18?7:q-14,j=q==18?11:3;b<w+T;){if(v!==0)p=Y;else return t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);v--,x|=(h.read_byte(y++)&255)<<b,b+=8}if(x>>>=w,b-=w,j+=x&He[T],x>>>=T,b-=T,T=a,w=s,T+j>258+(w&31)+(w>>5&31)||q==16&&T<1)return l=null,r=Jt,h.msg="invalid bit length repeat",p=ae,t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);q=q==16?l[T-1]:0;do l[T++]=q;while(--j!==0);a=T}}if(c[0]=-1,F=[],V=[],O=[],L=[],F[0]=9,V[0]=6,w=s,w=g.inflate_trees_dynamic(257+(w&31),1+(w>>5&31),l,F,V,O,L,u,h),w!=Y)return w==ae&&(l=null,r=Jt),p=w,t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);d.init(F[0],V[0],u,O[0],u,L[0]),r=lr;case lr:if(t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,(p=d.proc(t,h,p))!=Ct)return t.inflate_flush(h,p);if(p=Y,d.free(h),y=h.next_in_index,v=h.avail_in,x=t.bitb,b=t.bitk,_=t.write,k=_<t.read?t.read-_-1:t.end-_,f===0){r=un;break}r=cr;case cr:if(t.write=_,p=t.inflate_flush(h,p),_=t.write,k=_<t.read?t.read-_-1:t.end-_,t.read!=t.write)return t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);r=js;case js:return p=Ct,t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);case Jt:return p=ae,t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p);default:return p=Le,t.bitb=x,t.bitk=b,h.avail_in=v,h.total_in+=y-h.next_in_index,h.next_in_index=y,t.write=_,t.inflate_flush(h,p)}}},t.free=function(h){t.reset(h,null),t.win=null,u=null},t.set_dictionary=function(h,p,w){t.win.set(h.subarray(p,p+w),0),t.read=t.write=w},t.sync_point=function(){return r==ni?1:0}}const Ed=32,Td=8,Sd=0,Ws=1,Hs=2,qs=3,Zs=4,Gs=5,ri=6,An=7,Xs=12,Lt=13,Ad=[0,0,255,255];function Cd(){const n=this;n.mode=0,n.method=0,n.was=[0],n.need=0,n.marker=0,n.wbits=0;function e(t){return!t||!t.istate?Le:(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=An,t.istate.blocks.reset(t,null),Y)}n.inflateEnd=function(t){return n.blocks&&n.blocks.free(t),n.blocks=null,Y},n.inflateInit=function(t,r){return t.msg=null,n.blocks=null,r<8||r>15?(n.inflateEnd(t),Le):(n.wbits=r,t.istate.blocks=new kd(t,1<<r),e(t),Y)},n.inflate=function(t,r){let i,s;if(!t||!t.istate||!t.next_in)return Le;const a=t.istate;for(r=r==hd?It:Y,i=It;;)switch(a.mode){case Sd:if(t.avail_in===0)return i;if(i=r,t.avail_in--,t.total_in++,((a.method=t.read_byte(t.next_in_index++))&15)!=Td){a.mode=Lt,t.msg="unknown compression method",a.marker=5;break}if((a.method>>4)+8>a.wbits){a.mode=Lt,t.msg="invalid win size",a.marker=5;break}a.mode=Ws;case Ws:if(t.avail_in===0)return i;if(i=r,t.avail_in--,t.total_in++,s=t.read_byte(t.next_in_index++)&255,((a.method<<8)+s)%31!==0){a.mode=Lt,t.msg="incorrect header check",a.marker=5;break}if(!(s&Ed)){a.mode=An;break}a.mode=Hs;case Hs:if(t.avail_in===0)return i;i=r,t.avail_in--,t.total_in++,a.need=(t.read_byte(t.next_in_index++)&255)<<24&4278190080,a.mode=qs;case qs:if(t.avail_in===0)return i;i=r,t.avail_in--,t.total_in++,a.need+=(t.read_byte(t.next_in_index++)&255)<<16&16711680,a.mode=Zs;case Zs:if(t.avail_in===0)return i;i=r,t.avail_in--,t.total_in++,a.need+=(t.read_byte(t.next_in_index++)&255)<<8&65280,a.mode=Gs;case Gs:return t.avail_in===0?i:(i=r,t.avail_in--,t.total_in++,a.need+=t.read_byte(t.next_in_index++)&255,a.mode=ri,fd);case ri:return a.mode=Lt,t.msg="need dictionary",a.marker=0,Le;case An:if(i=a.blocks.proc(t,i),i==ae){a.mode=Lt,a.marker=0;break}if(i==Y&&(i=r),i!=Ct)return i;i=r,a.blocks.reset(t,a.was),a.mode=Xs;case Xs:return t.avail_in=0,Ct;case Lt:return ae;default:return Le}},n.inflateSetDictionary=function(t,r,i){let s=0,a=i;if(!t||!t.istate||t.istate.mode!=ri)return Le;const l=t.istate;return a>=1<<l.wbits&&(a=(1<<l.wbits)-1,s=i-a),l.blocks.set_dictionary(r,s,a),l.mode=An,Y},n.inflateSync=function(t){let r,i,s,a,l;if(!t||!t.istate)return Le;const o=t.istate;if(o.mode!=Lt&&(o.mode=Lt,o.marker=0),(r=t.avail_in)===0)return It;for(i=t.next_in_index,s=o.marker;r!==0&&s<4;)t.read_byte(i)==Ad[s]?s++:t.read_byte(i)!==0?s=0:s=4-s,i++,r--;return t.total_in+=i-t.next_in_index,t.next_in_index=i,t.avail_in=r,o.marker=s,s!=4?ae:(a=t.total_in,l=t.total_out,e(t),t.total_in=a,t.total_out=l,o.mode=An,Y)},n.inflateSyncPoint=function(t){return!t||!t.istate||!t.istate.blocks?Le:t.istate.blocks.sync_point()}}function wo(){}wo.prototype={inflateInit:function(n){const e=this;return e.istate=new Cd,n||(n=dd),e.istate.inflateInit(e,n)},inflate:function(n){const e=this;return e.istate?e.istate.inflate(e,n):Le},inflateEnd:function(){const n=this;if(!n.istate)return Le;const e=n.istate.inflateEnd(n);return n.istate=null,e},inflateSync:function(){const n=this;return n.istate?n.istate.inflateSync(n):Le},inflateSetDictionary:function(n,e){const t=this;return t.istate?t.istate.inflateSetDictionary(t,n,e):Le},read_byte:function(n){return this.next_in[n]},read_buf:function(n,e){return this.next_in.subarray(n,n+e)}};function Id(n){const e=this,t=new wo,r=n&&n.chunkSize?Math.floor(n.chunkSize*2):128*1024,i=ud,s=new Uint8Array(r);let a=!1;t.inflateInit(),t.next_out=s,e.append=function(l,o){const c=[];let d,f,u=0,m=0,g=0;if(l.length!==0){t.next_in_index=0,t.next_in=l,t.avail_in=l.length;do{if(t.next_out_index=0,t.avail_out=r,t.avail_in===0&&!a&&(t.next_in_index=0,a=!0),d=t.inflate(i),a&&d===It){if(t.avail_in!==0)throw new Error("inflating: bad input")}else if(d!==Y&&d!==Ct)throw new Error("inflating: "+t.msg);if((a||d===Ct)&&t.avail_in===l.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===r?c.push(new Uint8Array(s)):c.push(s.slice(0,t.next_out_index))),g+=t.next_out_index,o&&t.next_in_index>0&&t.next_in_index!=u&&(o(t.next_in_index),u=t.next_in_index)}while(t.avail_in>0||t.avail_out===0);return c.length>1?(f=new Uint8Array(g),c.forEach(function(h){f.set(h,m),m+=h.length})):f=c[0]||new Uint8Array(0),f}},e.flush=function(){t.inflateEnd()}}const Bd={chunkSize:512*1024,maxWorkers:typeof navigator<"u"&&navigator.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},De=Object.assign({},Bd);function bo(){return De}function Mr(n){if(n.baseURL!==void 0&&(De.baseURL=n.baseURL),n.chunkSize!==void 0&&(De.chunkSize=n.chunkSize),n.maxWorkers!==void 0&&(De.maxWorkers=n.maxWorkers),n.terminateWorkerTimeout!==void 0&&(De.terminateWorkerTimeout=n.terminateWorkerTimeout),n.useWebWorkers!==void 0&&(De.useWebWorkers=n.useWebWorkers),n.Deflate!==void 0&&(De.Deflate=n.Deflate),n.Inflate!==void 0&&(De.Inflate=n.Inflate),n.workerScripts!==void 0){if(n.workerScripts.deflate){if(!Array.isArray(n.workerScripts.deflate))throw new Error("workerScripts.deflate must be an array");De.workerScripts||(De.workerScripts={}),De.workerScripts.deflate=n.workerScripts.deflate}if(n.workerScripts.inflate){if(!Array.isArray(n.workerScripts.inflate))throw new Error("workerScripts.inflate must be an array");De.workerScripts||(De.workerScripts={}),De.workerScripts.inflate=n.workerScripts.inflate}}}const Cn={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin",cap:["cap","pcap"],"cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",javascript:"js",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":"odm","vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-debian-package":["deb","udeb"],"x-director":["dcr","dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-koan":["skp","skd","skt","skm"],"x-kpresenter":["kpr","kpt"],"x-kword":["kwd","kwt"],"x-latex":"latex","x-lha":"lha","x-lyx":"lyx","x-lzh":"lzh","x-lzx":"lzx","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-ms-wmd":"wmd","x-ms-wmz":"wmz","x-msdos-program":["com","exe","bat","dll"],"x-msi":"msi","x-netcdf":["nc","cdf"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":"rpm","x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tcl":"tcl","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-troff":["t","tr","roff"],"x-troff-man":"man","x-troff-me":"me","x-troff-ms":"ms","x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix",json:"json","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":"mathml",mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","x-msdownload":["exe","dll","com","bat","msi"],"x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tads":"gam","x-tex":"tex","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-compressed":"tgz","x-gzip":"gz","x-perfmon":["pma","pmc","pml","pmr","pmw"],"x-pkcs7-mime":["p7c","p7m"],"ynd.ms-pkipko":"pko"},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":["aif","aiff","aifc"],"x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2","x-wav":"wav",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":["mmd","mmod"],"x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":["sd","sdf"],"x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","mpc","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":["val","aso"],"x-pdb":["pdb","ent"],"x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-photoshop":"psd","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",pipeg:"jfif"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"],"x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:["tm","ts"],"tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":["diff","patch"],"x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas"],"x-pcs-gcd":"gcd","x-perl":["pl","pm"],"x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","cc","cxx","cpp","h","hh","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt"},video:{avif:".avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","vrml","wrl","flr","wrz","xaf","xof"]}};(()=>{const n={};for(const e in Cn)if(Cn.hasOwnProperty(e)){for(const t in Cn[e])if(Cn[e].hasOwnProperty(t)){const r=Cn[e][t];if(typeof r=="string")n[r]=e+"/"+t;else for(let i=0;i<r.length;i++)n[r[i]]=e+"/"+t}}return n})();const xo=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=e>>>1^3988292384:e=e>>>1;xo[n]=e}class $n{constructor(e){this.crc=e||-1}append(e){let t=this.crc|0;for(let r=0,i=e.length|0;r<i;r++)t=t>>>8^xo[(t^e[r])&255];this.crc=t}get(){return~this.crc}}function ki(n){if(typeof TextEncoder>"u"){n=unescape(encodeURIComponent(n));const e=new Uint8Array(n.length);for(let t=0;t<e.length;t++)e[t]=n.charCodeAt(t);return e}else return new TextEncoder().encode(n)}const Fe={concat(n,e){if(n.length===0||e.length===0)return n.concat(e);const t=n[n.length-1],r=Fe.getPartial(t);return r===32?n.concat(e):Fe._shiftRight(e,r,t|0,n.slice(0,n.length-1))},bitLength(n){const e=n.length;if(e===0)return 0;const t=n[e-1];return(e-1)*32+Fe.getPartial(t)},clamp(n,e){if(n.length*32<e)return n;n=n.slice(0,Math.ceil(e/32));const t=n.length;return e=e&31,t>0&&e&&(n[t-1]=Fe.partial(e,n[t-1]&2147483648>>e-1,1)),n},partial(n,e,t){return n===32?e:(t?e|0:e<<32-n)+n*1099511627776},getPartial(n){return Math.round(n/1099511627776)||32},_shiftRight(n,e,t,r){for(r===void 0&&(r=[]);e>=32;e-=32)r.push(t),t=0;if(e===0)return r.concat(n);for(let a=0;a<n.length;a++)r.push(t|n[a]>>>e),t=n[a]<<32-e;const i=n.length?n[n.length-1]:0,s=Fe.getPartial(i);return r.push(Fe.partial(e+s&31,e+s>32?t:r.pop(),1)),r}},Ir={bytes:{fromBits(n){const t=Fe.bitLength(n)/8,r=new Uint8Array(t);let i;for(let s=0;s<t;s++)s&3||(i=n[s/4]),r[s]=i>>>24,i<<=8;return r},toBits(n){const e=[];let t,r=0;for(t=0;t<n.length;t++)r=r<<8|n[t],(t&3)===3&&(e.push(r),r=0);return t&3&&e.push(Fe.partial(8*(t&3),r)),e}}},Gi={};Gi.sha1=function(n){n?(this._h=n._h.slice(0),this._buffer=n._buffer.slice(0),this._length=n._length):this.reset()};Gi.sha1.prototype={blockSize:512,reset:function(){const n=this;return n._h=this._init.slice(0),n._buffer=[],n._length=0,n},update:function(n){const e=this;typeof n=="string"&&(n=Ir.utf8String.toBits(n));const t=e._buffer=Fe.concat(e._buffer,n),r=e._length,i=e._length=r+Fe.bitLength(n);if(i>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const s=new Uint32Array(t);let a=0;for(let l=e.blockSize+r-(e.blockSize+r&e.blockSize-1);l<=i;l+=e.blockSize)e._block(s.subarray(16*a,16*(a+1))),a+=1;return t.splice(0,16*a),e},finalize:function(){const n=this;let e=n._buffer;const t=n._h;e=Fe.concat(e,[Fe.partial(1,1)]);for(let r=e.length+2;r&15;r++)e.push(0);for(e.push(Math.floor(n._length/4294967296)),e.push(n._length|0);e.length;)n._block(e.splice(0,16));return n.reset(),t},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(n,e,t,r){if(n<=19)return e&t|~e&r;if(n<=39)return e^t^r;if(n<=59)return e&t|e&r|t&r;if(n<=79)return e^t^r},_S:function(n,e){return e<<n|e>>>32-n},_block:function(n){const e=this,t=e._h,r=Array(80);for(let c=0;c<16;c++)r[c]=n[c];let i=t[0],s=t[1],a=t[2],l=t[3],o=t[4];for(let c=0;c<=79;c++){c>=16&&(r[c]=e._S(1,r[c-3]^r[c-8]^r[c-14]^r[c-16]));const d=e._S(5,i)+e._f(c,s,a,l)+o+r[c]+e._key[Math.floor(c/20)]|0;o=l,l=a,a=e._S(30,s),s=i,i=d}t[0]=t[0]+i|0,t[1]=t[1]+s|0,t[2]=t[2]+a|0,t[3]=t[3]+l|0,t[4]=t[4]+o|0}};const vo={};vo.aes=class{constructor(n){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const t=e._tables[0][4],r=e._tables[1],i=n.length;let s,a,l,o=1;if(i!==4&&i!==6&&i!==8)throw new Error("invalid aes key size");for(e._key=[a=n.slice(0),l=[]],s=i;s<4*i+28;s++){let c=a[s-1];(s%i===0||i===8&&s%i===4)&&(c=t[c>>>24]<<24^t[c>>16&255]<<16^t[c>>8&255]<<8^t[c&255],s%i===0&&(c=c<<8^c>>>24^o<<24,o=o<<1^(o>>7)*283)),a[s]=a[s-i]^c}for(let c=0;s;c++,s--){const d=a[c&3?s:s-4];s<=4||c<4?l[c]=d:l[c]=r[0][t[d>>>24]]^r[1][t[d>>16&255]]^r[2][t[d>>8&255]]^r[3][t[d&255]]}}encrypt(n){return this._crypt(n,0)}decrypt(n){return this._crypt(n,1)}_precompute(){const n=this._tables[0],e=this._tables[1],t=n[4],r=e[4],i=[],s=[];let a,l,o,c;for(let d=0;d<256;d++)s[(i[d]=d<<1^(d>>7)*283)^d]=d;for(let d=a=0;!t[d];d^=l||1,a=s[a]||1){let f=a^a<<1^a<<2^a<<3^a<<4;f=f>>8^f&255^99,t[d]=f,r[f]=d,c=i[o=i[l=i[d]]];let u=c*16843009^o*65537^l*257^d*16843008,m=i[f]*257^f*16843008;for(let g=0;g<4;g++)n[g][d]=m=m<<24^m>>>8,e[g][f]=u=u<<24^u>>>8}for(let d=0;d<5;d++)n[d]=n[d].slice(0),e[d]=e[d].slice(0)}_crypt(n,e){if(n.length!==4)throw new Error("invalid aes block size");const t=this._key[e],r=t.length/4-2,i=[0,0,0,0],s=this._tables[e],a=s[0],l=s[1],o=s[2],c=s[3],d=s[4];let f=n[0]^t[0],u=n[e?3:1]^t[1],m=n[2]^t[2],g=n[e?1:3]^t[3],h=4,p,w,x;for(let b=0;b<r;b++)p=a[f>>>24]^l[u>>16&255]^o[m>>8&255]^c[g&255]^t[h],w=a[u>>>24]^l[m>>16&255]^o[g>>8&255]^c[f&255]^t[h+1],x=a[m>>>24]^l[g>>16&255]^o[f>>8&255]^c[u&255]^t[h+2],g=a[g>>>24]^l[f>>16&255]^o[u>>8&255]^c[m&255]^t[h+3],h+=4,f=p,u=w,m=x;for(let b=0;b<4;b++)i[e?3&-b:b]=d[f>>>24]<<24^d[u>>16&255]<<16^d[m>>8&255]<<8^d[g&255]^t[h++],p=f,f=u,u=m,m=g,g=p;return i}};const Pd={getRandomValues(n){const e=new Uint32Array(n.buffer),t=r=>{let i=987654321;const s=4294967295;return function(){return i=36969*(i&65535)+(i>>16)&s,r=18e3*(r&65535)+(r>>16)&s,(((i<<16)+r&s)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let r=0,i;r<n.length;r+=4){const s=t((i||Math.random())*4294967296);i=s()*987654071,e[r/4]=s()*4294967296|0}return n}},yo={};yo.ctrGladman=class{constructor(n,e){this._prf=n,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(n){return this.calculate(this._prf,n,this._iv)}incWord(n){if((n>>24&255)===255){let e=n>>16&255,t=n>>8&255,r=n&255;e===255?(e=0,t===255?(t=0,r===255?r=0:++r):++t):++e,n=0,n+=e<<16,n+=t<<8,n+=r}else n+=1<<24;return n}incCounter(n){(n[0]=this.incWord(n[0]))===0&&(n[1]=this.incWord(n[1]))}calculate(n,e,t){let r;if(!(r=e.length))return[];const i=Fe.bitLength(e);for(let s=0;s<r;s+=4){this.incCounter(t);const a=n.encrypt(t);e[s]^=a[0],e[s+1]^=a[1],e[s+2]^=a[2],e[s+3]^=a[3]}return Fe.clamp(e,i)}};const Xn={importKey(n){return new Xn.hmacSha1(Ir.bytes.toBits(n))},pbkdf2(n,e,t,r){if(t=t||1e4,r<0||t<0)throw new Error("invalid params to pbkdf2");const i=(r>>5)+1<<2;let s,a,l,o,c;const d=new ArrayBuffer(i),f=new DataView(d);let u=0;const m=Fe;for(e=Ir.bytes.toBits(e),c=1;u<(i||1);c++){for(s=a=n.encrypt(m.concat(e,[c])),l=1;l<t;l++)for(a=n.encrypt(a),o=0;o<a.length;o++)s[o]^=a[o];for(l=0;u<(i||1)&&l<s.length;l++)f.setInt32(u,s[l]),u+=4}return d.slice(0,r/8)}};Xn.hmacSha1=class{constructor(n){const e=this,t=e._hash=Gi.sha1,r=[[],[]],i=t.prototype.blockSize/32;e._baseHash=[new t,new t],n.length>i&&(n=t.hash(n));for(let s=0;s<i;s++)r[0][s]=n[s]^909522486,r[1][s]=n[s]^1549556828;e._baseHash[0].update(r[0]),e._baseHash[1].update(r[1]),e._resultHash=new t(e._baseHash[0])}reset(){const n=this;n._resultHash=new n._hash(n._baseHash[0]),n._updated=!1}update(n){const e=this;e._updated=!0,e._resultHash.update(n)}digest(){const n=this,e=n._resultHash.finalize(),t=new n._hash(n._baseHash[1]).update(e).finalize();return n.reset(),t}encrypt(n){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(n),this.digest(n)}};const _o="Invalid pasword",pn=16,Nd="raw",ko={name:"PBKDF2"},Fd={name:"HMAC"},Od="SHA-1",Rd=Object.assign({hash:Fd},ko),Eo=Object.assign({iterations:1e3,hash:{name:Od}},ko),Dd=["deriveBits"],jn=[8,12,16],In=[16,24,32],Ut=10,To=[0,0,0,0],Lr=typeof crypto<"u",So=Lr&&typeof crypto.subtle<"u",xt=Ir.bytes,Ao=vo.aes,Co=yo.ctrGladman,Io=Xn.hmacSha1;class Md{constructor(e,t,r){Object.assign(this,{password:e,signed:t,strength:r-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;if(t.password){const i=qe(e,0,jn[t.strength]+2);await Ud(t,i,t.password),t.password=null,t.aesCtrGladman=new Co(new Ao(t.keys.key),Array.from(To)),t.hmac=new Io(t.keys.authentication),e=qe(e,jn[t.strength]+2)}const r=new Uint8Array(e.length-Ut-(e.length-Ut)%pn);return Bo(t,e,r,0,Ut,!0)}flush(){const e=this,t=e.pendingInput,r=qe(t,0,t.length-Ut),i=qe(t,t.length-Ut);let s=new Uint8Array(0);if(r.length){const l=xt.toBits(r);e.hmac.update(l);const o=e.aesCtrGladman.update(l);s=xt.fromBits(o)}let a=!0;if(e.signed){const l=qe(xt.fromBits(e.hmac.digest()),0,Ut);for(let o=0;o<Ut;o++)l[o]!=i[o]&&(a=!1)}return{valid:a,data:s}}}class Ld{constructor(e,t){Object.assign(this,{password:e,strength:t-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;let r=new Uint8Array(0);t.password&&(r=await Vd(t,t.password),t.password=null,t.aesCtrGladman=new Co(new Ao(t.keys.key),Array.from(To)),t.hmac=new Io(t.keys.authentication));const i=new Uint8Array(r.length+e.length-e.length%pn);return i.set(r,0),Bo(t,e,i,r.length,0)}flush(){const e=this;let t=new Uint8Array(0);if(e.pendingInput.length){const i=e.aesCtrGladman.update(xt.toBits(e.pendingInput));e.hmac.update(i),t=xt.fromBits(i)}const r=qe(xt.fromBits(e.hmac.digest()),0,Ut);return{data:Xi(t,r),signature:r}}}function Bo(n,e,t,r,i,s){const a=e.length-i;n.pendingInput.length&&(e=Xi(n.pendingInput,e),t=Hd(t,a-a%pn));let l;for(l=0;l<=a-pn;l+=pn){const o=xt.toBits(qe(e,l,l+pn));s&&n.hmac.update(o);const c=n.aesCtrGladman.update(o);s||n.hmac.update(c),t.set(xt.fromBits(c),l+r)}return n.pendingInput=qe(e,l),t}async function Ud(n,e,t){await Po(n,t,qe(e,0,jn[n.strength]));const r=qe(e,jn[n.strength]),i=n.keys.passwordVerification;if(i[0]!=r[0]||i[1]!=r[1])throw new Error(_o)}async function Vd(n,e){const t=$d(new Uint8Array(jn[n.strength]));return await Po(n,e,t),Xi(t,n.keys.passwordVerification)}async function Po(n,e,t){const r=ki(e),i=await jd(Nd,r,Rd,!1,Dd),s=await Wd(Object.assign({salt:t},Eo),i,8*(In[n.strength]*2+2)),a=new Uint8Array(s);n.keys={key:xt.toBits(qe(a,0,In[n.strength])),authentication:xt.toBits(qe(a,In[n.strength],In[n.strength]*2)),passwordVerification:qe(a,In[n.strength]*2)}}function $d(n){return Lr&&typeof crypto.getRandomValues=="function"?crypto.getRandomValues(n):Pd.getRandomValues(n)}function jd(n,e,t,r,i){return Lr&&So&&typeof crypto.subtle.importKey=="function"?crypto.subtle.importKey(n,e,t,r,i):Xn.importKey(e)}async function Wd(n,e,t){return Lr&&So&&typeof crypto.subtle.deriveBits=="function"?await crypto.subtle.deriveBits(n,e,t):Xn.pbkdf2(e,n.salt,Eo.iterations,t)}function Xi(n,e){let t=n;return n.length+e.length&&(t=new Uint8Array(n.length+e.length),t.set(n,0),t.set(e,n.length)),t}function Hd(n,e){if(e&&e>n.length){const t=n;n=new Uint8Array(e),n.set(t,0)}return n}function qe(n,e,t){return n.subarray(e,t)}const gn=12;class qd{constructor(e,t){const r=this;Object.assign(r,{password:e,passwordVerification:t}),No(r,e)}append(e){const t=this;if(t.password){const r=zs(t,e.subarray(0,gn));if(t.password=null,r[gn-1]!=t.passwordVerification)throw new Error(_o);e=e.subarray(gn)}return zs(t,e)}flush(){return{valid:!0,data:new Uint8Array(0)}}}class Zd{constructor(e,t){const r=this;Object.assign(r,{password:e,passwordVerification:t}),No(r,e)}append(e){const t=this;let r,i;if(t.password){t.password=null;const s=crypto.getRandomValues(new Uint8Array(gn));s[gn-1]=t.passwordVerification,r=new Uint8Array(e.length+s.length),r.set(Ks(t,s),0),i=gn}else r=new Uint8Array(e.length),i=0;return r.set(Ks(t,e),i),r}flush(){return{data:new Uint8Array(0)}}}function zs(n,e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=Fo(n)^e[r],zi(n,t[r]);return t}function Ks(n,e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=Fo(n)^e[r],zi(n,e[r]);return t}function No(n,e){n.keys=[305419896,591751049,878082192],n.crcKey0=new $n(n.keys[0]),n.crcKey2=new $n(n.keys[2]);for(let t=0;t<e.length;t++)zi(n,e.charCodeAt(t))}function zi(n,e){n.crcKey0.append([e]),n.keys[0]=~n.crcKey0.get(),n.keys[1]=Qs(n.keys[1]+Oo(n.keys[0])),n.keys[1]=Qs(Math.imul(n.keys[1],134775813)+1),n.crcKey2.append([n.keys[1]>>>24]),n.keys[2]=~n.crcKey2.get()}function Fo(n){const e=n.keys[2]|2;return Oo(Math.imul(e,e^1)>>>8)}function Oo(n){return n&255}function Qs(n){return n&4294967295}const Ro="deflate",Do="inflate",Ys="Invalid signature";class Gd{constructor(e,{signature:t,password:r,signed:i,compressed:s,zipCrypto:a,passwordVerification:l,encryptionStrength:o},{chunkSize:c}){const d=Boolean(r);Object.assign(this,{signature:t,encrypted:d,signed:i,compressed:s,inflate:s&&new e({chunkSize:c}),crc32:i&&new $n,zipCrypto:a,decrypt:d&&a?new qd(r,l):new Md(r,i,o)})}async append(e){const t=this;return t.encrypted&&e.length&&(e=await t.decrypt.append(e)),t.compressed&&e.length&&(e=await t.inflate.append(e)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),e}async flush(){const e=this;let t,r=new Uint8Array(0);if(e.encrypted){const i=e.decrypt.flush();if(!i.valid)throw new Error(Ys);r=i.data}if((!e.encrypted||e.zipCrypto)&&e.signed){const i=new DataView(new Uint8Array(4).buffer);if(t=e.crc32.get(),i.setUint32(0,t),e.signature!=i.getUint32(0,!1))throw new Error(Ys)}return e.compressed&&(r=await e.inflate.append(r)||new Uint8Array(0),await e.inflate.flush()),{data:r,signature:t}}}class Xd{constructor(e,{encrypted:t,signed:r,compressed:i,level:s,zipCrypto:a,password:l,passwordVerification:o,encryptionStrength:c},{chunkSize:d}){Object.assign(this,{encrypted:t,signed:r,compressed:i,deflate:i&&new e({level:s||5,chunkSize:d}),crc32:r&&new $n,zipCrypto:a,encrypt:t&&a?new Zd(l,o):new Ld(l,c)})}async append(e){const t=this;let r=e;return t.compressed&&e.length&&(r=await t.deflate.append(e)),t.encrypted&&r.length&&(r=await t.encrypt.append(r)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),r}async flush(){const e=this;let t,r=new Uint8Array(0);if(e.compressed&&(r=await e.deflate.flush()||new Uint8Array(0)),e.encrypted){r=await e.encrypt.append(r);const i=e.encrypt.flush();t=i.signature;const s=new Uint8Array(r.length+i.data.length);s.set(r,0),s.set(i.data,r.length),r=s}return(!e.encrypted||e.zipCrypto)&&e.signed&&(t=e.crc32.get()),{data:r,signature:t}}}function zd(n,e,t){if(e.codecType.startsWith(Ro))return new Xd(n,e,t);if(e.codecType.startsWith(Do))return new Gd(n,e,t)}const Js="init",ea="append",ii="flush",Kd="message";let ta=!0;const si=(n,e,t,r,i,s,a)=>(Object.assign(n,{busy:!0,codecConstructor:e,options:Object.assign({},t),scripts:a,terminate(){n.worker&&!n.busy&&(n.worker.terminate(),n.interface=null)},onTaskFinished(){n.busy=!1,i(n)}}),s?Yd(n,r):Qd(n,r));function Qd(n,e){const t=zd(n.codecConstructor,n.options,e);return{async append(r){try{return await t.append(r)}catch(i){throw n.onTaskFinished(),i}},async flush(){try{return await t.flush()}finally{n.onTaskFinished()}},abort(){n.onTaskFinished()}}}function Yd(n,e){let t;const r={type:"module"};if(!n.interface){if(!ta)n.worker=i(r,e.baseURL);else try{n.worker=i({},e.baseURL)}catch{ta=!1,n.worker=i(r,e.baseURL)}n.worker.addEventListener(Kd,l,!1),n.interface={append(o){return s({type:ea,data:o})},flush(){return s({type:ii})},abort(){n.onTaskFinished()}}}return n.interface;function i(o,c){let d,f;d=n.scripts[0],typeof d=="function"&&(d=d());try{f=new URL(d,c)}catch{f=d}return new Worker(f,o)}async function s(o){if(!t){const c=n.options,d=n.scripts.slice(1);await a({scripts:d,type:Js,options:c,config:{chunkSize:e.chunkSize}})}return a(o)}function a(o){const c=n.worker,d=new Promise((f,u)=>t={resolve:f,reject:u});try{if(o.data)try{o.data=o.data.buffer,c.postMessage(o,[o.data])}catch{c.postMessage(o)}else c.postMessage(o)}catch(f){t.reject(f),t=null,n.onTaskFinished()}return d}function l(o){const c=o.data;if(t){const d=c.error,f=c.type;if(d){const u=new Error(d.message);u.stack=d.stack,t.reject(u),t=null,n.onTaskFinished()}else if(f==Js||f==ii||f==ea){const u=c.data;f==ii?(t.resolve({data:new Uint8Array(u),signature:c.signature}),t=null,n.onTaskFinished()):t.resolve(u&&new Uint8Array(u))}}}}let en=[];const ai=[];function Mo(n,e,t){const i=!(!e.compressed&&!e.signed&&!e.encrypted)&&(e.useWebWorkers||e.useWebWorkers===void 0&&t.useWebWorkers),s=i&&t.workerScripts?t.workerScripts[e.codecType]:[];if(en.length<t.maxWorkers){const l={};return en.push(l),si(l,n,e,t,a,i,s)}else{const l=en.find(o=>!o.busy);return l?(na(l),si(l,n,e,t,a,i,s)):new Promise(o=>ai.push({resolve:o,codecConstructor:n,options:e,webWorker:i,scripts:s}))}function a(l){if(ai.length){const[{resolve:o,codecConstructor:c,options:d,webWorker:f,scripts:u}]=ai.splice(0,1);o(si(l,c,d,t,a,f,u))}else l.worker?(na(l),Number.isFinite(t.terminateWorkerTimeout)&&t.terminateWorkerTimeout>=0&&(l.terminateTimeout=setTimeout(()=>{en=en.filter(o=>o!=l),l.terminate()},t.terminateWorkerTimeout))):en=en.filter(o=>o!=l)}}function na(n){n.terminateTimeout&&(clearTimeout(n.terminateTimeout),n.terminateTimeout=null)}var Jd=n=>{if(typeof URL.createObjectURL=="function"){const e=()=>URL.createObjectURL(new Blob([`const{Array:t,Object:e,Math:n,Error:r,Uint8Array:i,Uint16Array:o,Uint32Array:s,Int32Array:f,DataView:c,TextEncoder:l,crypto:u,postMessage:a}=globalThis,w=[];for(let t=0;256>t;t++){let e=t;for(let t=0;8>t;t++)1&e?e=e>>>1^3988292384:e>>>=1;w[t]=e}class h{constructor(t){this.t=t||-1}append(t){let e=0|this.t;for(let n=0,r=0|t.length;r>n;n++)e=e>>>8^w[255&(e^t[n])];this.t=e}get(){return~this.t}}const d={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const n=t[t.length-1],r=d.i(n);return 32===r?t.concat(e):d.o(e,r,0|n,t.slice(0,t.length-1))},l(t){const e=t.length;if(0===e)return 0;const n=t[e-1];return 32*(e-1)+d.i(n)},u(t,e){if(32*t.length<e)return t;const r=(t=t.slice(0,n.ceil(e/32))).length;return e&=31,r>0&&e&&(t[r-1]=d.h(e,t[r-1]&2147483648>>e-1,1)),t},h:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,i:t=>n.round(t/1099511627776)||32,o(t,e,n,r){for(void 0===r&&(r=[]);e>=32;e-=32)r.push(n),n=0;if(0===e)return r.concat(t);for(let i=0;i<t.length;i++)r.push(n|t[i]>>>e),n=t[i]<<32-e;const i=t.length?t[t.length-1]:0,o=d.i(i);return r.push(d.h(e+o&31,e+o>32?n:r.pop(),1)),r}},p={p:{k(t){const e=d.l(t)/8,n=new i(e);let r;for(let i=0;e>i;i++)0==(3&i)&&(r=t[i/4]),n[i]=r>>>24,r<<=8;return n},g(t){const e=[];let n,r=0;for(n=0;n<t.length;n++)r=r<<8|t[n],3==(3&n)&&(e.push(r),r=0);return 3&n&&e.push(d.h(8*(3&n),r)),e}}},y={v:function(t){t?(this.m=t.m.slice(0),this.S=t.S.slice(0),this._=t._):this.reset()}};y.v.prototype={blockSize:512,reset:function(){const t=this;return t.m=this.I.slice(0),t.S=[],t._=0,t},update:function(t){const e=this;"string"==typeof t&&(t=p.A.g(t));const n=e.S=d.concat(e.S,t),i=e._,o=e._=i+d.l(t);if(o>9007199254740991)throw new r("Cannot hash more than 2^53 - 1 bits");const f=new s(n);let c=0;for(let t=e.blockSize+i-(e.blockSize+i&e.blockSize-1);o>=t;t+=e.blockSize)e.C(f.subarray(16*c,16*(c+1))),c+=1;return n.splice(0,16*c),e},V:function(){const t=this;let e=t.S;const r=t.m;e=d.concat(e,[d.h(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(n.floor(t._/4294967296)),e.push(0|t._);e.length;)t.C(e.splice(0,16));return t.reset(),r},I:[1732584193,4023233417,2562383102,271733878,3285377520],B:[1518500249,1859775393,2400959708,3395469782],D:(t,e,n,r)=>t>19?t>39?t>59?t>79?void 0:e^n^r:e&n|e&r|n&r:e^n^r:e&n|~e&r,U:(t,e)=>e<<t|e>>>32-t,C:function(e){const r=this,i=r.m,o=t(80);for(let t=0;16>t;t++)o[t]=e[t];let s=i[0],f=i[1],c=i[2],l=i[3],u=i[4];for(let t=0;79>=t;t++){16>t||(o[t]=r.U(1,o[t-3]^o[t-8]^o[t-14]^o[t-16]));const e=r.U(5,s)+r.D(t,f,c,l)+u+o[t]+r.B[n.floor(t/20)]|0;u=l,l=c,c=r.U(30,f),f=s,s=e}i[0]=i[0]+s|0,i[1]=i[1]+f|0,i[2]=i[2]+c|0,i[3]=i[3]+l|0,i[4]=i[4]+u|0}};const b={getRandomValues(t){const e=new s(t.buffer),r=t=>{let e=987654321;const r=4294967295;return()=>(e=36969*(65535&e)+(e>>16)&r,(((e<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r)/4294967296+.5)*(n.random()>.5?1:-1))};for(let i,o=0;o<t.length;o+=4){const t=r(4294967296*(i||n.random()));i=987654071*t(),e[o/4]=4294967296*t()|0}return t}},k={importKey:t=>new k.M(p.p.g(t)),P(t,e,n,i){if(n=n||1e4,0>i||0>n)throw new r("invalid params to pbkdf2");const o=1+(i>>5)<<2;let s,f,l,u,a;const w=new ArrayBuffer(o),h=new c(w);let y=0;const b=d;for(e=p.p.g(e),a=1;(o||1)>y;a++){for(s=f=t.encrypt(b.concat(e,[a])),l=1;n>l;l++)for(f=t.encrypt(f),u=0;u<f.length;u++)s[u]^=f[u];for(l=0;(o||1)>y&&l<s.length;l++)h.setInt32(y,s[l]),y+=4}return w.slice(0,i/8)},M:class{constructor(t){const e=this,n=e.R=y.v,r=[[],[]],i=n.prototype.blockSize/32;e.H=[new n,new n],t.length>i&&(t=n.hash(t));for(let e=0;i>e;e++)r[0][e]=909522486^t[e],r[1][e]=1549556828^t[e];e.H[0].update(r[0]),e.H[1].update(r[1]),e.K=new n(e.H[0])}reset(){const t=this;t.K=new t.R(t.H[0]),t.L=!1}update(t){this.L=!0,this.K.update(t)}digest(){const t=this,e=t.K.V(),n=new t.R(t.H[1]).update(e).V();return t.reset(),n}encrypt(t){if(this.L)throw new r("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}}},g={name:"PBKDF2"},v=e.assign({hash:{name:"HMAC"}},g),m=e.assign({iterations:1e3,hash:{name:"SHA-1"}},g),S=["deriveBits"],z=[8,12,16],_=[16,24,32],I=[0,0,0,0],A=void 0!==u,C=A&&void 0!==u.subtle,V=p.p,B=class{constructor(t){const e=this;e.T=[[[],[],[],[],[]],[[],[],[],[],[]]],e.T[0][0][0]||e.j();const n=e.T[0][4],i=e.T[1],o=t.length;let s,f,c,l=1;if(4!==o&&6!==o&&8!==o)throw new r("invalid aes key size");for(e.B=[f=t.slice(0),c=[]],s=o;4*o+28>s;s++){let t=f[s-1];(s%o==0||8===o&&s%o==4)&&(t=n[t>>>24]<<24^n[t>>16&255]<<16^n[t>>8&255]<<8^n[255&t],s%o==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),f[s]=f[s-o]^t}for(let t=0;s;t++,s--){const e=f[3&t?s:s-4];c[t]=4>=s||4>t?e:i[0][n[e>>>24]]^i[1][n[e>>16&255]]^i[2][n[e>>8&255]]^i[3][n[255&e]]}}encrypt(t){return this.F(t,0)}decrypt(t){return this.F(t,1)}j(){const t=this.T[0],e=this.T[1],n=t[4],r=e[4],i=[],o=[];let s,f,c,l;for(let t=0;256>t;t++)o[(i[t]=t<<1^283*(t>>7))^t]=t;for(let u=s=0;!n[u];u^=f||1,s=o[s]||1){let o=s^s<<1^s<<2^s<<3^s<<4;o=o>>8^255&o^99,n[u]=o,r[o]=u,l=i[c=i[f=i[u]]];let a=16843009*l^65537*c^257*f^16843008*u,w=257*i[o]^16843008*o;for(let n=0;4>n;n++)t[n][u]=w=w<<24^w>>>8,e[n][o]=a=a<<24^a>>>8}for(let n=0;5>n;n++)t[n]=t[n].slice(0),e[n]=e[n].slice(0)}F(t,e){if(4!==t.length)throw new r("invalid aes block size");const n=this.B[e],i=n.length/4-2,o=[0,0,0,0],s=this.T[e],f=s[0],c=s[1],l=s[2],u=s[3],a=s[4];let w,h,d,p=t[0]^n[0],y=t[e?3:1]^n[1],b=t[2]^n[2],k=t[e?1:3]^n[3],g=4;for(let t=0;i>t;t++)w=f[p>>>24]^c[y>>16&255]^l[b>>8&255]^u[255&k]^n[g],h=f[y>>>24]^c[b>>16&255]^l[k>>8&255]^u[255&p]^n[g+1],d=f[b>>>24]^c[k>>16&255]^l[p>>8&255]^u[255&y]^n[g+2],k=f[k>>>24]^c[p>>16&255]^l[y>>8&255]^u[255&b]^n[g+3],g+=4,p=w,y=h,b=d;for(let t=0;4>t;t++)o[e?3&-t:t]=a[p>>>24]<<24^a[y>>16&255]<<16^a[b>>8&255]<<8^a[255&k]^n[g++],w=p,p=y,y=b,b=k,k=w;return o}},E=class{constructor(t,e){this.O=t,this.W=e,this.q=e}reset(){this.q=this.W}update(t){return this.G(this.O,t,this.q)}J(t){if(255==(t>>24&255)){let e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}N(t){0===(t[0]=this.J(t[0]))&&(t[1]=this.J(t[1]))}G(t,e,n){let r;if(!(r=e.length))return[];const i=d.l(e);for(let i=0;r>i;i+=4){this.N(n);const r=t.encrypt(n);e[i]^=r[0],e[i+1]^=r[1],e[i+2]^=r[2],e[i+3]^=r[3]}return d.u(e,i)}},D=k.M;class U{constructor(t,n,r){e.assign(this,{password:t,signed:n,X:r-1,Y:new i(0)})}async append(e){const n=this;if(n.password){const i=K(e,0,z[n.X]+2);await(async(t,e,n)=>{await R(t,n,K(e,0,z[t.X]));const i=K(e,z[t.X]),o=t.keys.passwordVerification;if(o[0]!=i[0]||o[1]!=i[1])throw new r("Invalid pasword")})(n,i,n.password),n.password=null,n.Z=new E(new B(n.keys.key),t.from(I)),n.$=new D(n.keys.tt),e=K(e,z[n.X]+2)}return P(n,e,new i(e.length-10-(e.length-10)%16),0,10,!0)}flush(){const t=this,e=t.Y,n=K(e,0,e.length-10),r=K(e,e.length-10);let o=new i(0);if(n.length){const e=V.g(n);t.$.update(e);const r=t.Z.update(e);o=V.k(r)}let s=!0;if(t.signed){const e=K(V.k(t.$.digest()),0,10);for(let t=0;10>t;t++)e[t]!=r[t]&&(s=!1)}return{valid:s,data:o}}}class M{constructor(t,n){e.assign(this,{password:t,X:n-1,Y:new i(0)})}async append(e){const n=this;let r=new i(0);n.password&&(r=await(async(t,e)=>{const n=(r=new i(z[t.X]),A&&"function"==typeof u.getRandomValues?u.getRandomValues(r):b.getRandomValues(r));var r;return await R(t,e,n),H(n,t.keys.passwordVerification)})(n,n.password),n.password=null,n.Z=new E(new B(n.keys.key),t.from(I)),n.$=new D(n.keys.tt));const o=new i(r.length+e.length-e.length%16);return o.set(r,0),P(n,e,o,r.length,0)}flush(){const t=this;let e=new i(0);if(t.Y.length){const n=t.Z.update(V.g(t.Y));t.$.update(n),e=V.k(n)}const n=K(V.k(t.$.digest()),0,10);return{data:H(e,n),signature:n}}}function P(t,e,n,r,o,s){const f=e.length-o;let c;for(t.Y.length&&(e=H(t.Y,e),n=((t,e)=>{if(e&&e>t.length){const n=t;(t=new i(e)).set(n,0)}return t})(n,f-f%16)),c=0;f-16>=c;c+=16){const i=V.g(K(e,c,c+16));s&&t.$.update(i);const o=t.Z.update(i);s||t.$.update(o),n.set(V.k(o),c+r)}return t.Y=K(e,c),n}async function R(t,n,r){const o=(t=>{if(void 0===l){const e=new i((t=unescape(encodeURIComponent(t))).length);for(let n=0;n<e.length;n++)e[n]=t.charCodeAt(n);return e}return(new l).encode(t)})(n),s=await((t,e,n,r,i)=>A&&C&&"function"==typeof u.subtle.importKey?u.subtle.importKey("raw",e,n,!1,i):k.importKey(e))(0,o,v,0,S),f=await(async(t,e,n)=>A&&C&&"function"==typeof u.subtle.deriveBits?await u.subtle.deriveBits(t,e,n):k.P(e,t.salt,m.iterations,n))(e.assign({salt:r},m),s,8*(2*_[t.X]+2)),c=new i(f);t.keys={key:V.g(K(c,0,_[t.X])),tt:V.g(K(c,_[t.X],2*_[t.X])),passwordVerification:K(c,2*_[t.X])}}function H(t,e){let n=t;return t.length+e.length&&(n=new i(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function K(t,e,n){return t.subarray(e,n)}class L{constructor(t,n){e.assign(this,{password:t,passwordVerification:n}),F(this,t)}append(t){const e=this;if(e.password){const n=j(e,t.subarray(0,12));if(e.password=null,n[11]!=e.passwordVerification)throw new r("Invalid pasword");t=t.subarray(12)}return j(e,t)}flush(){return{valid:!0,data:new i(0)}}}class T{constructor(t,n){e.assign(this,{password:t,passwordVerification:n}),F(this,t)}append(t){const e=this;let n,r;if(e.password){e.password=null;const o=u.getRandomValues(new i(12));o[11]=e.passwordVerification,n=new i(t.length+o.length),n.set(x(e,o),0),r=12}else n=new i(t.length),r=0;return n.set(x(e,t),r),n}flush(){return{data:new i(0)}}}function j(t,e){const n=new i(e.length);for(let r=0;r<e.length;r++)n[r]=W(t)^e[r],O(t,n[r]);return n}function x(t,e){const n=new i(e.length);for(let r=0;r<e.length;r++)n[r]=W(t)^e[r],O(t,e[r]);return n}function F(t,e){t.keys=[305419896,591751049,878082192],t.et=new h(t.keys[0]),t.nt=new h(t.keys[2]);for(let n=0;n<e.length;n++)O(t,e.charCodeAt(n))}function O(t,e){t.et.append([e]),t.keys[0]=~t.et.get(),t.keys[1]=G(t.keys[1]+q(t.keys[0])),t.keys[1]=G(n.imul(t.keys[1],134775813)+1),t.nt.append([t.keys[1]>>>24]),t.keys[2]=~t.nt.get()}function W(t){const e=2|t.keys[2];return q(n.imul(e,1^e)>>>8)}function q(t){return 255&t}function G(t){return 4294967295&t}class J{constructor(t,{signature:n,password:r,signed:i,compressed:o,zipCrypto:s,passwordVerification:f,encryptionStrength:c},{rt:l}){const u=!!r;e.assign(this,{signature:n,encrypted:u,signed:i,compressed:o,it:o&&new t({rt:l}),ot:i&&new h,zipCrypto:s,decrypt:u&&s?new L(r,f):new U(r,i,c)})}async append(t){const e=this;return e.encrypted&&t.length&&(t=await e.decrypt.append(t)),e.compressed&&t.length&&(t=await e.it.append(t)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.ot.append(t),t}async flush(){const t=this;let e,n=new i(0);if(t.encrypted){const e=t.decrypt.flush();if(!e.valid)throw new r("Invalid signature");n=e.data}if((!t.encrypted||t.zipCrypto)&&t.signed){const n=new c(new i(4).buffer);if(e=t.ot.get(),n.setUint32(0,e),t.signature!=n.getUint32(0,!1))throw new r("Invalid signature")}return t.compressed&&(n=await t.it.append(n)||new i(0),await t.it.flush()),{data:n,signature:e}}}class N{constructor(t,{encrypted:n,signed:r,compressed:i,level:o,zipCrypto:s,password:f,passwordVerification:c,encryptionStrength:l},{rt:u}){e.assign(this,{encrypted:n,signed:r,compressed:i,st:i&&new t({level:o||5,rt:u}),ot:r&&new h,zipCrypto:s,encrypt:n&&s?new T(f,c):new M(f,l)})}async append(t){const e=this;let n=t;return e.compressed&&t.length&&(n=await e.st.append(t)),e.encrypted&&n.length&&(n=await e.encrypt.append(n)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.ot.append(t),n}async flush(){const t=this;let e,n=new i(0);if(t.compressed&&(n=await t.st.flush()||new i(0)),t.encrypted){n=await t.encrypt.append(n);const r=t.encrypt.flush();e=r.signature;const o=new i(n.length+r.data.length);o.set(n,0),o.set(r.data,n.length),n=o}return t.encrypted&&!t.zipCrypto||!t.signed||(e=t.ot.get()),{data:n,signature:e}}}const Q={init(t){t.scripts&&t.scripts.length&&importScripts.apply(void 0,t.scripts);const e=t.options;let n;self.initCodec&&self.initCodec(),e.codecType.startsWith("deflate")?n=self.Deflate:e.codecType.startsWith("inflate")&&(n=self.Inflate),X=((t,e,n)=>e.codecType.startsWith("deflate")?new N(t,e,n):e.codecType.startsWith("inflate")?new J(t,e,n):void 0)(n,e,t.config)},append:async t=>({data:await X.append(t.data)}),flush:()=>X.flush()};let X;function Y(e){return Z(e.map((([e,n])=>new t(e).fill(n,0,e))))}function Z(e){return e.reduce(((e,n)=>e.concat(t.isArray(n)?Z(n):n)),[])}addEventListener("message",(async t=>{const e=t.data,n=e.type,r=Q[n];if(r)try{e.data&&(e.data=new i(e.data));const t=await r(e)||{};if(t.type=n,t.data)try{t.data=t.data.buffer,a(t,[t.data])}catch(e){a(t)}else a(t)}catch(t){a({type:n,error:{message:t.message,stack:t.stack}})}}));const $=[0,1,2,3].concat(...Y([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function tt(){const t=this;function e(t,e){let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}t.ft=r=>{const i=t.ct,o=t.ut.lt,s=t.ut.wt;let f,c,l,u=-1;for(r.ht=0,r.dt=573,f=0;s>f;f++)0!==i[2*f]?(r.yt[++r.ht]=u=f,r.bt[f]=0):i[2*f+1]=0;for(;2>r.ht;)l=r.yt[++r.ht]=2>u?++u:0,i[2*l]=1,r.bt[l]=0,r.kt--,o&&(r.gt-=o[2*l+1]);for(t.vt=u,f=n.floor(r.ht/2);f>=1;f--)r.St(i,f);l=s;do{f=r.yt[1],r.yt[1]=r.yt[r.ht--],r.St(i,1),c=r.yt[1],r.yt[--r.dt]=f,r.yt[--r.dt]=c,i[2*l]=i[2*f]+i[2*c],r.bt[l]=n.max(r.bt[f],r.bt[c])+1,i[2*f+1]=i[2*c+1]=l,r.yt[1]=l++,r.St(i,1)}while(r.ht>=2);r.yt[--r.dt]=r.yt[1],(e=>{const n=t.ct,r=t.ut.lt,i=t.ut.zt,o=t.ut._t,s=t.ut.It;let f,c,l,u,a,w,h=0;for(u=0;15>=u;u++)e.At[u]=0;for(n[2*e.yt[e.dt]+1]=0,f=e.dt+1;573>f;f++)c=e.yt[f],u=n[2*n[2*c+1]+1]+1,u>s&&(u=s,h++),n[2*c+1]=u,c>t.vt||(e.At[u]++,a=0,o>c||(a=i[c-o]),w=n[2*c],e.kt+=w*(u+a),r&&(e.gt+=w*(r[2*c+1]+a)));if(0!==h){do{for(u=s-1;0===e.At[u];)u--;e.At[u]--,e.At[u+1]+=2,e.At[s]--,h-=2}while(h>0);for(u=s;0!==u;u--)for(c=e.At[u];0!==c;)l=e.yt[--f],l>t.vt||(n[2*l+1]!=u&&(e.kt+=(u-n[2*l+1])*n[2*l],n[2*l+1]=u),c--)}})(r),((t,n,r)=>{const i=[];let o,s,f,c=0;for(o=1;15>=o;o++)i[o]=c=c+r[o-1]<<1;for(s=0;n>=s;s++)f=t[2*s+1],0!==f&&(t[2*s]=e(i[f]++,f))})(i,t.vt,r.At)}}function et(t,e,n,r,i){const o=this;o.lt=t,o.zt=e,o._t=n,o.wt=r,o.It=i}tt.Ct=[0,1,2,3,4,5,6,7].concat(...Y([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),tt.Vt=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],tt.Bt=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],tt.Et=t=>256>t?$[t]:$[256+(t>>>7)],tt.Dt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt.Ut=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tt.Mt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],tt.Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const nt=Y([[144,8],[112,9],[24,7],[8,8]]);et.Rt=Z([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((t,e)=>[t,nt[e]])));const rt=Y([[30,5]]);function it(t,e,n,r,i){const o=this;o.Ht=t,o.Kt=e,o.Lt=n,o.Tt=r,o.jt=i}et.xt=Z([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((t,e)=>[t,rt[e]]))),et.Ft=new et(et.Rt,tt.Dt,257,286,15),et.Ot=new et(et.xt,tt.Ut,0,30,15),et.Wt=new et(null,tt.Mt,0,19,7);const ot=[new it(0,0,0,0,0),new it(4,4,8,4,1),new it(4,5,16,8,1),new it(4,6,32,32,1),new it(4,4,16,16,2),new it(8,16,32,32,2),new it(8,16,128,128,2),new it(8,32,128,256,2),new it(32,128,258,1024,2),new it(32,258,258,4096,2)],st=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function ft(t,e,n,r){const i=t[2*e],o=t[2*n];return o>i||i==o&&r[e]<=r[n]}function ct(){const t=this;let e,r,s,f,c,l,u,a,w,h,d,p,y,b,k,g,v,m,S,z,_,I,A,C,V,B,E,D,U,M,P,R,H;const K=new tt,L=new tt,T=new tt;let j,x,F,O,W,q;function G(){let e;for(e=0;286>e;e++)P[2*e]=0;for(e=0;30>e;e++)R[2*e]=0;for(e=0;19>e;e++)H[2*e]=0;P[512]=1,t.kt=t.gt=0,x=F=0}function J(t,e){let n,r=-1,i=t[1],o=0,s=7,f=4;0===i&&(s=138,f=3),t[2*(e+1)+1]=65535;for(let c=0;e>=c;c++)n=i,i=t[2*(c+1)+1],++o<s&&n==i||(f>o?H[2*n]+=o:0!==n?(n!=r&&H[2*n]++,H[32]++):o>10?H[36]++:H[34]++,o=0,r=n,0===i?(s=138,f=3):n==i?(s=6,f=3):(s=7,f=4))}function N(e){t.qt[t.pending++]=e}function Q(t){N(255&t),N(t>>>8&255)}function X(t,e){let n;const r=e;q>16-r?(n=t,W|=n<<q&65535,Q(W),W=n>>>16-q,q+=r-16):(W|=t<<q&65535,q+=r)}function Y(t,e){const n=2*t;X(65535&e[n],65535&e[n+1])}function Z(t,e){let n,r,i=-1,o=t[1],s=0,f=7,c=4;for(0===o&&(f=138,c=3),n=0;e>=n;n++)if(r=o,o=t[2*(n+1)+1],++s>=f||r!=o){if(c>s)do{Y(r,H)}while(0!=--s);else 0!==r?(r!=i&&(Y(r,H),s--),Y(16,H),X(s-3,2)):s>10?(Y(18,H),X(s-11,7)):(Y(17,H),X(s-3,3));s=0,i=r,0===o?(f=138,c=3):r==o?(f=6,c=3):(f=7,c=4)}}function $(){16==q?(Q(W),W=0,q=0):8>q||(N(255&W),W>>>=8,q-=8)}function nt(e,r){let i,o,s;if(t.Gt[x]=e,t.Jt[x]=255&r,x++,0===e?P[2*r]++:(F++,e--,P[2*(tt.Ct[r]+256+1)]++,R[2*tt.Et(e)]++),0==(8191&x)&&E>2){for(i=8*x,o=_-v,s=0;30>s;s++)i+=R[2*s]*(5+tt.Ut[s]);if(i>>>=3,F<n.floor(x/2)&&i<n.floor(o/2))return!0}return x==j-1}function rt(e,n){let r,i,o,s,f=0;if(0!==x)do{r=t.Gt[f],i=t.Jt[f],f++,0===r?Y(i,e):(o=tt.Ct[i],Y(o+256+1,e),s=tt.Dt[o],0!==s&&(i-=tt.Vt[o],X(i,s)),r--,o=tt.Et(r),Y(o,n),s=tt.Ut[o],0!==s&&(r-=tt.Bt[o],X(r,s)))}while(x>f);Y(256,e),O=e[513]}function it(){q>8?Q(W):q>0&&N(255&W),W=0,q=0}function ct(e,n,r){X(0+(r?1:0),3),((e,n)=>{it(),O=8,Q(n),Q(~n),t.qt.set(a.subarray(e,e+n),t.pending),t.pending+=n})(e,n)}function lt(n){((e,n,r)=>{let i,o,s=0;E>0?(K.ft(t),L.ft(t),s=(()=>{let e;for(J(P,K.vt),J(R,L.vt),T.ft(t),e=18;e>=3&&0===H[2*tt.Pt[e]+1];e--);return t.kt+=14+3*(e+1),e})(),i=t.kt+3+7>>>3,o=t.gt+3+7>>>3,o>i||(i=o)):i=o=n+5,n+4>i||-1==e?o==i?(X(2+(r?1:0),3),rt(et.Rt,et.xt)):(X(4+(r?1:0),3),((t,e,n)=>{let r;for(X(t-257,5),X(e-1,5),X(n-4,4),r=0;n>r;r++)X(H[2*tt.Pt[r]+1],3);Z(P,t-1),Z(R,e-1)})(K.vt+1,L.vt+1,s+1),rt(P,R)):ct(e,n,r),G(),r&&it()})(0>v?-1:v,_-v,n),v=_,e.Nt()}function ut(){let t,n,r,i;do{if(i=w-A-_,0===i&&0===_&&0===A)i=c;else if(-1==i)i--;else if(_>=c+c-262){a.set(a.subarray(c,c+c),0),I-=c,_-=c,v-=c,t=y,r=t;do{n=65535&d[--r],d[r]=c>n?0:n-c}while(0!=--t);t=c,r=t;do{n=65535&h[--r],h[r]=c>n?0:n-c}while(0!=--t);i+=c}if(0===e.Qt)return;t=e.Xt(a,_+A,i),A+=t,3>A||(p=255&a[_],p=(p<<g^255&a[_+1])&k)}while(262>A&&0!==e.Qt)}function at(t){let e,n,r=V,i=_,o=C;const s=_>c-262?_-(c-262):0;let f=M;const l=u,w=_+258;let d=a[i+o-1],p=a[i+o];U>C||(r>>=2),f>A&&(f=A);do{if(e=t,a[e+o]==p&&a[e+o-1]==d&&a[e]==a[i]&&a[++e]==a[i+1]){i+=2,e++;do{}while(a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&w>i);if(n=258-(w-i),i=w-258,n>o){if(I=t,o=n,n>=f)break;d=a[i+o-1],p=a[i+o]}}}while((t=65535&h[t&l])>s&&0!=--r);return o>A?A:o}t.bt=[],t.At=[],t.yt=[],P=[],R=[],H=[],t.St=(e,n)=>{const r=t.yt,i=r[n];let o=n<<1;for(;o<=t.ht&&(o<t.ht&&ft(e,r[o+1],r[o],t.bt)&&o++,!ft(e,i,r[o],t.bt));)r[n]=r[o],n=o,o<<=1;r[n]=i},t.Yt=(e,S,I,x,F,J)=>(x||(x=8),F||(F=8),J||(J=0),e.Zt=null,-1==S&&(S=6),1>F||F>9||8!=x||9>I||I>15||0>S||S>9||0>J||J>2?-2:(e.$t=t,l=I,c=1<<l,u=c-1,b=F+7,y=1<<b,k=y-1,g=n.floor((b+3-1)/3),a=new i(2*c),h=[],d=[],j=1<<F+6,t.qt=new i(4*j),s=4*j,t.Gt=new o(j),t.Jt=new i(j),E=S,D=J,(e=>(e.te=e.ee=0,e.Zt=null,t.pending=0,t.ne=0,r=113,f=0,K.ct=P,K.ut=et.Ft,L.ct=R,L.ut=et.Ot,T.ct=H,T.ut=et.Wt,W=0,q=0,O=8,G(),(()=>{w=2*c,d[y-1]=0;for(let t=0;y-1>t;t++)d[t]=0;B=ot[E].Kt,U=ot[E].Ht,M=ot[E].Lt,V=ot[E].Tt,_=0,v=0,A=0,m=C=2,z=0,p=0})(),0))(e))),t.re=()=>42!=r&&113!=r&&666!=r?-2:(t.Jt=null,t.Gt=null,t.qt=null,d=null,h=null,a=null,t.$t=null,113==r?-3:0),t.ie=(t,e,n)=>{let r=0;return-1==e&&(e=6),0>e||e>9||0>n||n>2?-2:(ot[E].jt!=ot[e].jt&&0!==t.te&&(r=t.st(1)),E!=e&&(E=e,B=ot[E].Kt,U=ot[E].Ht,M=ot[E].Lt,V=ot[E].Tt),D=n,r)},t.oe=(t,e,n)=>{let i,o=n,s=0;if(!e||42!=r)return-2;if(3>o)return 0;for(o>c-262&&(o=c-262,s=n-o),a.set(e.subarray(s,s+o),0),_=o,v=o,p=255&a[0],p=(p<<g^255&a[1])&k,i=0;o-3>=i;i++)p=(p<<g^255&a[i+2])&k,h[i&u]=d[p],d[p]=i;return 0},t.st=(n,i)=>{let o,w,b,V,U;if(i>4||0>i)return-2;if(!n.se||!n.fe&&0!==n.Qt||666==r&&4!=i)return n.Zt=st[4],-2;if(0===n.ce)return n.Zt=st[7],-5;var M;if(e=n,V=f,f=i,42==r&&(w=8+(l-8<<4)<<8,b=(E-1&255)>>1,b>3&&(b=3),w|=b<<6,0!==_&&(w|=32),w+=31-w%31,r=113,N((M=w)>>8&255),N(255&M)),0!==t.pending){if(e.Nt(),0===e.ce)return f=-1,0}else if(0===e.Qt&&V>=i&&4!=i)return e.Zt=st[7],-5;if(666==r&&0!==e.Qt)return n.Zt=st[7],-5;if(0!==e.Qt||0!==A||0!=i&&666!=r){switch(U=-1,ot[E].jt){case 0:U=(t=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=A){if(ut(),0===A&&0==t)return 0;if(0===A)break}if(_+=A,A=0,n=v+r,(0===_||_>=n)&&(A=_-n,_=n,lt(!1),0===e.ce))return 0;if(_-v>=c-262&&(lt(!1),0===e.ce))return 0}return lt(4==t),0===e.ce?4==t?2:0:4==t?3:1})(i);break;case 1:U=(t=>{let n,r=0;for(;;){if(262>A){if(ut(),262>A&&0==t)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&a[_+2])&k,r=65535&d[p],h[_&u]=d[p],d[p]=_),0===r||(_-r&65535)>c-262||2!=D&&(m=at(r)),3>m)n=nt(0,255&a[_]),A--,_++;else if(n=nt(_-I,m-3),A-=m,m>B||3>A)_+=m,m=0,p=255&a[_],p=(p<<g^255&a[_+1])&k;else{m--;do{_++,p=(p<<g^255&a[_+2])&k,r=65535&d[p],h[_&u]=d[p],d[p]=_}while(0!=--m);_++}if(n&&(lt(!1),0===e.ce))return 0}return lt(4==t),0===e.ce?4==t?2:0:4==t?3:1})(i);break;case 2:U=(t=>{let n,r,i=0;for(;;){if(262>A){if(ut(),262>A&&0==t)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&a[_+2])&k,i=65535&d[p],h[_&u]=d[p],d[p]=_),C=m,S=I,m=2,0!==i&&B>C&&c-262>=(_-i&65535)&&(2!=D&&(m=at(i)),5>=m&&(1==D||3==m&&_-I>4096)&&(m=2)),3>C||m>C)if(0!==z){if(n=nt(0,255&a[_-1]),n&&lt(!1),_++,A--,0===e.ce)return 0}else z=1,_++,A--;else{r=_+A-3,n=nt(_-1-S,C-3),A-=C-1,C-=2;do{++_>r||(p=(p<<g^255&a[_+2])&k,i=65535&d[p],h[_&u]=d[p],d[p]=_)}while(0!=--C);if(z=0,m=2,_++,n&&(lt(!1),0===e.ce))return 0}}return 0!==z&&(n=nt(0,255&a[_-1]),z=0),lt(4==t),0===e.ce?4==t?2:0:4==t?3:1})(i)}if(2!=U&&3!=U||(r=666),0==U||2==U)return 0===e.ce&&(f=-1),0;if(1==U){if(1==i)X(2,3),Y(256,et.Rt),$(),9>1+O+10-q&&(X(2,3),Y(256,et.Rt),$()),O=7;else if(ct(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(e.Nt(),0===e.ce)return f=-1,0}}return 4!=i?0:1}}function lt(){const t=this;t.le=0,t.ue=0,t.Qt=0,t.te=0,t.ce=0,t.ee=0}function ut(t){const e=new lt,o=(s=t&&t.rt?t.rt:65536)+5*(n.floor(s/16383)+1);var s;const f=new i(o);let c=t?t.level:-1;void 0===c&&(c=-1),e.Yt(c),e.se=f,this.append=(t,n)=>{let s,c,l=0,u=0,a=0;const w=[];if(t.length){e.le=0,e.fe=t,e.Qt=t.length;do{if(e.ue=0,e.ce=o,s=e.st(0),0!=s)throw new r("deflating: "+e.Zt);e.ue&&(e.ue==o?w.push(new i(f)):w.push(f.slice(0,e.ue))),a+=e.ue,n&&e.le>0&&e.le!=l&&(n(e.le),l=e.le)}while(e.Qt>0||0===e.ce);return w.length>1?(c=new i(a),w.forEach((t=>{c.set(t,u),u+=t.length}))):c=w[0]||new i(0),c}},this.flush=()=>{let t,n,s=0,c=0;const l=[];do{if(e.ue=0,e.ce=o,t=e.st(4),1!=t&&0!=t)throw new r("deflating: "+e.Zt);o-e.ce>0&&l.push(f.slice(0,e.ue)),c+=e.ue}while(e.Qt>0||0===e.ce);return e.re(),n=new i(c),l.forEach((t=>{n.set(t,s),s+=t.length})),n}}lt.prototype={Yt:function(t,e){const n=this;return n.$t=new ct,e||(e=15),n.$t.Yt(n,t,e)},st:function(t){const e=this;return e.$t?e.$t.st(e,t):-2},re:function(){const t=this;if(!t.$t)return-2;const e=t.$t.re();return t.$t=null,e},ie:function(t,e){const n=this;return n.$t?n.$t.ie(n,t,e):-2},oe:function(t,e){const n=this;return n.$t?n.$t.oe(n,t,e):-2},Xt:function(t,e,n){const r=this;let i=r.Qt;return i>n&&(i=n),0===i?0:(r.Qt-=i,t.set(r.fe.subarray(r.le,r.le+i),e),r.le+=i,r.te+=i,i)},Nt:function(){const t=this;let e=t.$t.pending;e>t.ce&&(e=t.ce),0!==e&&(t.se.set(t.$t.qt.subarray(t.$t.ne,t.$t.ne+e),t.ue),t.ue+=e,t.$t.ne+=e,t.ee+=e,t.ce-=e,t.$t.pending-=e,0===t.$t.pending&&(t.$t.ne=0))}};const at=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],wt=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],ht=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],dt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],pt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],yt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],bt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function kt(){let t,e,n,r,i,o;function s(t,e,s,f,c,l,u,a,w,h,d){let p,y,b,k,g,v,m,S,z,_,I,A,C,V,B;_=0,g=s;do{n[t[e+_]]++,_++,g--}while(0!==g);if(n[0]==s)return u[0]=-1,a[0]=0,0;for(S=a[0],v=1;15>=v&&0===n[v];v++);for(m=v,v>S&&(S=v),g=15;0!==g&&0===n[g];g--);for(b=g,S>g&&(S=g),a[0]=S,V=1<<v;g>v;v++,V<<=1)if(0>(V-=n[v]))return-3;if(0>(V-=n[g]))return-3;for(n[g]+=V,o[1]=v=0,_=1,C=2;0!=--g;)o[C]=v+=n[_],C++,_++;g=0,_=0;do{0!==(v=t[e+_])&&(d[o[v]++]=g),_++}while(++g<s);for(s=o[b],o[0]=g=0,_=0,k=-1,A=-S,i[0]=0,I=0,B=0;b>=m;m++)for(p=n[m];0!=p--;){for(;m>A+S;){if(k++,A+=S,B=b-A,B=B>S?S:B,(y=1<<(v=m-A))>p+1&&(y-=p+1,C=m,B>v))for(;++v<B&&(y<<=1)>n[++C];)y-=n[C];if(B=1<<v,h[0]+B>1440)return-3;i[k]=I=h[0],h[0]+=B,0!==k?(o[k]=g,r[0]=v,r[1]=S,v=g>>>A-S,r[2]=I-i[k-1]-v,w.set(r,3*(i[k-1]+v))):u[0]=I}for(r[1]=m-A,s>_?d[_]<f?(r[0]=256>d[_]?0:96,r[2]=d[_++]):(r[0]=l[d[_]-f]+16+64,r[2]=c[d[_++]-f]):r[0]=192,y=1<<m-A,v=g>>>A;B>v;v+=y)w.set(r,3*(I+v));for(v=1<<m-1;0!=(g&v);v>>>=1)g^=v;for(g^=v,z=(1<<A)-1;(g&z)!=o[k];)k--,A-=S,z=(1<<A)-1}return 0!==V&&1!=b?-5:0}function c(s){let c;for(t||(t=[],e=[],n=new f(16),r=[],i=new f(15),o=new f(16)),e.length<s&&(e=[]),c=0;s>c;c++)e[c]=0;for(c=0;16>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;i.set(n.subarray(0,15),0),o.set(n.subarray(0,16),0)}this.ae=(n,r,i,o,f)=>{let l;return c(19),t[0]=0,l=s(n,0,19,19,null,null,i,r,o,t,e),-3==l?f.Zt="oversubscribed dynamic bit lengths tree":-5!=l&&0!==r[0]||(f.Zt="incomplete dynamic bit lengths tree",l=-3),l},this.we=(n,r,i,o,f,l,u,a,w)=>{let h;return c(288),t[0]=0,h=s(i,0,n,257,dt,pt,l,o,a,t,e),0!=h||0===o[0]?(-3==h?w.Zt="oversubscribed literal/length tree":-4!=h&&(w.Zt="incomplete literal/length tree",h=-3),h):(c(288),h=s(i,n,r,0,yt,bt,u,f,a,t,e),0!=h||0===f[0]&&n>257?(-3==h?w.Zt="oversubscribed distance tree":-5==h?(w.Zt="incomplete distance tree",h=-3):-4!=h&&(w.Zt="empty distance tree with lengths",h=-3),h):0)}}function gt(){const t=this;let e,n,r,i,o=0,s=0,f=0,c=0,l=0,u=0,a=0,w=0,h=0,d=0;function p(t,e,n,r,i,o,s,f){let c,l,u,a,w,h,d,p,y,b,k,g,v,m,S,z;d=f.le,p=f.Qt,w=s.he,h=s.de,y=s.write,b=y<s.read?s.read-y-1:s.end-y,k=at[t],g=at[e];do{for(;20>h;)p--,w|=(255&f.pe(d++))<<h,h+=8;if(c=w&k,l=n,u=r,z=3*(u+c),0!==(a=l[z]))for(;;){if(w>>=l[z+1],h-=l[z+1],0!=(16&a)){for(a&=15,v=l[z+2]+(w&at[a]),w>>=a,h-=a;15>h;)p--,w|=(255&f.pe(d++))<<h,h+=8;for(c=w&g,l=i,u=o,z=3*(u+c),a=l[z];;){if(w>>=l[z+1],h-=l[z+1],0!=(16&a)){for(a&=15;a>h;)p--,w|=(255&f.pe(d++))<<h,h+=8;if(m=l[z+2]+(w&at[a]),w>>=a,h-=a,b-=v,m>y){S=y-m;do{S+=s.end}while(0>S);if(a=s.end-S,v>a){if(v-=a,y-S>0&&a>y-S)do{s.ye[y++]=s.ye[S++]}while(0!=--a);else s.ye.set(s.ye.subarray(S,S+a),y),y+=a,S+=a,a=0;S=0}}else S=y-m,y-S>0&&2>y-S?(s.ye[y++]=s.ye[S++],s.ye[y++]=s.ye[S++],v-=2):(s.ye.set(s.ye.subarray(S,S+2),y),y+=2,S+=2,v-=2);if(y-S>0&&v>y-S)do{s.ye[y++]=s.ye[S++]}while(0!=--v);else s.ye.set(s.ye.subarray(S,S+v),y),y+=v,S+=v,v=0;break}if(0!=(64&a))return f.Zt="invalid distance code",v=f.Qt-p,v=v>h>>3?h>>3:v,p+=v,d-=v,h-=v<<3,s.he=w,s.de=h,f.Qt=p,f.te+=d-f.le,f.le=d,s.write=y,-3;c+=l[z+2],c+=w&at[a],z=3*(u+c),a=l[z]}break}if(0!=(64&a))return 0!=(32&a)?(v=f.Qt-p,v=v>h>>3?h>>3:v,p+=v,d-=v,h-=v<<3,s.he=w,s.de=h,f.Qt=p,f.te+=d-f.le,f.le=d,s.write=y,1):(f.Zt="invalid literal/length code",v=f.Qt-p,v=v>h>>3?h>>3:v,p+=v,d-=v,h-=v<<3,s.he=w,s.de=h,f.Qt=p,f.te+=d-f.le,f.le=d,s.write=y,-3);if(c+=l[z+2],c+=w&at[a],z=3*(u+c),0===(a=l[z])){w>>=l[z+1],h-=l[z+1],s.ye[y++]=l[z+2],b--;break}}else w>>=l[z+1],h-=l[z+1],s.ye[y++]=l[z+2],b--}while(b>=258&&p>=10);return v=f.Qt-p,v=v>h>>3?h>>3:v,p+=v,d-=v,h-=v<<3,s.he=w,s.de=h,f.Qt=p,f.te+=d-f.le,f.le=d,s.write=y,0}t.init=(t,o,s,f,c,l)=>{e=0,a=t,w=o,r=s,h=f,i=c,d=l,n=null},t.be=(t,y,b)=>{let k,g,v,m,S,z,_,I=0,A=0,C=0;for(C=y.le,m=y.Qt,I=t.he,A=t.de,S=t.write,z=S<t.read?t.read-S-1:t.end-S;;)switch(e){case 0:if(z>=258&&m>=10&&(t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,b=p(a,w,r,h,i,d,t,y),C=y.le,m=y.Qt,I=t.he,A=t.de,S=t.write,z=S<t.read?t.read-S-1:t.end-S,0!=b)){e=1==b?7:9;break}f=a,n=r,s=h,e=1;case 1:for(k=f;k>A;){if(0===m)return t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);b=0,m--,I|=(255&y.pe(C++))<<A,A+=8}if(g=3*(s+(I&at[k])),I>>>=n[g+1],A-=n[g+1],v=n[g],0===v){c=n[g+2],e=6;break}if(0!=(16&v)){l=15&v,o=n[g+2],e=2;break}if(0==(64&v)){f=v,s=g/3+n[g+2];break}if(0!=(32&v)){e=7;break}return e=9,y.Zt="invalid literal/length code",b=-3,t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);case 2:for(k=l;k>A;){if(0===m)return t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);b=0,m--,I|=(255&y.pe(C++))<<A,A+=8}o+=I&at[k],I>>=k,A-=k,f=w,n=i,s=d,e=3;case 3:for(k=f;k>A;){if(0===m)return t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);b=0,m--,I|=(255&y.pe(C++))<<A,A+=8}if(g=3*(s+(I&at[k])),I>>=n[g+1],A-=n[g+1],v=n[g],0!=(16&v)){l=15&v,u=n[g+2],e=4;break}if(0==(64&v)){f=v,s=g/3+n[g+2];break}return e=9,y.Zt="invalid distance code",b=-3,t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);case 4:for(k=l;k>A;){if(0===m)return t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);b=0,m--,I|=(255&y.pe(C++))<<A,A+=8}u+=I&at[k],I>>=k,A-=k,e=5;case 5:for(_=S-u;0>_;)_+=t.end;for(;0!==o;){if(0===z&&(S==t.end&&0!==t.read&&(S=0,z=S<t.read?t.read-S-1:t.end-S),0===z&&(t.write=S,b=t.ke(y,b),S=t.write,z=S<t.read?t.read-S-1:t.end-S,S==t.end&&0!==t.read&&(S=0,z=S<t.read?t.read-S-1:t.end-S),0===z)))return t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);t.ye[S++]=t.ye[_++],z--,_==t.end&&(_=0),o--}e=0;break;case 6:if(0===z&&(S==t.end&&0!==t.read&&(S=0,z=S<t.read?t.read-S-1:t.end-S),0===z&&(t.write=S,b=t.ke(y,b),S=t.write,z=S<t.read?t.read-S-1:t.end-S,S==t.end&&0!==t.read&&(S=0,z=S<t.read?t.read-S-1:t.end-S),0===z)))return t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);b=0,t.ye[S++]=c,z--,e=0;break;case 7:if(A>7&&(A-=8,m++,C--),t.write=S,b=t.ke(y,b),S=t.write,z=S<t.read?t.read-S-1:t.end-S,t.read!=t.write)return t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);e=8;case 8:return b=1,t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);case 9:return b=-3,t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b);default:return b=-2,t.he=I,t.de=A,y.Qt=m,y.te+=C-y.le,y.le=C,t.write=S,t.ke(y,b)}},t.ge=()=>{}}kt.ve=(t,e,n,r)=>(t[0]=9,e[0]=5,n[0]=wt,r[0]=ht,0);const vt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function mt(t,e){const n=this;let r,o=0,s=0,c=0,l=0;const u=[0],a=[0],w=new gt;let h=0,d=new f(4320);const p=new kt;n.de=0,n.he=0,n.ye=new i(e),n.end=e,n.read=0,n.write=0,n.reset=(t,e)=>{e&&(e[0]=0),6==o&&w.ge(t),o=0,n.de=0,n.he=0,n.read=n.write=0},n.reset(t,null),n.ke=(t,e)=>{let r,i,o;return i=t.ue,o=n.read,r=(o>n.write?n.end:n.write)-o,r>t.ce&&(r=t.ce),0!==r&&-5==e&&(e=0),t.ce-=r,t.ee+=r,t.se.set(n.ye.subarray(o,o+r),i),i+=r,o+=r,o==n.end&&(o=0,n.write==n.end&&(n.write=0),r=n.write-o,r>t.ce&&(r=t.ce),0!==r&&-5==e&&(e=0),t.ce-=r,t.ee+=r,t.se.set(n.ye.subarray(o,o+r),i),i+=r,o+=r),t.ue=i,n.read=o,e},n.be=(t,e)=>{let i,f,y,b,k,g,v,m;for(b=t.le,k=t.Qt,f=n.he,y=n.de,g=n.write,v=g<n.read?n.read-g-1:n.end-g;;){let S,z,_,I,A,C,V,B;switch(o){case 0:for(;3>y;){if(0===k)return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);e=0,k--,f|=(255&t.pe(b++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,o=1;break;case 1:S=[],z=[],_=[[]],I=[[]],kt.ve(S,z,_,I),w.init(S[0],z[0],_[0],0,I[0],0),f>>>=3,y-=3,o=6;break;case 2:f>>>=3,y-=3,o=3;break;case 3:return f>>>=3,y-=3,o=9,t.Zt="invalid block type",e=-3,n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e)}break;case 1:for(;32>y;){if(0===k)return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);e=0,k--,f|=(255&t.pe(b++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return o=9,t.Zt="invalid stored block lengths",e=-3,n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);s=65535&f,f=y=0,o=0!==s?2:0!==h?7:0;break;case 2:if(0===k)return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);if(0===v&&(g==n.end&&0!==n.read&&(g=0,v=g<n.read?n.read-g-1:n.end-g),0===v&&(n.write=g,e=n.ke(t,e),g=n.write,v=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,v=g<n.read?n.read-g-1:n.end-g),0===v)))return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);if(e=0,i=s,i>k&&(i=k),i>v&&(i=v),n.ye.set(t.Xt(b,i),g),b+=i,k-=i,g+=i,v-=i,0!=(s-=i))break;o=0!==h?7:0;break;case 3:for(;14>y;){if(0===k)return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);e=0,k--,f|=(255&t.pe(b++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return o=9,t.Zt="too many length or distance symbols",e=-3,n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(m=0;i>m;m++)r[m]=0;f>>>=14,y-=14,l=0,o=4;case 4:for(;4+(c>>>10)>l;){for(;3>y;){if(0===k)return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);e=0,k--,f|=(255&t.pe(b++))<<y,y+=8}r[vt[l++]]=7&f,f>>>=3,y-=3}for(;19>l;)r[vt[l++]]=0;if(u[0]=7,i=p.ae(r,u,a,d,t),0!=i)return-3==(e=i)&&(r=null,o=9),n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);l=0,o=5;case 5:for(;i=c,258+(31&i)+(i>>5&31)>l;){let s,w;for(i=u[0];i>y;){if(0===k)return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);e=0,k--,f|=(255&t.pe(b++))<<y,y+=8}if(i=d[3*(a[0]+(f&at[i]))+1],w=d[3*(a[0]+(f&at[i]))+2],16>w)f>>>=i,y-=i,r[l++]=w;else{for(m=18==w?7:w-14,s=18==w?11:3;i+m>y;){if(0===k)return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);e=0,k--,f|=(255&t.pe(b++))<<y,y+=8}if(f>>>=i,y-=i,s+=f&at[m],f>>>=m,y-=m,m=l,i=c,m+s>258+(31&i)+(i>>5&31)||16==w&&1>m)return r=null,o=9,t.Zt="invalid bit length repeat",e=-3,n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);w=16==w?r[m-1]:0;do{r[m++]=w}while(0!=--s);l=m}}if(a[0]=-1,A=[],C=[],V=[],B=[],A[0]=9,C[0]=6,i=c,i=p.we(257+(31&i),1+(i>>5&31),r,A,C,V,B,d,t),0!=i)return-3==i&&(r=null,o=9),e=i,n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);w.init(A[0],C[0],d,V[0],d,B[0]),o=6;case 6:if(n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,1!=(e=w.be(n,t,e)))return n.ke(t,e);if(e=0,w.ge(t),b=t.le,k=t.Qt,f=n.he,y=n.de,g=n.write,v=g<n.read?n.read-g-1:n.end-g,0===h){o=0;break}o=7;case 7:if(n.write=g,e=n.ke(t,e),g=n.write,v=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);o=8;case 8:return e=1,n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);case 9:return e=-3,n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e);default:return e=-2,n.he=f,n.de=y,t.Qt=k,t.te+=b-t.le,t.le=b,n.write=g,n.ke(t,e)}}},n.ge=t=>{n.reset(t,null),n.ye=null,d=null},n.me=(t,e,r)=>{n.ye.set(t.subarray(e,e+r),0),n.read=n.write=r},n.Se=()=>1==o?1:0}const St=[0,0,255,255];function zt(){const t=this;function e(t){return t&&t.ze?(t.te=t.ee=0,t.Zt=null,t.ze.mode=7,t.ze._e.reset(t,null),0):-2}t.mode=0,t.method=0,t.Ie=[0],t.Ae=0,t.marker=0,t.Ce=0,t.Ve=e=>(t._e&&t._e.ge(e),t._e=null,0),t.Be=(n,r)=>(n.Zt=null,t._e=null,8>r||r>15?(t.Ve(n),-2):(t.Ce=r,n.ze._e=new mt(n,1<<r),e(n),0)),t.it=(t,e)=>{let n,r;if(!t||!t.ze||!t.fe)return-2;const i=t.ze;for(e=4==e?-5:0,n=-5;;)switch(i.mode){case 0:if(0===t.Qt)return n;if(n=e,t.Qt--,t.te++,8!=(15&(i.method=t.pe(t.le++)))){i.mode=13,t.Zt="unknown compression method",i.marker=5;break}if(8+(i.method>>4)>i.Ce){i.mode=13,t.Zt="invalid win size",i.marker=5;break}i.mode=1;case 1:if(0===t.Qt)return n;if(n=e,t.Qt--,t.te++,r=255&t.pe(t.le++),((i.method<<8)+r)%31!=0){i.mode=13,t.Zt="incorrect header check",i.marker=5;break}if(0==(32&r)){i.mode=7;break}i.mode=2;case 2:if(0===t.Qt)return n;n=e,t.Qt--,t.te++,i.Ae=(255&t.pe(t.le++))<<24&4278190080,i.mode=3;case 3:if(0===t.Qt)return n;n=e,t.Qt--,t.te++,i.Ae+=(255&t.pe(t.le++))<<16&16711680,i.mode=4;case 4:if(0===t.Qt)return n;n=e,t.Qt--,t.te++,i.Ae+=(255&t.pe(t.le++))<<8&65280,i.mode=5;case 5:return 0===t.Qt?n:(n=e,t.Qt--,t.te++,i.Ae+=255&t.pe(t.le++),i.mode=6,2);case 6:return i.mode=13,t.Zt="need dictionary",i.marker=0,-2;case 7:if(n=i._e.be(t,n),-3==n){i.mode=13,i.marker=0;break}if(0==n&&(n=e),1!=n)return n;n=e,i._e.reset(t,i.Ie),i.mode=12;case 12:return t.Qt=0,1;case 13:return-3;default:return-2}},t.Ee=(t,e,n)=>{let r=0,i=n;if(!t||!t.ze||6!=t.ze.mode)return-2;const o=t.ze;return i<1<<o.Ce||(i=(1<<o.Ce)-1,r=n-i),o._e.me(e,r,i),o.mode=7,0},t.De=t=>{let n,r,i,o,s;if(!t||!t.ze)return-2;const f=t.ze;if(13!=f.mode&&(f.mode=13,f.marker=0),0===(n=t.Qt))return-5;for(r=t.le,i=f.marker;0!==n&&4>i;)t.pe(r)==St[i]?i++:i=0!==t.pe(r)?0:4-i,r++,n--;return t.te+=r-t.le,t.le=r,t.Qt=n,f.marker=i,4!=i?-3:(o=t.te,s=t.ee,e(t),t.te=o,t.ee=s,f.mode=7,0)},t.Ue=t=>t&&t.ze&&t.ze._e?t.ze._e.Se():-2}function _t(){}function It(t){const e=new _t,o=t&&t.rt?n.floor(2*t.rt):131072,s=new i(o);let f=!1;e.Be(),e.se=s,this.append=(t,n)=>{const c=[];let l,u,a=0,w=0,h=0;if(0!==t.length){e.le=0,e.fe=t,e.Qt=t.length;do{if(e.ue=0,e.ce=o,0!==e.Qt||f||(e.le=0,f=!0),l=e.it(0),f&&-5===l){if(0!==e.Qt)throw new r("inflating: bad input")}else if(0!==l&&1!==l)throw new r("inflating: "+e.Zt);if((f||1===l)&&e.Qt===t.length)throw new r("inflating: bad input");e.ue&&(e.ue===o?c.push(new i(s)):c.push(s.slice(0,e.ue))),h+=e.ue,n&&e.le>0&&e.le!=a&&(n(e.le),a=e.le)}while(e.Qt>0||0===e.ce);return c.length>1?(u=new i(h),c.forEach((t=>{u.set(t,w),w+=t.length}))):u=c[0]||new i(0),u}},this.flush=()=>{e.Ve()}}_t.prototype={Be:function(t){const e=this;return e.ze=new zt,t||(t=15),e.ze.Be(e,t)},it:function(t){const e=this;return e.ze?e.ze.it(e,t):-2},Ve:function(){const t=this;if(!t.ze)return-2;const e=t.ze.Ve(t);return t.ze=null,e},De:function(){const t=this;return t.ze?t.ze.De(t):-2},Ee:function(t,e){const n=this;return n.ze?n.ze.Ee(n,t,e):-2},pe:function(t){return this.fe[t]},Xt:function(t,e){return this.fe.subarray(t,t+e)}},self.initCodec=()=>{self.Deflate=ut,self.Inflate=It};
`],{type:"text/javascript"}));n({workerScripts:{inflate:[e],deflate:[e]}})}};const Ei="text/plain";class Lo{constructor(){this.size=0}init(){this.initialized=!0}}class Uo extends Lo{}class Vo extends Lo{writeUint8Array(e){this.size+=e.length}}class ef extends Uo{constructor(e){super(),this.blobReader=new yn(new Blob([e],{type:Ei}))}init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}readUint8Array(e,t){return this.blobReader.readUint8Array(e,t)}}class wn extends Vo{constructor(e){super(),this.encoding=e,this.blob=new Blob([],{type:Ei})}writeUint8Array(e){super.writeUint8Array(e),this.blob=new Blob([this.blob,e.buffer],{type:Ei})}getData(){if(this.blob.text)return this.blob.text();{const e=new FileReader;return new Promise((t,r)=>{e.onload=i=>t(i.target.result),e.onerror=()=>r(e.error),e.readAsText(this.blob,this.encoding)})}}}class yn extends Uo{constructor(e){super(),this.blob=e,this.size=e.size}async readUint8Array(e,t){if(this.blob.arrayBuffer)return new Uint8Array(await this.blob.slice(e,e+t).arrayBuffer());{const r=new FileReader;return new Promise((i,s)=>{r.onload=a=>i(new Uint8Array(a.target.result)),r.onerror=()=>s(r.error),r.readAsArrayBuffer(this.blob.slice(e,e+t))})}}}class ft extends Vo{constructor(e){super(),this.contentType=e,this.arrayBuffersMaxlength=8,ra(this)}writeUint8Array(e){super.writeUint8Array(e),this.arrayBuffers.length==this.arrayBuffersMaxlength&&ia(this),this.arrayBuffers.push(e.buffer)}getData(){return this.blob||(this.arrayBuffers.length&&ia(this),this.blob=this.pendingBlob,ra(this)),this.blob}}function ra(n){n.pendingBlob=new Blob([],{type:n.contentType}),n.arrayBuffers=[]}function ia(n){n.pendingBlob=new Blob([n.pendingBlob,...n.arrayBuffers],{type:n.contentType}),n.arrayBuffers=[]}const Ae=4294967295,dt=65535,Ti=8,$o=0,jo=99,Wo=67324752,tf=134695760,Si=33639248,Ho=101010256,Ai=101075792,qo=117853008,Br=22,br=20,xr=56,nf=Br+br+xr,rf=1,Zo=1,Go=39169,Xo=10,zo=1,Ki=21589,sf=28789,af=25461,Ci=1,of=6,Ii=8,Bi=2048,Pi=16,lf=20,sa=45,aa=51,vr="/",oa=new Date(2107,11,31),la=new Date(1980,0,1),cf="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),df=n=>{let e="";for(let t=0;t<n.length;t++)e+=cf[n[t]];return e};function Ni(n,e){if(e&&e.trim().toLowerCase()=="cp437")return df(n);if(typeof TextDecoder>"u"){const t=new FileReader;return new Promise((r,i)=>{t.onload=s=>r(s.target.result),t.onerror=()=>i(t.error),t.readAsText(new Blob([n]))})}else return new TextDecoder(e).decode(n)}const ff=64,uf="Abort error";async function Ko(n,e,t,r,i,s,a){const l=Math.max(s.chunkSize,ff);return o();async function o(c=0,d=0){const f=a.signal,u=i();if(c<u){oi(f,n);const m=await e.readUint8Array(c+r,Math.min(l,u-c)),g=m.length;oi(f,n);const h=await n.append(m);if(oi(f,n),d+=await ca(t,h),a.onprogress)try{a.onprogress(c+g,u)}catch{}return o(c+l,d)}else{const m=await n.flush();return d+=await ca(t,m.data),{signature:m.signature,length:d}}}}function oi(n,e){if(n&&n.aborted)throw e.abort(),new Error(uf)}async function ca(n,e){return e.length&&await n.writeUint8Array(e),e.length}const hf=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod","extraFieldNTFS","lastAccessDate","creationDate","extraFieldExtendedTimestamp","version","versionMadeBy","msDosCompatible","internalFileAttribute","externalFileAttribute"];class Pr{constructor(e){hf.forEach(t=>this[t]=e[t])}}const li="File format is not recognized",pf="End of central directory not found",mf="End of Zip64 central directory not found",gf="End of Zip64 central directory locator not found",wf="Central directory header not found",bf="Local file header not found",xf="Zip64 extra field not found",vf="File contains encrypted entry",yf="Encryption method not supported",da="Compression method not supported",fa="utf-8",ua="cp437",ha=["uncompressedSize","compressedSize","offset"];class Ur{constructor(e,t={}){Object.assign(this,{reader:e,options:t,config:bo()})}async*getEntriesGenerator(e={}){const t=this,r=t.reader;if(r.initialized||await r.init(),r.size<Br)throw new Error(li);const i=await Af(r,Ho,r.size,Br,dt*16);if(!i)throw new Error(pf);const s=Be(i);let a=_e(s,12),l=_e(s,16),o=Ze(s,8),c=0;if(l==Ae||a==Ae||o==dt){const m=await jt(r,i.offset-br,br),g=Be(m);if(_e(g,0)!=qo)throw new Error(mf);l=yr(g,8);let h=await jt(r,l,xr),p=Be(h);const w=i.offset-br-xr;if(_e(p,0)!=Ai&&l!=w){const x=l;l=w,c=l-x,h=await jt(r,l,xr),p=Be(h)}if(_e(p,0)!=Ai)throw new Error(gf);o=yr(p,32),a=yr(p,40),l-=a}if(l<0||l>=r.size)throw new Error(li);let d=0,f=await jt(r,l,a),u=Be(f);if(a){const m=i.offset-a;if(_e(u,d)!=Si&&l!=m){const g=l;l=m,c=l-g,f=await jt(r,l,a),u=Be(f)}}if(l<0||l>=r.size)throw new Error(li);for(let m=0;m<o;m++){const g=new _f(r,t.config,t.options);if(_e(u,d)!=Si)throw new Error(wf);Qo(g,u,d+6);const h=Boolean(g.bitFlag.languageEncodingFlag),p=d+46,w=p+g.filenameLength,x=w+g.extraFieldLength,b=Ze(u,d+4),y=(b&0)==0;Object.assign(g,{versionMadeBy:b,msDosCompatible:y,compressedSize:0,uncompressedSize:0,commentLength:Ze(u,d+32),directory:y&&(bn(u,d+38)&Pi)==Pi,offset:_e(u,d+42)+c,internalFileAttribute:_e(u,d+34),externalFileAttribute:_e(u,d+38),rawFilename:f.subarray(p,w),filenameUTF8:h,commentUTF8:h,rawExtraField:f.subarray(w,x)});const v=x+g.commentLength;g.rawComment=f.subarray(x,v);const _=mn(t,e,"filenameEncoding"),k=mn(t,e,"commentEncoding"),[T,C]=await Promise.all([Ni(g.rawFilename,g.filenameUTF8?fa:_||ua),Ni(g.rawComment,g.commentUTF8?fa:k||ua)]);g.filename=T,g.comment=C,!g.directory&&g.filename.endsWith(vr)&&(g.directory=!0),await Yo(g,g,u,d+6);const S=new Pr(g);if(S.getData=(A,R)=>g.getData(A,S,R),d=v,e.onprogress)try{e.onprogress(m+1,o,new Pr(g))}catch{}yield S}return!0}async getEntries(e={}){const t=[],r=this.getEntriesGenerator(e);let i=r.next();for(;!(await i).done;)t.push((await i).value),i=r.next();return t}async close(){}}class _f{constructor(e,t,r){Object.assign(this,{reader:e,config:t,options:r})}async getData(e,t,r={}){const i=this,{reader:s,offset:a,extraFieldAES:l,compressionMethod:o,config:c,bitFlag:d,signature:f,rawLastModDate:u,compressedSize:m}=i,g=i.localDirectory={};s.initialized||await s.init();let h=await jt(s,a,30);const p=Be(h);let w=mn(i,r,"password");if(w=w&&w.length&&w,l&&l.originalCompressionMethod!=jo)throw new Error(da);if(o!=$o&&o!=Ti)throw new Error(da);if(_e(p,0)!=Wo)throw new Error(bf);Qo(g,p,4),h=await jt(s,a,30+g.filenameLength+g.extraFieldLength),g.rawExtraField=h.subarray(30+g.filenameLength),await Yo(i,g,p,4),t.lastAccessDate=g.lastAccessDate,t.creationDate=g.creationDate;const x=i.encrypted&&g.encrypted,b=x&&!l;if(x){if(!b&&l.strength===void 0)throw new Error(yf);if(!w)throw new Error(vf)}const y=await Mo(c.Inflate,{codecType:Do,password:w,zipCrypto:b,encryptionStrength:l&&l.strength,signed:mn(i,r,"checkSignature"),passwordVerification:b&&(d.dataDescriptor?u>>>8&255:f>>>24&255),signature:f,compressed:o!=0,encrypted:x,useWebWorkers:mn(i,r,"useWebWorkers")},c);e.initialized||await e.init();const v=mn(i,r,"signal"),_=a+30+g.filenameLength+g.extraFieldLength;return await Ko(y,s,e,_,()=>m,c,{onprogress:r.onprogress,signal:v}),e.getData()}}function Qo(n,e,t){const r=n.rawBitFlag=Ze(e,t+2),i=(r&Ci)==Ci,s=_e(e,t+6);Object.assign(n,{encrypted:i,version:Ze(e,t),bitFlag:{level:(r&of)>>1,dataDescriptor:(r&Ii)==Ii,languageEncodingFlag:(r&Bi)==Bi},rawLastModDate:s,lastModDate:Cf(s),filenameLength:Ze(e,t+22),extraFieldLength:Ze(e,t+24)})}async function Yo(n,e,t,r){const i=e.rawExtraField,s=e.extraField=new Map,a=Be(new Uint8Array(i));let l=0;try{for(;l<i.length;){const h=Ze(a,l),p=Ze(a,l+2);s.set(h,{type:h,data:i.slice(l+4,l+4+p)}),l+=4+p}}catch{}const o=Ze(t,r+4);e.signature=_e(t,r+10),e.uncompressedSize=_e(t,r+18),e.compressedSize=_e(t,r+14);const c=s.get(Zo);c&&(kf(c,e),e.extraFieldZip64=c);const d=s.get(sf);d&&(await pa(d,"filename","rawFilename",e,n),e.extraFieldUnicodePath=d);const f=s.get(af);f&&(await pa(f,"comment","rawComment",e,n),e.extraFieldUnicodeComment=f);const u=s.get(Go);u?(Ef(u,e,o),e.extraFieldAES=u):e.compressionMethod=o;const m=s.get(Xo);m&&(Tf(m,e),e.extraFieldNTFS=m);const g=s.get(Ki);g&&(Sf(g,e),e.extraFieldExtendedTimestamp=g)}function kf(n,e){e.zip64=!0;const t=Be(n.data);n.values=[];for(let i=0;i<Math.floor(n.data.length/8);i++)n.values.push(yr(t,0+i*8));const r=ha.filter(i=>e[i]==Ae);for(let i=0;i<r.length;i++)n[r[i]]=n.values[i];ha.forEach(i=>{if(e[i]==Ae)if(n[i]!==void 0)e[i]=n[i];else throw new Error(xf)})}async function pa(n,e,t,r,i){const s=Be(n.data);n.version=bn(s,0),n.signature=_e(s,1);const a=new $n;a.append(i[t]);const l=Be(new Uint8Array(4));l.setUint32(0,a.get(),!0),n[e]=await Ni(n.data.subarray(5)),n.valid=!i.bitFlag.languageEncodingFlag&&n.signature==_e(l,0),n.valid&&(r[e]=n[e],r[e+"UTF8"]=!0)}function Ef(n,e,t){const r=Be(n.data);n.vendorVersion=bn(r,0),n.vendorId=bn(r,2);const i=bn(r,4);n.strength=i,n.originalCompressionMethod=t,e.compressionMethod=n.compressionMethod=Ze(r,5)}function Tf(n,e){const t=Be(n.data);let r=4,i;try{for(;r<n.data.length&&!i;){const s=Ze(t,r),a=Ze(t,r+2);s==zo&&(i=n.data.slice(r+4,r+4+a)),r+=4+a}}catch{}try{if(i&&i.length==24){const s=Be(i),a=s.getBigUint64(0,!0),l=s.getBigUint64(8,!0),o=s.getBigUint64(16,!0);Object.assign(n,{rawLastModDate:a,rawLastAccessDate:l,rawCreationDate:o});const c=ci(a),d=ci(l),f=ci(o),u={lastModDate:c,lastAccessDate:d,creationDate:f};Object.assign(n,u),Object.assign(e,u)}}catch{}}function Sf(n,e){const t=Be(n.data),r=bn(t,0),i=[],s=[];(r&1)==1&&(i.push("lastModDate"),s.push("rawLastModDate")),(r&2)==2&&(i.push("lastAccessDate"),s.push("rawLastAccessDate")),(r&4)==4&&(i.push("creationDate"),s.push("rawCreationDate"));let a=1;i.forEach((l,o)=>{if(n.data.length>=a+4){const c=_e(t,a);e[l]=n[l]=new Date(c*1e3);const d=s[o];n[d]=c}a+=4})}async function Af(n,e,t,r,i){const s=new Uint8Array(4),a=Be(s);If(a,0,e);const l=r+i;return await o(r)||await o(Math.min(l,t));async function o(c){const d=t-c,f=await jt(n,d,c);for(let u=f.length-r;u>=0;u--)if(f[u]==s[0]&&f[u+1]==s[1]&&f[u+2]==s[2]&&f[u+3]==s[3])return{offset:d+u,buffer:f.slice(u,u+r).buffer}}}function mn(n,e,t){return e[t]===void 0?n.options[t]:e[t]}function Cf(n){const e=(n&4294901760)>>16,t=n&65535;try{return new Date(1980+((e&65024)>>9),((e&480)>>5)-1,e&31,(t&63488)>>11,(t&2016)>>5,(t&31)*2,0)}catch{}}function ci(n){return new Date(Number(n/BigInt(1e4)-BigInt(116444736e5)))}function bn(n,e){return n.getUint8(e)}function Ze(n,e){return n.getUint16(e,!0)}function _e(n,e){return n.getUint32(e,!0)}function yr(n,e){return Number(n.getBigUint64(e,!0))}function If(n,e,t){n.setUint32(e,t,!0)}function Be(n){return new DataView(n.buffer)}function jt(n,e,t){return n.readUint8Array(e,t)}const Bf="File already exists",Pf="Zip file comment exceeds 64KB",Nf="File entry comment exceeds 64KB",Ff="File entry name exceeds 64KB",ma="Version exceeds 65535",Of="The strength must equal 1, 2, or 3",Rf="Extra field type exceeds 65535",Df="Extra field data exceeds 64KB",Qi="Zip64 is not supported",ga=new Uint8Array([7,0,2,0,65,69,3,0,0]),wa=24;let di=0;class ba{constructor(e,t={}){Object.assign(this,{writer:e,options:t,config:bo(),files:new Map,offset:e.size,pendingCompressedSize:0,pendingEntries:[],pendingAddFileCalls:new Set})}async add(e="",t,r={}){const i=this;if(di<i.config.maxWorkers){di++;let s;try{return s=Mf(i,e,t,r),this.pendingAddFileCalls.add(s),await s}finally{this.pendingAddFileCalls.delete(s),di--;const a=i.pendingEntries.shift();a&&i.add(a.name,a.reader,a.options).then(a.resolve).catch(a.reject)}}else return new Promise((s,a)=>i.pendingEntries.push({name:e,reader:t,options:r,resolve:s,reject:a}))}async close(e=new Uint8Array(0),t={}){for(;this.pendingAddFileCalls.size;)await Promise.all(Array.from(this.pendingAddFileCalls));return await Vf(this,e,t),this.writer.getData()}}async function Mf(n,e,t,r){if(e=e.trim(),r.directory&&!e.endsWith(vr)?e+=vr:r.directory=e.endsWith(vr),n.files.has(e))throw new Error(Bf);const i=ki(e);if(i.length>dt)throw new Error(Ff);const s=r.comment||"",a=ki(s);if(a.length>dt)throw new Error(Nf);const l=n.options.version||r.version||0;if(l>dt)throw new Error(ma);const o=n.options.versionMadeBy||r.versionMadeBy||20;if(o>dt)throw new Error(ma);const c=Te(n,r,"lastModDate")||new Date,d=Te(n,r,"lastAccessDate"),f=Te(n,r,"creationDate"),u=Te(n,r,"password"),m=Te(n,r,"encryptionStrength")||3,g=Te(n,r,"zipCrypto");if(u!==void 0&&m!==void 0&&(m<1||m>3))throw new Error(Of);let h=new Uint8Array(0);const p=r.extraField;if(p){let L=0,j=0;p.forEach(q=>L+=4+q.length),h=new Uint8Array(L),p.forEach((q,ve)=>{if(ve>dt)throw new Error(Rf);if(q.length>dt)throw new Error(Df);ke(h,new Uint16Array([ve]),j),ke(h,new Uint16Array([q.length]),j+2),ke(h,q,j+4),j+=4+q.length})}let w=Te(n,r,"extendedTimestamp");w===void 0&&(w=!0);let x=0,b=Te(n,r,"keepOrder");b===void 0&&(b=!0);let y=0,v=Te(n,r,"msDosCompatible");v===void 0&&(v=!0);const _=Te(n,r,"internalFileAttribute")||0,k=Te(n,r,"externalFileAttribute")||0;t&&(t.initialized||await t.init(),y=t.size,x=jf(y));let T=r.zip64||n.options.zip64||!1;if(n.offset+n.pendingCompressedSize>=Ae||y>=Ae||x>=Ae){if(r.zip64===!1||n.options.zip64===!1||!b)throw new Error(Qi);T=!0}n.pendingCompressedSize+=x,await Promise.resolve();const C=Te(n,r,"level"),S=Te(n,r,"useWebWorkers"),A=Te(n,r,"bufferedWrite");let R=Te(n,r,"dataDescriptor"),F=Te(n,r,"dataDescriptorSignature");const V=Te(n,r,"signal");R===void 0&&(R=!0),R&&F===void 0&&(F=!1);const O=await Lf(n,e,t,Object.assign({},r,{rawFilename:i,rawComment:a,version:l,versionMadeBy:o,lastModDate:c,lastAccessDate:d,creationDate:f,rawExtraField:h,zip64:T,password:u,level:C,useWebWorkers:S,encryptionStrength:m,extendedTimestamp:w,zipCrypto:g,bufferedWrite:A,keepOrder:b,dataDescriptor:R,dataDescriptorSignature:F,signal:V,msDosCompatible:v,internalFileAttribute:_,externalFileAttribute:k}));return x&&(n.pendingCompressedSize-=x),Object.assign(O,{name:e,comment:s,extraField:p}),new Pr(O)}async function Lf(n,e,t,r){const i=n.files,s=n.writer,a=Array.from(i.values()).pop();let l={},o,c,d;i.set(e,l);try{let f,u,m;if(r.keepOrder&&(f=a&&a.lock),l.lock=m=new Promise(g=>d=g),r.bufferedWrite||n.lockWrite||!r.dataDescriptor?(u=new ft,u.init(),o=!0):(n.lockWrite=new Promise(g=>c=g),s.initialized||await s.init(),u=s),l=await Uf(t,u,n.config,r),l.lock=m,i.set(e,l),l.filename=e,o){let g=0;const h=u.getData();await Promise.all([n.lockWrite,f]);let p;do p=Array.from(i.values()).find(w=>w.writingBufferedData),p&&await p.lock;while(p&&p.lock);if(l.writingBufferedData=!0,!r.dataDescriptor){const x=await Jo(h,0,26),b=new DataView(x);(!l.encrypted||r.zipCrypto)&&ee(b,14,l.signature),l.zip64?(ee(b,18,Ae),ee(b,22,Ae)):(ee(b,18,l.compressedSize),ee(b,22,l.uncompressedSize)),await s.writeUint8Array(new Uint8Array(x)),g=26}await $f(s,h,g),delete l.writingBufferedData}if(l.offset=n.offset,l.zip64){const g=lt(l.rawExtraFieldZip64);Ue(g,20,BigInt(l.offset))}else if(l.offset>=Ae)throw new Error(Qi);return n.offset+=l.length,l}catch(f){throw(o&&l.writingBufferedData||!o&&l.dataWritten)&&(f.corruptedEntry=n.hasCorruptedEntries=!0,l.uncompressedSize&&(n.offset+=l.uncompressedSize)),i.delete(e),f}finally{d(),c&&c()}}async function Uf(n,e,t,r){const{rawFilename:i,lastAccessDate:s,creationDate:a,password:l,level:o,zip64:c,zipCrypto:d,dataDescriptor:f,dataDescriptorSignature:u,directory:m,version:g,versionMadeBy:h,rawComment:p,rawExtraField:w,useWebWorkers:x,onprogress:b,signal:y,encryptionStrength:v,extendedTimestamp:_,msDosCompatible:k,internalFileAttribute:T,externalFileAttribute:C}=r,S=Boolean(l&&l.length),A=o!==0&&!m;let R;if(S&&!d){R=new Uint8Array(ga.length+2);const le=lt(R);ie(le,0,Go),ke(R,ga,2),Nr(le,8,v)}else R=new Uint8Array(0);let F,V;if(_){V=new Uint8Array(9+(s?4:0)+(a?4:0));const le=lt(V);ie(le,0,Ki),ie(le,2,V.length-4);const ce=1+(s?2:0)+(a?4:0);Nr(le,4,ce),ee(le,5,Math.floor(r.lastModDate.getTime()/1e3)),s&&ee(le,9,Math.floor(s.getTime()/1e3)),a&&ee(le,13,Math.floor(a.getTime()/1e3));try{F=new Uint8Array(36);const de=lt(F),Qe=fi(r.lastModDate);ie(de,0,Xo),ie(de,2,32),ie(de,8,zo),ie(de,10,24),Ue(de,12,Qe),Ue(de,20,fi(s)||Qe),Ue(de,28,fi(a)||Qe)}catch{F=new Uint8Array(0)}}else F=V=new Uint8Array(0);const O={version:g||lf,versionMadeBy:h,zip64:c,directory:Boolean(m),filenameUTF8:!0,rawFilename:i,commentUTF8:!0,rawComment:p,rawExtraFieldZip64:c?new Uint8Array(wa+4):new Uint8Array(0),rawExtraFieldExtendedTimestamp:V,rawExtraFieldNTFS:F,rawExtraFieldAES:R,rawExtraField:w,extendedTimestamp:_,msDosCompatible:k,internalFileAttribute:T,externalFileAttribute:C};let L=O.uncompressedSize=0,j=Bi;f&&(j=j|Ii);let q=$o;A&&(q=Ti),c&&(O.version=O.version>sa?O.version:sa),S&&(j=j|Ci,d||(O.version=O.version>aa?O.version:aa,q=jo,A&&(O.rawExtraFieldAES[9]=Ti))),O.compressionMethod=q;const ve=O.headerArray=new Uint8Array(26),U=lt(ve);ie(U,0,O.version),ie(U,2,j),ie(U,4,q);const Ee=new Uint32Array(1),Z=lt(Ee);let X;r.lastModDate<la?X=la:r.lastModDate>oa?X=oa:X=r.lastModDate,ie(Z,0,(X.getHours()<<6|X.getMinutes())<<5|X.getSeconds()/2),ie(Z,2,(X.getFullYear()-1980<<4|X.getMonth()+1)<<5|X.getDate());const ze=Ee[0];ee(U,6,ze),ie(U,22,i.length);const pe=R.length+V.length+F.length+O.rawExtraField.length;ie(U,24,pe);const te=new Uint8Array(30+i.length+pe),Qt=lt(te);ee(Qt,0,Wo),ke(te,ve,4),ke(te,i,30),ke(te,R,30+i.length),ke(te,V,30+i.length+R.length),ke(te,F,30+i.length+R.length+V.length),ke(te,O.rawExtraField,30+i.length+R.length+V.length+F.length);let _t,Ke=0;if(n){const le=await Mo(t.Deflate,{codecType:Ro,level:o,password:l,encryptionStrength:v,zipCrypto:S&&d,passwordVerification:S&&d&&ze>>8&255,signed:!0,compressed:A,encrypted:S,useWebWorkers:x},t);await e.writeUint8Array(te),O.dataWritten=!0,_t=await Ko(le,n,e,0,()=>n.size,t,{onprogress:b,signal:y}),L=O.uncompressedSize=n.size,Ke=_t.length}else await e.writeUint8Array(te),O.dataWritten=!0;let ht=new Uint8Array(0),rt,ye=0;if(f&&(ht=new Uint8Array(c?u?24:20:u?16:12),rt=lt(ht),u&&(ye=4,ee(rt,0,tf))),n){const le=_t.signature;if((!S||d)&&le!==void 0&&(ee(U,10,le),O.signature=le,f&&ee(rt,ye,le)),c){const ce=lt(O.rawExtraFieldZip64);ie(ce,0,Zo),ie(ce,2,wa),ee(U,14,Ae),Ue(ce,12,BigInt(Ke)),ee(U,18,Ae),Ue(ce,4,BigInt(L)),f&&(Ue(rt,ye+4,BigInt(Ke)),Ue(rt,ye+12,BigInt(L)))}else ee(U,14,Ke),ee(U,18,L),f&&(ee(rt,ye+4,Ke),ee(rt,ye+8,L))}f&&await e.writeUint8Array(ht);const pt=te.length+Ke+ht.length;return Object.assign(O,{compressedSize:Ke,lastModDate:X,rawLastModDate:ze,creationDate:a,lastAccessDate:s,encrypted:S,length:pt}),O}async function Vf(n,e,t){const r=n.writer,i=n.files;let s=0,a=0,l=n.offset,o=i.size;for(const[,u]of i)a+=46+u.rawFilename.length+u.rawComment.length+u.rawExtraFieldZip64.length+u.rawExtraFieldAES.length+u.rawExtraFieldExtendedTimestamp.length+u.rawExtraFieldNTFS.length+u.rawExtraField.length;let c=t.zip64||n.options.zip64||!1;if(l>=Ae||a>=Ae||o>=dt){if(t.zip64===!1||n.options.zip64===!1)throw new Error(Qi);c=!0}const d=new Uint8Array(a+(c?nf:Br)),f=lt(d);if(e&&e.length)if(e.length<=dt)ie(f,s+20,e.length);else throw new Error(Pf);for(const[u,m]of Array.from(i.values()).entries()){const{rawFilename:g,rawExtraFieldZip64:h,rawExtraFieldAES:p,rawExtraField:w,rawComment:x,versionMadeBy:b,headerArray:y,directory:v,zip64:_,msDosCompatible:k,internalFileAttribute:T,externalFileAttribute:C}=m;let S,A;if(m.extendedTimestamp){A=m.rawExtraFieldNTFS,S=new Uint8Array(9);const F=lt(S);ie(F,0,Ki),ie(F,2,S.length-4),Nr(F,4,1),ee(F,5,Math.floor(m.lastModDate.getTime()/1e3))}else A=S=new Uint8Array(0);const R=h.length+p.length+S.length+A.length+w.length;if(ee(f,s,Si),ie(f,s+4,b),ke(d,y,s+6),ie(f,s+30,R),ie(f,s+32,x.length),ee(f,s+34,T),C?ee(f,s+38,C):v&&k&&Nr(f,s+38,Pi),_?ee(f,s+42,Ae):ee(f,s+42,m.offset),ke(d,g,s+46),ke(d,h,s+46+g.length),ke(d,p,s+46+g.length+h.length),ke(d,S,s+46+g.length+h.length+p.length),ke(d,A,s+46+g.length+h.length+p.length+S.length),ke(d,w,s+46+g.length+h.length+p.length+S.length+A.length),ke(d,x,s+46+g.length+R),s+=46+g.length+R+x.length,t.onprogress)try{t.onprogress(u+1,i.size,new Pr(m))}catch{}}c&&(ee(f,s,Ai),Ue(f,s+4,BigInt(44)),ie(f,s+12,45),ie(f,s+14,45),Ue(f,s+24,BigInt(o)),Ue(f,s+32,BigInt(o)),Ue(f,s+40,BigInt(a)),Ue(f,s+48,BigInt(l)),ee(f,s+56,qo),Ue(f,s+64,BigInt(l)+BigInt(a)),ee(f,s+72,rf),o=dt,l=Ae,a=Ae,s+=76),ee(f,s,Ho),ie(f,s+8,o),ie(f,s+10,o),ee(f,s+12,a),ee(f,s+16,l),await r.writeUint8Array(d),e&&e.length&&await r.writeUint8Array(e)}function Jo(n,e,t){if(n.arrayBuffer)return e||t?n.slice(e,t).arrayBuffer():n.arrayBuffer();{const r=new FileReader;return new Promise((i,s)=>{r.onload=a=>i(a.target.result),r.onerror=()=>s(r.error),r.readAsArrayBuffer(e||t?n.slice(e,t):n)})}}async function $f(n,e,t=0){await i();async function i(){if(t<e.size){const s=await Jo(e,t,t+536870912);await n.writeUint8Array(new Uint8Array(s)),t+=536870912,await i()}}}function fi(n){if(n)return(BigInt(n.getTime())+BigInt(116444736e5))*BigInt(1e4)}function Te(n,e,t){return e[t]===void 0?n.options[t]:e[t]}function jf(n){return n+5*(Math.floor(n/16383)+1)}function Nr(n,e,t){n.setUint8(e,t)}function ie(n,e,t){n.setUint16(e,t,!0)}function ee(n,e,t){n.setUint32(e,t,!0)}function Ue(n,e,t){n.setBigUint64(e,t,!0)}function ke(n,e,t){n.set(e,t)}function lt(n){return new DataView(n.buffer)}let el;try{el=import.meta.url}catch{}Mr({baseURL:el});Jd(Mr);Mr({Deflate:ld,Inflate:Id});var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yi={},Ji={};(function(n){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+t+"]*",i=new RegExp("^"+r+"$"),s=function(l,o){const c=[];let d=o.exec(l);for(;d;){const f=[];f.startIndex=o.lastIndex-d[0].length;const u=d.length;for(let m=0;m<u;m++)f.push(d[m]);c.push(f),d=o.exec(l)}return c},a=function(l){const o=i.exec(l);return!(o===null||typeof o>"u")};n.isExist=function(l){return typeof l<"u"},n.isEmptyObject=function(l){return Object.keys(l).length===0},n.merge=function(l,o,c){if(o){const d=Object.keys(o),f=d.length;for(let u=0;u<f;u++)c==="strict"?l[d[u]]=[o[d[u]]]:l[d[u]]=o[d[u]]}},n.getValue=function(l){return n.isExist(l)?l:""},n.isName=a,n.getAllMatches=s,n.nameRegexp=r})(Ji);const es=Ji,Hf={allowBooleanAttributes:!1,unpairedTags:[]};Yi.validate=function(n,e){e=Object.assign({},Hf,e);const t=[];let r=!1,i=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let s=0;s<n.length;s++)if(n[s]==="<"&&n[s+1]==="?"){if(s+=2,s=va(n,s),s.err)return s}else if(n[s]==="<"){let a=s;if(s++,n[s]==="!"){s=ya(n,s);continue}else{let l=!1;n[s]==="/"&&(l=!0,s++);let o="";for(;s<n.length&&n[s]!==">"&&n[s]!==" "&&n[s]!=="	"&&n[s]!==`
`&&n[s]!=="\r";s++)o+=n[s];if(o=o.trim(),o[o.length-1]==="/"&&(o=o.substring(0,o.length-1),s--),!Yf(o)){let f;return o.trim().length===0?f="Invalid space after '<'.":f="Tag '"+o+"' is an invalid name.",me("InvalidTag",f,Me(n,s))}const c=Gf(n,s);if(c===!1)return me("InvalidAttr","Attributes for '"+o+"' have open quote.",Me(n,s));let d=c.value;if(s=c.index,d[d.length-1]==="/"){const f=s-d.length;d=d.substring(0,d.length-1);const u=_a(d,e);if(u===!0)r=!0;else return me(u.err.code,u.err.msg,Me(n,f+u.err.line))}else if(l)if(c.tagClosed){if(d.trim().length>0)return me("InvalidTag","Closing tag '"+o+"' can't have attributes or invalid starting.",Me(n,a));{const f=t.pop();if(o!==f.tagName){let u=Me(n,f.tagStartPos);return me("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+u.line+", col "+u.col+") instead of closing tag '"+o+"'.",Me(n,a))}t.length==0&&(i=!0)}}else return me("InvalidTag","Closing tag '"+o+"' doesn't have proper closing.",Me(n,s));else{const f=_a(d,e);if(f!==!0)return me(f.err.code,f.err.msg,Me(n,s-d.length+f.err.line));if(i===!0)return me("InvalidXml","Multiple possible root nodes found.",Me(n,s));e.unpairedTags.indexOf(o)!==-1||t.push({tagName:o,tagStartPos:a}),r=!0}for(s++;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="!"){s++,s=ya(n,s);continue}else if(n[s+1]==="?"){if(s=va(n,++s),s.err)return s}else break;else if(n[s]==="&"){const f=Kf(n,s);if(f==-1)return me("InvalidChar","char '&' is not expected.",Me(n,s));s=f}else if(i===!0&&!xa(n[s]))return me("InvalidXml","Extra text at the end",Me(n,s));n[s]==="<"&&s--}}else{if(xa(n[s]))continue;return me("InvalidChar","char '"+n[s]+"' is not expected.",Me(n,s))}if(r){if(t.length==1)return me("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Me(n,t[0].tagStartPos));if(t.length>0)return me("InvalidXml","Invalid '"+JSON.stringify(t.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return me("InvalidXml","Start tag expected.",1);return!0};function xa(n){return n===" "||n==="	"||n===`
`||n==="\r"}function va(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const r=n.substr(t,e-t);if(e>5&&r==="xml")return me("InvalidXml","XML declaration allowed only at the start of the document.",Me(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function ya(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const qf='"',Zf="'";function Gf(n,e){let t="",r="",i=!1;for(;e<n.length;e++){if(n[e]===qf||n[e]===Zf)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){i=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:i}}const Xf=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function _a(n,e){const t=es.getAllMatches(n,Xf),r={};for(let i=0;i<t.length;i++){if(t[i][1].length===0)return me("InvalidAttr","Attribute '"+t[i][2]+"' has no space in starting.",Bn(t[i]));if(t[i][3]!==void 0&&t[i][4]===void 0)return me("InvalidAttr","Attribute '"+t[i][2]+"' is without value.",Bn(t[i]));if(t[i][3]===void 0&&!e.allowBooleanAttributes)return me("InvalidAttr","boolean attribute '"+t[i][2]+"' is not allowed.",Bn(t[i]));const s=t[i][2];if(!Qf(s))return me("InvalidAttr","Attribute '"+s+"' is an invalid name.",Bn(t[i]));if(!r.hasOwnProperty(s))r[s]=1;else return me("InvalidAttr","Attribute '"+s+"' is repeated.",Bn(t[i]))}return!0}function zf(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function Kf(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,zf(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function me(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function Qf(n){return es.isName(n)}function Yf(n){return es.isName(n)}function Me(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function Bn(n){return n.startIndex+n[1].length}var ts={};const tl={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},Jf=function(n){return Object.assign({},tl,n)};ts.buildOptions=Jf;ts.defaultOptions=tl;class eu{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}}var tu=eu;function nu(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,i=!1,s=!1,a="";for(;e<n.length;e++)if(n[e]==="<"&&!s){if(i&&su(n,e))e+=7,[entityName,val,e]=ru(n,e+1),val.indexOf("&")===-1&&(t[entityName]={regx:RegExp(`&${entityName};`,"g"),val});else if(i&&au(n,e))e+=8;else if(i&&ou(n,e))e+=8;else if(i&&lu(n,e))e+=9;else if(iu)s=!0;else throw new Error("Invalid DOCTYPE");r++,a=""}else if(n[e]===">"){if(s?n[e-1]==="-"&&n[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else n[e]==="["?i=!0:a+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function ru(n,e){let t="";for(;e<n.length&&n[e]!=="'"&&n[e]!=='"';e++)t+=n[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=n[e++];let i="";for(;e<n.length&&n[e]!==r;e++)i+=n[e];return[t,i,e]}function iu(n,e){return n[e+1]==="!"&&n[e+2]==="-"&&n[e+3]==="-"}function su(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="N"&&n[e+4]==="T"&&n[e+5]==="I"&&n[e+6]==="T"&&n[e+7]==="Y"}function au(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="L"&&n[e+4]==="E"&&n[e+5]==="M"&&n[e+6]==="E"&&n[e+7]==="N"&&n[e+8]==="T"}function ou(n,e){return n[e+1]==="!"&&n[e+2]==="A"&&n[e+3]==="T"&&n[e+4]==="T"&&n[e+5]==="L"&&n[e+6]==="I"&&n[e+7]==="S"&&n[e+8]==="T"}function lu(n,e){return n[e+1]==="!"&&n[e+2]==="N"&&n[e+3]==="O"&&n[e+4]==="T"&&n[e+5]==="A"&&n[e+6]==="T"&&n[e+7]==="I"&&n[e+8]==="O"&&n[e+9]==="N"}var cu=nu;const du=/^[-+]?0x[a-fA-F0-9]+$/,fu=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const uu={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function hu(n,e={}){if(e=Object.assign({},uu,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(e.hex&&du.test(t))return Number.parseInt(t,16);{const r=fu.exec(t);if(r){const i=r[1],s=r[2];let a=pu(r[3]);const l=r[4]||r[6];if(!e.leadingZeros&&s.length>0&&i&&t[2]!==".")return n;if(!e.leadingZeros&&s.length>0&&!i&&t[1]!==".")return n;{const o=Number(t),c=""+o;return c.search(/[eE]/)!==-1||l?e.eNotation?o:n:t.indexOf(".")!==-1?c==="0"&&a===""||c===a||i&&c==="-"+a?o:n:s?a===c||i+a===c?o:n:t===c||t===i+c?o:n}}else return n}}function pu(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substr(0,n.length-1))),n}var mu=hu;const ns=Ji,Pn=tu,gu=cu,wu=mu;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,ns.nameRegexp);let bu=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=xu,this.parseXml=Eu,this.parseTextData=vu,this.resolveNameSpace=yu,this.buildAttributesMap=ku,this.isItStopNode=Au,this.replaceEntitiesValue=Tu,this.readStopNodeData=Iu,this.saveTextToParentTag=Su}};function xu(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function vu(n,e,t,r,i,s,a){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){a||(n=this.replaceEntitiesValue(n));const l=this.options.tagValueProcessor(e,n,t,i,s);return l==null?n:typeof l!=typeof n||l!==n?l:this.options.trimValues?Oi(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?Oi(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function yu(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const _u=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ku(n,e){if(!this.options.ignoreAttributes&&typeof n=="string"){const t=ns.getAllMatches(n,_u),r=t.length,i={};for(let s=0;s<r;s++){const a=this.resolveNameSpace(t[s][1]);let l=t[s][4],o=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),o==="__proto__"&&(o="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const c=this.options.attributeValueProcessor(a,l,e);c==null?i[o]=l:typeof c!=typeof l||c!==l?i[o]=c:i[o]=Oi(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[o]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const s={};return s[this.options.attributesGroupName]=i,s}return i}}const Eu=function(n){n=n.replace(/\r\n?/g,`
`);const e=new Pn("!xml");let t=e,r="",i="";for(let s=0;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="/"){const l=rn(n,">",s,"Closing Tag is not closed.");let o=n.substring(s+2,l).trim();if(this.options.removeNSPrefix){const c=o.indexOf(":");c!==-1&&(o=o.substr(c+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),t&&(r=this.saveTextToParentTag(r,t,i)),i=i.substr(0,i.lastIndexOf(".")),t=this.tagsNodeStack.pop(),r="",s=l}else if(n[s+1]==="?"){let l=Fi(n,s,!1,"?>");if(!l)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,i),!(this.options.ignoreDeclaration&&l.tagName==="?xml"||this.options.ignorePiTags)){const o=new Pn(l.tagName);o.add(this.options.textNodeName,""),l.tagName!==l.tagExp&&l.attrExpPresent&&(o[":@"]=this.buildAttributesMap(l.tagExp,i)),t.addChild(o)}s=l.closeIndex+1}else if(n.substr(s+1,3)==="!--"){const l=rn(n,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const o=n.substring(s+4,l-2);r=this.saveTextToParentTag(r,t,i),t.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}s=l}else if(n.substr(s+1,2)==="!D"){const l=gu(n,s);this.docTypeEntities=l.entities,s=l.i}else if(n.substr(s+1,2)==="!["){const l=rn(n,"]]>",s,"CDATA is not closed.")-2,o=n.substring(s+9,l);if(r=this.saveTextToParentTag(r,t,i),this.options.cdataPropName)t.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]);else{let c=this.parseTextData(o,t.tagname,i,!0,!1,!0);c==null&&(c=""),t.add(this.options.textNodeName,c)}s=l+2}else{let l=Fi(n,s,this.options.removeNSPrefix),o=l.tagName,c=l.tagExp,d=l.attrExpPresent,f=l.closeIndex;this.options.transformTagName&&(o=this.options.transformTagName(o)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,i,!1)),o!==e.tagname&&(i+=i?"."+o:o);const u=t;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(t=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,i,o)){let m="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)s=l.closeIndex;else if(this.options.unpairedTags.indexOf(o)!==-1)s=l.closeIndex;else{const h=this.readStopNodeData(n,o,f+1);if(!h)throw new Error(`Unexpected end of ${o}`);s=h.i,m=h.tagContent}const g=new Pn(o);o!==c&&d&&(g[":@"]=this.buildAttributesMap(c,i)),m&&(m=this.parseTextData(m,o,i,!0,d,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),g.add(this.options.textNodeName,m),t.addChild(g)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){o[o.length-1]==="/"?(o=o.substr(0,o.length-1),c=o):c=c.substr(0,c.length-1),this.options.transformTagName&&(o=this.options.transformTagName(o));const m=new Pn(o);o!==c&&d&&(m[":@"]=this.buildAttributesMap(c,i)),i=i.substr(0,i.lastIndexOf(".")),t.addChild(m)}else{const m=new Pn(o);this.tagsNodeStack.push(t),o!==c&&d&&(m[":@"]=this.buildAttributesMap(c,i)),t.addChild(m),t=m}r="",s=f}}else r+=n[s];return e.child},Tu=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function Su(n,e,t,r){return n&&(r===void 0&&(r=Object.keys(e.child).length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function Au(n,e,t){const r="*."+t;for(const i in n){const s=n[i];if(r===s||e===s)return!0}return!1}function Cu(n,e,t=">"){let r,i="";for(let s=e;s<n.length;s++){let a=n[s];if(r)a===r&&(r="");else if(a==='"'||a==="'")r=a;else if(a===t[0])if(t[1]){if(n[s+1]===t[1])return{data:i,index:s}}else return{data:i,index:s};else a==="	"&&(a=" ");i+=a}}function rn(n,e,t,r){const i=n.indexOf(e,t);if(i===-1)throw new Error(r);return i+e.length-1}function Fi(n,e,t,r=">"){const i=Cu(n,e+1,r);if(!i)return;let s=i.data;const a=i.index,l=s.search(/\s/);let o=s,c=!0;if(l!==-1&&(o=s.substr(0,l).replace(/\s\s*$/,""),s=s.substr(l+1)),t){const d=o.indexOf(":");d!==-1&&(o=o.substr(d+1),c=o!==i.data.substr(d+1))}return{tagName:o,tagExp:s,closeIndex:a,attrExpPresent:c}}function Iu(n,e,t){const r=t;let i=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const s=rn(n,">",t,`${e} is not closed`);if(n.substring(t+2,s).trim()===e&&(i--,i===0))return{tagContent:n.substring(r,t),i:s};t=s}else if(n[t+1]==="?")t=rn(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=rn(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=rn(n,"]]>",t,"StopNode is not closed.")-2;else{const s=Fi(n,t,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&i++,t=s.closeIndex)}}function Oi(n,e,t){if(e&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:wu(n,t)}else return ns.isExist(n)?n:""}var Bu=bu,nl={};function Pu(n,e){return rl(n,e)}function rl(n,e,t){let r;const i={};for(let s=0;s<n.length;s++){const a=n[s],l=Nu(a);let o="";if(t===void 0?o=l:o=t+"."+l,l===e.textNodeName)r===void 0?r=a[l]:r+=""+a[l];else{if(l===void 0)continue;if(a[l]){let c=rl(a[l],e,o);const d=Ou(c,e);a[":@"]?Fu(c,a[":@"],o,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),i[l]!==void 0&&i.hasOwnProperty(l)?(Array.isArray(i[l])||(i[l]=[i[l]]),i[l].push(c)):e.isArray(l,o,d)?i[l]=[c]:i[l]=c}}}return typeof r=="string"?r.length>0&&(i[e.textNodeName]=r):r!==void 0&&(i[e.textNodeName]=r),i}function Nu(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function Fu(n,e,t,r){if(e){const i=Object.keys(e),s=i.length;for(let a=0;a<s;a++){const l=i[a];r.isArray(l,t+"."+l,!0,!0)?n[l]=[e[l]]:n[l]=e[l]}}}function Ou(n,e){const t=Object.keys(n).length;return!!(t===0||t===1&&n[e.textNodeName])}nl.prettify=Pu;const{buildOptions:Ru}=ts,Du=Bu,{prettify:Mu}=nl,Lu=Yi;let Uu=class{constructor(e){this.externalEntities={},this.options=Ru(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const s=Lu.validate(e,t);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new Du(this.options);r.addExternalEntities(this.externalEntities);const i=r.parseXml(e);return this.options.preserveOrder||i===void 0?i:Mu(i,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var Vu=Uu;const $u=`
`;function ju(n,e){let t="";return e.format&&e.indentBy.length>0&&(t=$u),il(n,e,"",t)}function il(n,e,t,r){let i="",s=!1;for(let a=0;a<n.length;a++){const l=n[a],o=Wu(l);let c="";if(t.length===0?c=o:c=`${t}.${o}`,o===e.textNodeName){let g=l[o];Hu(c,e)||(g=e.tagValueProcessor(o,g),g=sl(g,e)),s&&(i+=r),i+=g,s=!1;continue}else if(o===e.cdataPropName){s&&(i+=r),i+=`<![CDATA[${l[o][0][e.textNodeName]}]]>`,s=!1;continue}else if(o===e.commentPropName){i+=r+`<!--${l[o][0][e.textNodeName]}-->`,s=!0;continue}else if(o[0]==="?"){const g=ka(l[":@"],e),h=o==="?xml"?"":r;let p=l[o][0][e.textNodeName];p=p.length!==0?" "+p:"",i+=h+`<${o}${p}${g}?>`,s=!0;continue}let d=r;d!==""&&(d+=e.indentBy);const f=ka(l[":@"],e),u=r+`<${o}${f}`,m=il(l[o],e,c,d);e.unpairedTags.indexOf(o)!==-1?e.suppressUnpairedNode?i+=u+">":i+=u+"/>":(!m||m.length===0)&&e.suppressEmptyNode?i+=u+"/>":m&&m.endsWith(">")?i+=u+`>${m}${r}</${o}>`:(i+=u+">",m&&r!==""&&(m.includes("/>")||m.includes("</"))?i+=r+e.indentBy+m+r:i+=m,i+=`</${o}>`),s=!0}return i}function Wu(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function ka(n,e){let t="";if(n&&!e.ignoreAttributes)for(let r in n){let i=e.attributeValueProcessor(r,n[r]);i=sl(i,e),i===!0&&e.suppressBooleanAttributes?t+=` ${r.substr(e.attributeNamePrefix.length)}`:t+=` ${r.substr(e.attributeNamePrefix.length)}="${i}"`}return t}function Hu(n,e){n=n.substr(0,n.length-e.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===n||e.stopNodes[r]==="*."+t)return!0;return!1}function sl(n,e){if(n&&n.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const r=e.entities[t];n=n.replace(r.regex,r.val)}return n}var qu=ju;const Zu=qu,Gu={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function Kt(n){this.options=Object.assign({},Gu,n),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ku),this.processTextOrObjNode=Xu,this.options.format?(this.indentate=zu,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Kt.prototype.build=function(n){return this.options.preserveOrder?Zu(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0).val)};Kt.prototype.j2x=function(n,e){let t="",r="";for(let i in n)if(!(typeof n[i]>"u"))if(n[i]===null)i[0]==="?"?r+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(n[i]instanceof Date)r+=this.buildTextValNode(n[i],i,"",e);else if(typeof n[i]!="object"){const s=this.isAttribute(i);if(s)t+=this.buildAttrPairStr(s,""+n[i]);else if(i===this.options.textNodeName){let a=this.options.tagValueProcessor(i,""+n[i]);r+=this.replaceEntitiesValue(a)}else r+=this.buildTextValNode(n[i],i,"",e)}else if(Array.isArray(n[i])){const s=n[i].length;for(let a=0;a<s;a++){const l=n[i][a];typeof l>"u"||(l===null?i[0]==="?"?r+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+i+"/"+this.tagEndChar:typeof l=="object"?r+=this.processTextOrObjNode(l,i,e):r+=this.buildTextValNode(l,i,"",e))}}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){const s=Object.keys(n[i]),a=s.length;for(let l=0;l<a;l++)t+=this.buildAttrPairStr(s[l],""+n[i][s[l]])}else r+=this.processTextOrObjNode(n[i],i,e);return{attrStr:t,val:r}};Kt.prototype.buildAttrPairStr=function(n,e){return e=this.options.attributeValueProcessor(n,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+n:" "+n+'="'+e+'"'};function Xu(n,e,t){const r=this.j2x(n,t+1);return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],e,r.attrStr,t):this.buildObjectNode(r.val,e,r.attrStr,t)}Kt.prototype.buildObjectNode=function(n,e,t,r){if(n==="")return e[0]==="?"?this.indentate(r)+"<"+e+t+"?"+this.tagEndChar:this.indentate(r)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let i="</"+e+this.tagEndChar,s="";return e[0]==="?"&&(s="?",i=""),t&&n.indexOf("<")===-1?this.indentate(r)+"<"+e+t+s+">"+n+i:this.options.commentPropName!==!1&&e===this.options.commentPropName&&s.length===0?this.indentate(r)+`<!--${n}-->`+this.newLine:this.indentate(r)+"<"+e+t+s+this.tagEndChar+n+this.indentate(r)+i}};Kt.prototype.closeTag=function(n){let e="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${n}`,e};Kt.prototype.buildTextValNode=function(n,e,t,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+`<!--${n}-->`+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+t+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(e,n);return i=this.replaceEntitiesValue(i),i===""?this.indentate(r)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+t+">"+i+"</"+e+this.tagEndChar}};Kt.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];n=n.replace(t.regex,t.val)}return n};function zu(n){return this.options.indentBy.repeat(n)}function Ku(n){return n.startsWith(this.options.attributeNamePrefix)?n.substr(this.attrPrefixLen):!1}var Qu=Kt;const Yu=Yi,Ju=Vu,e0=Qu;var al={XMLParser:Ju,XMLValidator:Yu,XMLBuilder:e0};function wt(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function Ea(n,e){for(var t="",r=0,i=-1,s=0,a,l=0;l<=n.length;++l){if(l<n.length)a=n.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(i===l-1||s===1))if(i!==l-1&&s===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var o=t.lastIndexOf("/");if(o!==t.length-1){o===-1?(t="",r=0):(t=t.slice(0,o),r=t.length-1-t.lastIndexOf("/")),i=l,s=0;continue}}else if(t.length===2||t.length===1){t="",r=0,i=l,s=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+n.slice(i+1,l):t=n.slice(i+1,l),r=l-i-1;i=l,s=0}else a===46&&s!==-1?++s:s=-1}return t}function t0(n,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+n+r:r}var xn={resolve:function(){for(var e="",t=!1,r,i=arguments.length-1;i>=-1&&!t;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=process.cwd()),s=r),wt(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=Ea(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(wt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Ea(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return wt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];wt(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":xn.normalize(e)},relative:function(e,t){if(wt(e),wt(t),e===t||(e=xn.resolve(e),t=xn.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var l=t.length,o=l-a,c=s<o?s:o,d=-1,f=0;f<=c;++f){if(f===c){if(o>c){if(t.charCodeAt(a+f)===47)return t.slice(a+f+1);if(f===0)return t.slice(a+f)}else s>c&&(e.charCodeAt(r+f)===47?d=f:f===0&&(d=0));break}var u=e.charCodeAt(r+f),m=t.charCodeAt(a+f);if(u!==m)break;u===47&&(d=f)}var g="";for(f=r+d+1;f<=i;++f)(f===i||e.charCodeAt(f)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+t.slice(a+d):(a+=d,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(wt(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,i=-1,s=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!s){i=a;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');wt(e);var r=0,i=-1,s=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var l=t.length-1,o=-1;for(a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(c===47){if(!s){r=a+1;break}}else o===-1&&(s=!1,o=a+1),l>=0&&(c===t.charCodeAt(l)?--l===-1&&(i=a):(l=-1,i=o))}return r===i?i=o:i===-1&&(i=e.length),e.slice(r,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":e.slice(r,i)}},extname:function(e){wt(e);for(var t=-1,r=0,i=-1,s=!0,a=0,l=e.length-1;l>=0;--l){var o=e.charCodeAt(l);if(o===47){if(!s){r=l+1;break}continue}i===-1&&(s=!1,i=l+1),o===46?t===-1?t=l:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||i===-1||a===0||a===1&&t===i-1&&t===r+1?"":e.slice(t,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t0("/",e)},parse:function(e){wt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),i=r===47,s;i?(t.root="/",s=1):s=0;for(var a=-1,l=0,o=-1,c=!0,d=e.length-1,f=0;d>=s;--d){if(r=e.charCodeAt(d),r===47){if(!c){l=d+1;break}continue}o===-1&&(c=!1,o=d+1),r===46?a===-1?a=d:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||o===-1||f===0||f===1&&a===o-1&&a===l+1?o!==-1&&(l===0&&i?t.base=t.name=e.slice(1,o):t.base=t.name=e.slice(l,o)):(l===0&&i?(t.name=e.slice(1,a),t.base=e.slice(1,o)):(t.name=e.slice(l,a),t.base=e.slice(l,o)),t.ext=e.slice(a,o)),l>0?t.dir=e.slice(0,l-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};xn.posix=xn;var Vt=xn,Ri={},n0={get exports(){return Ri},set exports(n){Ri=n}};(function(n,e){(function(t,r){var i="1.0.34",s="",a="?",l="function",o="undefined",c="object",d="string",f="major",u="model",m="name",g="type",h="vendor",p="version",w="architecture",x="console",b="mobile",y="tablet",v="smarttv",_="wearable",k="embedded",T=350,C="Amazon",S="Apple",A="ASUS",R="BlackBerry",F="Browser",V="Chrome",O="Edge",L="Firefox",j="Google",q="Huawei",ve="LG",U="Microsoft",Ee="Motorola",Z="Opera",X="Samsung",ze="Sharp",pe="Sony",te="Xiaomi",Qt="Zebra",_t="Facebook",Ke="Chromium OS",ht="Mac OS",rt=function(z,J){var W={};for(var ne in z)J[ne]&&J[ne].length%2===0?W[ne]=J[ne].concat(z[ne]):W[ne]=z[ne];return W},ye=function(z){for(var J={},W=0;W<z.length;W++)J[z[W].toUpperCase()]=z[W];return J},pt=function(z,J){return typeof z===d?le(J).indexOf(le(z))!==-1:!1},le=function(z){return z.toLowerCase()},ce=function(z){return typeof z===d?z.replace(/[^\d\.]/g,s).split(".")[0]:r},de=function(z,J){if(typeof z===d)return z=z.replace(/^\s\s*/,s),typeof J===o?z:z.substring(0,T)},Qe=function(z,J){for(var W=0,ne,mt,$e,D,Yt,Ye;W<J.length&&!Yt;){var E=J[W],P=J[W+1];for(ne=mt=0;ne<E.length&&!Yt&&E[ne];)if(Yt=E[ne++].exec(z),Yt)for($e=0;$e<P.length;$e++)Ye=Yt[++mt],D=P[$e],typeof D===c&&D.length>0?D.length===2?typeof D[1]==l?this[D[0]]=D[1].call(this,Ye):this[D[0]]=D[1]:D.length===3?typeof D[1]===l&&!(D[1].exec&&D[1].test)?this[D[0]]=Ye?D[1].call(this,Ye,D[2]):r:this[D[0]]=Ye?Ye.replace(D[1],D[2]):r:D.length===4&&(this[D[0]]=Ye?D[3].call(this,Ye.replace(D[1],D[2])):r):this[D]=Ye||r;W+=2}},kn=function(z,J){for(var W in J)if(typeof J[W]===c&&J[W].length>0){for(var ne=0;ne<J[W].length;ne++)if(pt(J[W][ne],z))return W===a?r:W}else if(pt(J[W],z))return W===a?r:W;return z},zn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Kn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ot={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,p],[/opios[\/ ]+([\w\.]+)/i],[p,[m,Z+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[m,Z]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[m,"UC"+F]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+F],p],[/\bfocus\/([\w\.]+)/i],[p,[m,L+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[m,Z+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[m,Z+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[m,"MIUI "+F]],[/fxios\/([-\w\.]+)/i],[p,[m,L]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+F]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+F],p],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,_t],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[m,V+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,V+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[m,"Android "+F]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[p,kn,zn]],[/(webkit|khtml)\/([\w\.]+)/i],[m,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[m,L+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[m,p],[/(cobalt)\/([\w\.]+)/i],[m,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,le]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,s,le]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,le]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,X],[g,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,X],[g,b]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[h,S],[g,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,S],[g,y]],[/(macintosh);/i],[u,[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,ze],[g,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,q],[g,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,q],[g,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[h,te],[g,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,te],[g,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[g,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[g,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[g,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,Ee],[g,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,Ee],[g,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,ve],[g,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,ve],[g,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[g,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[g,b]],[/(pixel c)\b/i],[u,[h,j],[g,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,j],[g,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,pe],[g,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,pe],[g,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[g,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,C],[g,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,C],[g,b]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[g,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,R],[g,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,A],[g,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,A],[g,b]],[/(nexus 9)/i],[u,[h,"HTC"],[g,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[g,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[g,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[g,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[g,b]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[g,y]],[/(surface duo)/i],[u,[h,U],[g,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[g,b]],[/(u304aa)/i],[u,[h,"AT&T"],[g,b]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[g,b]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[g,y]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[g,y]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[g,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[g,y]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[g,y]],[/\b(k88) b/i],[u,[h,"ZTE"],[g,y]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[g,b]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[g,b]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[g,y]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[g,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[g,y]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[g,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[g,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[g,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[g,b]],[/\b(ph-1) /i],[u,[h,"Essential"],[g,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[g,y]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[g,y]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[g,y]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[g,y]],[/(sprint) (\w+)/i],[h,u,[g,b]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,U],[g,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,Qt],[g,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,Qt],[g,b]],[/smart-tv.+(samsung)/i],[h,[g,v]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,X],[g,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,ve],[g,v]],[/(apple) ?tv/i],[h,[u,S+" TV"],[g,v]],[/crkey/i],[[u,V+"cast"],[h,j],[g,v]],[/droid.+aft(\w)( bui|\))/i],[u,[h,C],[g,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,ze],[g,v]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,pe],[g,v]],[/(mitv-\w{5}) bui/i],[u,[h,te],[g,v]],[/Hbbtv.*(technisat) (.*);/i],[h,u,[g,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,de],[u,de],[g,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[g,x]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[g,x]],[/(playstation [345portablevi]+)/i],[u,[h,pe],[g,x]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,U],[g,x]],[/((pebble))app/i],[h,u,[g,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[h,S],[g,_]],[/droid.+; (glass) \d/i],[u,[h,j],[g,_]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,Qt],[g,_]],[/(quest( 2| pro)?)/i],[u,[h,_t],[g,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[g,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[g,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[g,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,b]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[m,O+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[p,kn,Kn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[p,kn,Kn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,ht],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,p],[/\(bb(10);/i],[p,[m,R]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[m,L+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[m,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[m,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[m,V+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[m,Ke],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,p],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,p]]},Oe=function(z,J){if(typeof z===c&&(J=z,z=r),!(this instanceof Oe))return new Oe(z,J).getResult();var W=typeof t!==o&&t.navigator?t.navigator:r,ne=z||(W&&W.userAgent?W.userAgent:s),mt=W&&W.userAgentData?W.userAgentData:r,$e=J?rt(Ot,J):Ot;return this.getBrowser=function(){var D={};return D[m]=r,D[p]=r,Qe.call(D,ne,$e.browser),D[f]=ce(D[p]),W&&W.brave&&typeof W.brave.isBrave==l&&(D[m]="Brave"),D},this.getCPU=function(){var D={};return D[w]=r,Qe.call(D,ne,$e.cpu),D},this.getDevice=function(){var D={};return D[h]=r,D[u]=r,D[g]=r,Qe.call(D,ne,$e.device),!D[g]&&mt&&mt.mobile&&(D[g]=b),D[u]=="Macintosh"&&W&&typeof W.standalone!==o&&W.maxTouchPoints&&W.maxTouchPoints>2&&(D[u]="iPad",D[g]=y),D},this.getEngine=function(){var D={};return D[m]=r,D[p]=r,Qe.call(D,ne,$e.engine),D},this.getOS=function(){var D={};return D[m]=r,D[p]=r,Qe.call(D,ne,$e.os),!D[m]&&mt&&mt.platform!="Unknown"&&(D[m]=mt.platform.replace(/chrome os/i,Ke).replace(/macos/i,ht)),D},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ne},this.setUA=function(D){return ne=typeof D===d&&D.length>T?de(D,T):D,this},this.setUA(ne),this};Oe.VERSION=i,Oe.BROWSER=ye([m,p,f]),Oe.CPU=ye([w]),Oe.DEVICE=ye([u,h,g,x,b,v,y,_,k]),Oe.ENGINE=Oe.OS=ye([m,p]),n.exports&&(e=n.exports=Oe),e.UAParser=Oe;var kt=typeof t!==o&&(t.jQuery||t.Zepto);if(kt&&!kt.ua){var cn=new Oe;kt.ua=cn.getResult(),kt.ua.get=function(){return cn.getUA()},kt.ua.set=function(z){cn.setUA(z);var J=cn.getResult();for(var W in J)kt.ua[W]=J[W]}}})(typeof window=="object"?window:Wf)})(n0,Ri);/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function ol(){Mr({useWebWorkers:!1})}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */ol();async function r0(n){const e=new Ur(new yn(n)),t=await e.getEntries(),r={};let i="",s;if(t.length){const a=t.reduce((g,h)=>(g[h.filename]=h,g),{}),l=await a["META-INF/container.xml"].getData(new wn),o=new al.XMLParser({ignoreAttributes:!1}),d=o.parse(l).container.rootfiles.rootfile,u=(Array.isArray(d)?d[0]:d)["@_full-path"],m=await a[u].getData(new wn);r[u]=m,i=Vt.dirname(u),s=o.parse(m),await Promise.all(s.package.manifest.item.map(async g=>{const h=g["@_href"],p=a[Vt.join(i,h)];if(p.getData&&!p.directory){let w;const x=g["@_media-type"];x.startsWith("image/")?w=await p.getData(new ft(x)):w=await p.getData(new wn),r[h]=w}}))}return await e.close(),{contentsDirectory:i,contents:s,result:r}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function ll(n){return`data:image/gif;ttu:${n};base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==`}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function cl(n){const e=(t,r)=>{const i=t.getAttribute(r);i&&!(i.startsWith("ttu:")||i.startsWith("data:image/gif;ttu:"))&&(t.setAttribute(`data-ttu-${r}`,i),t.removeAttribute(r))};Array.from(n.getElementsByTagName("image")).forEach(t=>{e(t,"href")}),Array.from(n.getElementsByTagName("img")).forEach(t=>{e(t,"src")})}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function dl(n){Array.from(n.getElementsByTagName("image")).filter(e=>!e.getAttributeNames().some(t=>t==="href")).forEach(e=>{const t=Array.from(e.attributes).find(r=>r.name.endsWith("href"));t&&e.setAttribute("href",t.value)})}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function i0(n){return Array.from(n.classList).some(e=>e.includes("gaiji"))}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function rs(n){return n instanceof HTMLImageElement?i0(n):!1}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function s0(n){return rs(n)?1:o0(n)}const a0=/[^0-9A-Z○◯々-〇〻ぁ-ゖゝ-ゞァ-ヺー０-９Ａ-Ｚｦ-ﾝ\p{Radical}\p{Unified_Ideograph}]+/gimu;function o0(n){return n.textContent?l0(n.textContent.replace(a0,"")):0}function l0(n){return Array.from(n).length}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function c0(n){return fl(n,e=>!(e.nodeName==="RT"||e instanceof HTMLElement&&(e.attributes.getNamedItem("aria-hidden")||e.attributes.getNamedItem("hidden")))).filter(e=>{var t;return!!(rs(e)||(t=e.textContent)!=null&&t.replace(/\s/g,"").length)})}function fl(n,e){return!n.hasChildNodes()||!e(n)?[]:Array.from(n.childNodes).flatMap(t=>t.nodeType===Node.TEXT_NODE?[t]:rs(t)?[t]:fl(t,e)).filter(e)}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const Nn="ttu-";function d0(n,e,t){let r={type:3,content:""},i="";const s=e.package.manifest.item.reduce((x,b)=>(b["@_media-type"]==="application/xhtml+xml"&&(x[b["@_id"]]=b["@_href"],b["@_properties"]==="nav"&&(i=b["@_href"])),x),{}),a=Object.entries(n).reduce((x,[b,y])=>{const v=b.endsWith(".ncx")&&!r.content;return(v||i===b)&&(r={type:v?2:3,content:y}),y instanceof Blob&&x.push(b),x},[]),l=new DOMParser,o=Array.isArray(e.package.spine.itemref)?e.package.spine.itemref:[e.package.spine.itemref],c=[],d=t.createElement("div");let f=[],u=-1;if(r.type&&r.content){let x=l.parseFromString(r.content,"text/html");if(r.type===3){let b=x.querySelector('nav[epub\\:type="toc"],nav#toc');b||(x=l.parseFromString(r.content,"text/xml")),b=x.querySelector('nav[epub\\:type="toc"],nav#toc'),b&&(f=[...b.querySelectorAll("a")].map(y=>{const v=y;return{reference:v.href,charactersWeight:1,label:v.innerText}}))}else f=[...x.querySelectorAll("navPoint")].map(b=>{const y=b.querySelector("navLabel text");return{reference:b.querySelector("content").getAttribute("src"),charactersWeight:1,label:y.innerText}})}f.length&&(u=o.findIndex(x=>f[0].reference.includes(s[x["@_idref"].split("/").pop()||""])),u!==0&&f.unshift({reference:s[o[0]["@_idref"]],charactersWeight:1,label:"Preface",startCharacter:0}));let m=f[0],g=m?`${Nn}${o[0]["@_idref"]}`:"",h=0,p=0,w=0;return o.forEach(x=>{var R,F;const b=x["@_idref"],y=s[b],v=/.*<body(?:[^>]*id="(?<id>.+?)")*[^>]*>(?<body>(.|\s)+)<\/body>.*/.exec(n[y]),_=((R=v==null?void 0:v.groups)==null?void 0:R.id)||"";let k=((F=v==null?void 0:v.groups)==null?void 0:F.body)||"";a.forEach(V=>{k=k.replaceAll(h0(y,V),ll(V))});const T=t.createElement("div");if(T.innerHTML=k,T.id=`${Nn}${b}`,_){const V=t.createElement("span");V.id=_,T.prepend(V)}d.appendChild(T),w+=f0(T);const C=f.findIndex(V=>V.reference.includes(y.split("/").pop()||"")),S=C>-1?f[C]:void 0,A=w-p;if(S){const V=h;m=S,h=c.length,g=`${Nn}${b}`,c.push({reference:g,charactersWeight:A||1,label:m.label,startCharacter:h?c[V].startCharacter+c[V].characters:0,characters:A})}else m&&(c[h].characters+=A,c.push({reference:`${Nn}${b}`,charactersWeight:A||1,parentChapter:g}));p=w}),cl(d),dl(d),u0(d),{element:d,characters:w,sections:c.filter(x=>x.reference.startsWith(Nn))}}function f0(n){const e=c0(n);let t=0;return e.forEach(r=>{t+=s0(r)}),t}function u0(n){Array.from(n.getElementsByTagName("a")).forEach(e=>{const t=e.getAttribute("href");t&&e.setAttribute("href",`#${t.replace(/.+#/,"")}`)})}function h0(n,e){const t=Vt.dirname(n),r=Vt.dirname(e),i=Vt.basename(e);if(t===r)return i;const s=t==="."?[]:t.split("/"),a=r==="."?[]:r.split("/");if(s.length>=a.length){for(let l=0;l<s.length;l+=1)if(s[l]!==a[l])return Vt.join("../".repeat(s.length-l)+a.slice(l).join("/"),i)}for(let l=0;l<s.length;l+=1)if(s[l]!==a[l])return Vt.join("../".repeat(s.length-l)+a.slice(l).join("/"),i);return Vt.join(a.slice(s.length-a.length).join("/"),i)}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function p0(n,e){let t="";const r=e.package.manifest.item.filter(i=>i["@_media-type"]==="text/css").map(i=>i["@_href"]);if(r.length){const i=new Set(r),s=Array.from(i).reduce((a,l)=>a+n[l],"");s&&(t=s)}return t}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function m0(n){var i;const e=n.package.manifest.item.find(s=>s["@_properties"]==="cover-image");if(e)return e["@_href"];const{meta:t}=n.package.metadata;if(!t)return;const r=Array.isArray(t)?t.map(s=>Ta(s)).find(s=>s):Ta(t);if(r)return(i=n.package.manifest.item.find(s=>s["@_id"]===r))==null?void 0:i["@_href"]}function Ta(n){if(n["@_name"]==="cover")return n["@_content"]}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function ul(n){return Object.entries(n).filter(e=>e[1]instanceof Blob).reduce((e,[t,r])=>(e[t]=r,e),{})}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */async function g0(n,e,t){const{contents:r,result:i}=await r0(n),s=d0(i,r,e),a={title:n.name,hasThumb:!0,styleSheet:p0(i,r)},{metadata:l}=r.package;if(l){const f=l["dc:title"];typeof f=="string"?a.title=f:f&&f["#text"]&&(a.title=f["#text"])}const o=ul(i),c=m0(r);let d;return c&&(d=o[c]),{...a,elementHtml:s.element.innerHTML,blobs:o,coverImage:d,characters:s.characters,sections:s.sections,lastBookModified:t,lastBookOpen:0}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */ol();async function w0(n){const e=new Ur(new yn(n)),t=await e.getEntries(),r={"index.html":"","metadata.opf":"","style.css":""};return t.length&&await Promise.all(t.map(async i=>{if(i.getData&&!i.directory){let s;switch(i.filename){case"index.html":case"metadata.opf":case"style.css":s=await i.getData(new wn);break;default:s=await i.getData(new ft(b0(i.filename)))}r[i.filename]=s}})),await e.close(),r}function b0(n){const e=/.*\.([^.]+)$/.exec(n);if(e)switch(e[1].toLowerCase()){case"gif":return"image/gif";case"png":return"image/png";case"jpg":case"jpeg":case"jfif":case"jfi":return"image/jpeg";case"bmp":return"image/bmp";case"webp":return"image/webp"}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function x0(n,e){let r=/.*<body[^>]*>((.|\s)+)<\/body>.*/.exec(n["index.html"])[1];Object.entries(n).filter(([,s])=>s instanceof Blob).forEach(([s])=>{r=r.replaceAll(s,ll(s))});const i=e.createElement("div");return i.innerHTML=r,cl(i),dl(i),i}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function v0(){return"cover.jpg"}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */async function y0(n,e,t){var f,u;const r=await w0(n),i=x0(r,e),a=(u=(f=new al.XMLParser().parse(r["metadata.opf"]))==null?void 0:f.package)==null?void 0:u.metadata,l={title:n.name,hasThumb:!0,styleSheet:r["style.css"]};a&&a["dc:title"]&&(l.title=a["dc:title"]);const o=ul(r),c=v0();let d;return d=o[c],delete o[c],{...l,elementHtml:i.innerHTML,blobs:o,coverImage:d,characters:0,lastBookModified:t,lastBookOpen:0}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */class hl extends Error{constructor(){super(...arguments);$(this,"name","AbortError")}}function Bt(n){if(n){if(typeof n.throwIfAborted=="function")n.throwIfAborted();else if(n.aborted)throw new hl("User canceled")}}let _0=class{constructor(e){$(this,"value");$(this,"next");this.value=e}};var bt,sn,an;class k0{constructor(){Qn(this,bt,void 0);Qn(this,sn,void 0);Qn(this,an,void 0);this.clear()}enqueue(e){const t=new _0(e);Rt(this,bt)?(Rt(this,sn).next=t,Et(this,sn,t)):(Et(this,bt,t),Et(this,sn,t)),jr(this,an)._++}dequeue(){const e=Rt(this,bt);if(e)return Et(this,bt,Rt(this,bt).next),jr(this,an)._--,e.value}clear(){Et(this,bt,void 0),Et(this,sn,void 0),Et(this,an,0)}get size(){return Rt(this,an)}*[Symbol.iterator](){let e=Rt(this,bt);for(;e;)yield e.value,e=e.next}}bt=new WeakMap,sn=new WeakMap,an=new WeakMap;function ut(n){if(!((Number.isInteger(n)||n===Number.POSITIVE_INFINITY)&&n>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const e=new k0;let t=0;const r=()=>{t--,e.size>0&&e.dequeue()()},i=async(l,o,c)=>{t++;const d=(async()=>l(...c))();o(d);try{await d}catch{}r()},s=(l,o,c)=>{e.enqueue(i.bind(void 0,l,o,c)),(async()=>(await Promise.resolve(),t<n&&e.size>0&&e.dequeue()()))()},a=(l,...o)=>new Promise(c=>{s(l,c,o)});return Object.defineProperties(a,{activeCount:{get:()=>t},pendingCount:{get:()=>e.size},clearQueue:{value:()=>{e.clear()}}}),a}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const dr=1;async function zh(n,e,t,r){const i=[],s=[],a=new Date().getTime(),l=3,o=l*t.length,c=ut(1);let d="";return qt.next({progressBase:l,maxProgress:o}),await pl(e.storageType),e.isCacheDisabled()&&e.clearData(!1),t.forEach(f=>s.push(c(async()=>{let u=f.name;try{Bt(r);const m=await(f.name.endsWith(".epub")?g0(f,n,a):y0(f,n,a));Ne(r,!0,!0),u=m.title,e.startContext({title:m.title,imagePath:m.coverImage||""},r),i.push(await e.saveBook(m,!1)),Ne(r,!1),m.coverImage&&await e.saveCover(m.coverImage),re.dataListChanged$.next(e),Ne(r,!0,!m.coverImage)}catch(m){d=Wn(m,`Error importing ${u}: `,[c])}}))),await Promise.all(s).catch(()=>{}),{error:d,dataId:t.length===1?i[i.length-1]:void 0}}async function Kh(n,e,t,r){return E0(n,e,!0,await n.setBackupZip(t),[vn.DATA,vn.PROGRESS],r)}async function E0(n,e,t,r,i,s){const a=i.length*4+2,l=a*r.length,o=i.includes(vn.DATA),c=i.includes(vn.PROGRESS),d=ut(1),f=[];let u="",m=0;return qt.next({progressBase:a,maxProgress:l}),await pl(e.storageType),[n,e].forEach(g=>{g.isCacheDisabled()&&g.clearData(!1)}),r.forEach(g=>f.push(d(async()=>{try{Bt(s);let h=!1;if(n.startContext(g,s),e.startContext(g,s),o)if(await e.isBookPresentAndUpToDate(await n.getFilenameForRecentCheck("bookdata_")))Ne(s,!0,!0),Ne(s,!0,!0);else{const p=await n.getBook();Ne(s),p&&(await e.saveBook(p),h=!0),Ne(s,i.length===1,!p)}if(c)if(await e.isProgressPresentAndUpToDate(await n.getFilenameForRecentCheck("progress_")))Ne(s,!h,!0),Ne(s,!h,!0);else{const p=await n.getProgress();Ne(s,!h),p&&(await e.saveProgress(p),h=!0),Ne(s,!h,!p)}if(h){const p=await n.getCover();Ne(s,!p),await e.saveCover(p),Ne(s),t&&re.dataListChanged$.next(e),e.storageType===G.BROWSER&&c&&re.bookmarksChanged$.next()}else Ne(s,!0,!0),Ne(s,!0,!0);m+=1}catch(h){u=Wn(h,`Error Processing ${g.title}: `,[d])}}))),await Promise.all(f).catch(()=>{}),e instanceof ml&&await e.createExportZip(document,(s==null?void 0:s.aborted)||!m).catch(g=>{u=g.message}),u}async function pl(n){if(n===G.BROWSER&&Sl.getValue())try{await qc.persist()}catch{}}function Ne(n,e=!0,t=!1){e&&Bt(n),t&&I.reportProgress(),I.completeStep()}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const We=class{constructor(e,t){$(this,"storageType");$(this,"window");$(this,"storageSourceName",qi);$(this,"isForBrowser",!1);$(this,"cacheStorageData",!1);$(this,"saveBehavior",be.NewOnly);$(this,"askForStorageUnlock",!0);$(this,"currentContext",{title:""});$(this,"cancelSignal");$(this,"currentLastProgressValue",0);$(this,"currentProgressBase",0);$(this,"sanitizedTitle","");$(this,"dataListFetched",!1);$(this,"titleToBookCard",new Map);this.window=e,this.storageType=t}static getBookCharacters(e,t){if(e)return e;const r=[...t].reverse().find(s=>s.startCharacter!==void 0&&s.characters!==void 0);let i=0;return r!=null&&r.startCharacter&&r.characters&&(i=r.startCharacter+r.characters),i}static reportProgress(e=1){qt.next({progressToAdd:e})}static completeStep(){qt.next({completeStep:!0})}isCacheDisabled(){return!this.cacheStorageData}getCurrentStorageSource(){return this.storageSourceName}startContext(e,t){this.currentContext=e,this.cancelSignal=t,this.currentLastProgressValue=0,this.currentProgressBase=0,this.sanitizedTitle=We.sanitizeForFilename(this.currentContext.title)}addBookCard(e,t){const r={...this.titleToBookCard.get(e)||{id:We.getDummyId(),title:e,imagePath:"",characters:0,lastBookModified:0,lastBookOpen:0,progress:0,lastBookmarkModified:0,isPlaceholder:!1},...t};this.titleToBookCard.set(e,r)}async zipBookData(e,t=1){const r=new ba(new ft("application/zip")),i=[],s=[...Object.entries(e.blobs)],a=["title","styleSheet","elementHtml","sections"],l={},o=ut(1),c=e.coverImage,d=c instanceof Blob,f=s.length+a.length+(d?1:0),u=t/f;for(let g=0,{length:h}=s;g<h;g+=1)i.push(o(async()=>{const[p,w]=s[g];await this.addDataToZip(`blobs/${p}`,w,r,u).catch(x=>{throw o.clearQueue(),x})}));await Promise.all(i),d&&await this.addDataToZip(`cover.${await We.determineImageExtension(c)}`,c,r,u);for(let g=0,{length:h}=a;g<h;g+=1){Bt(this.cancelSignal);const p=a[g];l[p]=e[p]}return Object.keys(l).length&&await this.addDataToZip("staticdata.json",JSON.stringify(l),r,u),await r.close()}async addDataToZip(e,t,r,i=1){Bt(this.cancelSignal);const s=r||new ba(new ft("application/zip"));return this.currentLastProgressValue=0,this.currentProgressBase=i,t instanceof Blob?await s.add(e,new yn(t),{onprogress:(...a)=>this.reportFunction(...a)}):t&&await s.add(e,new ef(t),{onprogress:(...a)=>this.reportFunction(...a)}),s}reportFunction(e,t){if(this.currentProgressBase){const r=e/t,i=r-this.currentLastProgressValue;this.currentLastProgressValue=r,We.reportProgress(i*this.currentProgressBase)}}async readFromZip(e,t,r,i=1){var a,l;this.currentLastProgressValue=0,this.currentProgressBase=i;const s=e instanceof ft?await((a=r.getData)==null?void 0:a.call(r,e,{onprogress:(...o)=>this.reportFunction(...o)})):await((l=r.getData)==null?void 0:l.call(r,e,{onprogress:(...o)=>this.reportFunction(...o)}));if(!s)throw new Error(t);return s}async extractBookData(e,t,r=1){const s=await new Ur(new yn(e)).getEntries();if(!s.length){We.reportProgress(r);return}const a={title:"",styleSheet:"",elementHtml:"",blobs:{},coverImage:"",hasThumb:!0,characters:0,sections:[],lastBookModified:0,lastBookOpen:0},l=[],o=ut(1),c=r/s.length;for(let d=0,{length:f}=s;d<f;d+=1)l.push(o(async()=>{try{Bt(this.cancelSignal);const u=s[d];if(u.filename==="staticdata.json"){const m=JSON.parse(await this.readFromZip(new wn,"Unable to read Static Data",u,c));if(!m.elementHtml)throw new Error("Invalid bookdata - empty element html");const{characters:g,lastBookModified:h,lastBookOpen:p}=We.getBookMetadata(t);a.title=m.title,a.elementHtml=m.elementHtml,a.styleSheet=m.styleSheet||"",a.sections=m.sections||[],a.characters=We.getBookCharacters(g||0,a.sections),a.lastBookModified=h,a.lastBookOpen=p}else if(u.filename.startsWith("blobs/")){const m=u.filename.replace("blobs/",""),g=a.blobs||{};g[m]=await this.readFromZip(new ft,"Unable to read blob data",u,c),a.blobs=g}else u.filename.startsWith("cover.")&&(a.coverImage=await this.readFromZip(new ft,"Unable to read cover data",u,c))}catch(u){throw o.clearQueue(),u}}));return await Promise.all(l),a}async extractProgress(e,t=.9){return e?JSON.parse(await this.readFromZip(new wn,"Unable to read progress data",e,t)):void 0}static getDummyId(){return Math.floor(Date.now()*Math.random())}static sanitizeForFilename(e){return e.replace(/[ ]$/,"~ttu-spc~").replace(/[.]$/,"~ttu-dend~").replace(/\*/g,"~ttu-star~").replace(/[/?<>\\:*|%"]/g,t=>encodeURIComponent(t))}static desanitizeFilename(e){return decodeURIComponent(e).replaceAll("~ttu-star~","*").replaceAll("~ttu-dend~",".").replaceAll("~ttu-spc~"," ")}static getBookFileName(e,t){if(e instanceof File)return e.name;if(t){const{characters:r,lastBookModified:i,lastBookOpen:s}=We.getBookMetadata(t);return`bookdata_${dr}_${Jn}_${r||We.getBookCharacters(e.characters||0,e.sections||[])}_${e.lastBookModified||i||0}_${e.lastBookOpen||s||0}.zip`}return`bookdata_${dr}_${Jn}_${We.getBookCharacters(e.characters||0,e.sections||[])}_${e.lastBookModified||0}_${e.lastBookOpen||0}.zip`}static getProgressFileName(e){return e instanceof File?e.name:`progress_${dr}_${Jn}_${e.lastBookmarkModified||0}_${e.progress||0}.json`}static async getCoverFileName(e){const t=await We.determineImageExtension(e)||"jpeg";return`cover_${dr}_${Jn}.${t}`}static getBookMetadata(e){const t=e.split("_").map(r=>r.replace(/\.zip$/,""));return{exporterVersion:+t[1],dbVersion:+t[2],characters:+t[3],lastBookModified:+t[4],lastBookOpen:+t[5]}}static getProgressMetadata(e){const t=e.split("_").map(r=>r.replace(/\.json$/,""));return{exporterVersion:+t[1],dbVersion:+t[2],lastBookmarkModified:+t[3],progress:+t[4]}}static async determineImageExtension(e){if(e.type)return e.type.replace("image/","")||"jpeg";let t;try{typeof e.arrayBuffer=="function"?t=new Uint8Array(await e.arrayBuffer()):t=await this.readBufferForBlob(e);const r=t.slice(0,4);let i="";for(let s=0,{length:a}=r;s<a;s+=1)i+=r[s].toString(16);switch(!0){case/^89504e47/.test(i):return"png";case/^47494638/.test(i):return"gif";case/^424d/.test(i):return"bmp";case/^52494646/.test(i):return"webp";default:return"jpeg"}}catch{return"jpeg"}}static readBufferForBlob(e){return new Promise((t,r)=>{const i=new FileReader;i.addEventListener("load",()=>{t(new Uint8Array(i.result))}),i.addEventListener("error",()=>{r(new Error("Error reading Blob"))}),i.readAsArrayBuffer(e)})}};let I=We;$(I,"rootName",$c);/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */class ml extends I{constructor(){super(...arguments);$(this,"exportZipWriter");$(this,"importReader");$(this,"importEntries",[])}getBookList(){return Promise.resolve([])}prepareBookForReading(){return Promise.resolve(0)}updateLastRead(){return Promise.resolve()}getFilenameForRecentCheck(){return I.reportProgress(),Promise.resolve(void 0)}isBookPresentAndUpToDate(){return I.reportProgress(),Promise.resolve(!1)}isProgressPresentAndUpToDate(){return I.reportProgress(),Promise.resolve(!1)}deleteBookData(){return Promise.resolve({error:"",deleted:[]})}updateSettings(t,r){this.window=t,this.isForBrowser=r}clearData(t=!0){t&&(this.exportZipWriter=void 0,this.importReader=void 0,this.importEntries=[])}async setBackupZip(t){this.importReader=new Ur(new yn(t)),this.importEntries=await this.importReader.getEntries();const r=new Map;for(let i=0,{length:s}=this.importEntries;i<s;i+=1){const a=this.importEntries[i],l=a.filename.split("/")[0],o=I.desanitizeFilename(l),c=r.get(o)||{title:o,imagePath:""};a.filename.startsWith(`${l}/cover_`)&&(c.imagePath=a),r.set(o,c)}return[...r.values()]}async getBook(){const{zipEntry:t,filename:r}=this.findEntry("bookdata_");if(!t)return;const i=await this.readFromZip(new ft,"Unable to read book data",t,this.isForBrowser?.3:.9);return this.isForBrowser?this.extractBookData(i,r,.6):new File([i],r,{type:"application/zip"})}async getProgress(){const{zipEntry:t,filename:r}=this.findEntry("progress_");if(!t)return;const i=await this.readFromZip(new ft,"Unable to read progress data",t,this.isForBrowser?.8:.9);return this.isForBrowser?this.extractProgress(t,.1):new File([i],r,{type:"application/json"})}async getCover(){if(this.currentContext.imagePath instanceof Blob)return I.reportProgress(),this.currentContext.imagePath;const{zipEntry:t}=this.findEntry("cover_");return t?await this.readFromZip(new ft,"Unable to read cover data",t,.9):void 0}async saveBook(t){const r=`${this.sanitizedTitle}/${I.getBookFileName(t)}`;return t instanceof File?this.exportZipWriter=await this.addDataToZip(r,t,this.exportZipWriter):this.exportZipWriter=await this.addDataToZip(r,await this.zipBookData(t,.5),this.exportZipWriter,.5),0}async saveProgress(t){const r=`${this.sanitizedTitle}/${I.getProgressFileName(t)}`;t instanceof File?this.exportZipWriter=await this.addDataToZip(r,t,this.exportZipWriter):this.exportZipWriter=await this.addDataToZip(r,JSON.stringify(t),this.exportZipWriter)}async saveCover(t){if(!t){I.reportProgress();return}const r=await I.getCoverFileName(t);this.exportZipWriter=await this.addDataToZip(`${this.sanitizedTitle}/${r}`,t,this.exportZipWriter)}async createExportZip(t,r){if(!r&&this.exportZipWriter){const i=t.createElement("a");i.href=URL.createObjectURL(await this.exportZipWriter.close()),i.rel="noopener",i.download=`ttu-reader-export-${new Date().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replaceAll(/[/:, ]+/g,"-")}.zip`,setTimeout(()=>{URL.revokeObjectURL(i.href)},1e4),setTimeout(()=>{i.click(),this.clearData()})}else r&&this.clearData()}findEntry(t,r=.1){const i=this.importEntries.find(s=>s.filename.startsWith(`${this.sanitizedTitle}/${t}`));return I.reportProgress(r),{zipEntry:i,filename:(i==null?void 0:i.filename.replace(`${this.sanitizedTitle}/`,""))||""}}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */class Rn extends I{updateSettings(e,t,r){this.window=e,this.isForBrowser=t,this.saveBehavior=r}async getBookList(){if(!this.dataListFetched){re.listLoading$.next(!0);try{const t=await(await re.db).getAll("data");for(let r=0,{length:i}=t;r<i;r+=1){const s=t[r];this.addBookCard(s.title,{id:s.id,imagePath:s.coverImage||"",characters:I.getBookCharacters(s.characters||0,s.sections||[]),lastBookModified:s.lastBookModified||0,lastBookOpen:s.lastBookOpen||0,isPlaceholder:!s.elementHtml})}this.dataListFetched=!0}catch(e){throw this.clearData(),e}}return[...this.titleToBookCard.values()]}clearData(e=!0){e&&(this.titleToBookCard.clear(),this.dataListFetched=!1)}async prepareBookForReading(){const e=this.currentContext.id?await re.getData(this.currentContext.id):await re.getDataByTitle(this.currentContext.title);if(!e)throw new Error("No local book data found");if(!e.elementHtml)throw new Error(`Placeholder books should be opened from their original source${e.storageSource?` - last source: ${e.storageSource}`:""}`);return e.storageSource&&await re.upsertData(e,be.Overwrite),e.id}async updateLastRead(e){const t=I.getBookFileName(e),{characters:r,lastBookModified:i,lastBookOpen:s}=I.getBookMetadata(t);await(await re.db).put("data",e),this.addBookCard(this.currentContext.title,{characters:r,lastBookModified:i,lastBookOpen:s})}async getBook(){const e=this.currentContext.id?await re.getData(this.currentContext.id):await re.getDataByTitle(this.currentContext.title);return I.reportProgress(),e}async getProgress(){var r;const e=this.currentContext.id||((r=await re.getDataByTitle(this.currentContext.title))==null?void 0:r.id);return I.reportProgress(.5),e?await re.getBookmark(e):void 0}async getCover(){const e=this.currentContext.imagePath instanceof Blob?this.currentContext.imagePath:void 0;return I.reportProgress(),e}async saveBook(e,t=!0,r=!0){let i=0;if(!(e instanceof File)){const s=await re.upsertData(e,this.saveBehavior,t,r);i=s.id,this.addBookCard(e.title,{id:s.id,characters:I.getBookCharacters(s.characters||0,s.sections||[]),lastBookModified:s.lastBookModified||0,lastBookOpen:s.lastBookOpen||0,isPlaceholder:!s.elementHtml})}return I.reportProgress(),i}async saveProgress(e){var r;if(e instanceof File){I.reportProgress();return}const t=this.currentContext.id||((r=await re.getDataByTitle(this.currentContext.title))==null?void 0:r.id);if(I.reportProgress(.5),t){const i=e;i.dataId=t,await re.putBookmark(i,this.saveBehavior)}}saveCover(e){return e instanceof Blob&&this.titleToBookCard.has(this.currentContext.title)&&this.addBookCard(this.currentContext.title,{imagePath:e}),I.reportProgress(),Promise.resolve()}getFilenameForRecentCheck(){return Rn.reportProgress(),Promise.resolve(void 0)}isBookPresentAndUpToDate(){return Rn.reportProgress(),Promise.resolve(!1)}isProgressPresentAndUpToDate(){return Rn.reportProgress(),Promise.resolve(!1)}async deleteBookData(e,t){const r=[],i=new Map;for(let l=0,{length:o}=e;l<o;l+=1){const c=this.titleToBookCard.get(e[l]);c&&(r.push(c.id),i.set(c.id,c.title))}const{error:s,deleted:a}=await re.deleteData(r,t).catch(l=>({error:l.message,deleted:[]}));for(let l=0,{length:o}=a;l<o;l+=1){const c=a[l];this.titleToBookCard.delete(i.get(c)||"")}return a.length&&re.dataListChanged$.next(this),{error:s,deleted:a}}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function Vr(n,e,t){return(r,i)=>{const s=T0(n)(r,i,e),a=ln(s);return a.pipe(Nc(1)).subscribe(l=>{n.setItem(r,t(l??i))}),a}}function T0(n){return(e,t,r)=>{const i=n.getItem(e);return i?r(i):t}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */class S0{constructor(){$(this,"_store",new Map)}setItem(e,t){this._store.set(e,t)}getItem(e){return this._store.get(e)}removeItem(e){this._store.delete(e)}clear(){this._store=new Map}}const _n=typeof window>"u"?new S0:window.localStorage;/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function Ve(n=_n){return Vr(n,e=>e,e=>e)}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function Qh(n,e,t){let r=!1;switch(n){case G.BROWSER:r=!0;break;case G.GDRIVE:r=(e&&e!==Ge.GDRIVE_DEFAULT||oo)&&so&&ao;break;case G.ONEDRIVE:r=(e&&e!==Ge.ONEDRIVE_DEFAULT||uo)&&lo&&fo;break;case G.FS:r=!!e&&"showDirectoryPicker"in t;break}return r}function gl(n){switch(n){case G.BACKUP:return{viewBox:"0 0 384 512",d:"M256 0v128h128L256 0zM224 128L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48V160h-127.1C238.3 160 224 145.7 224 128zM96 32h64v32H96V32zM96 96h64v32H96V96zM96 160h64v32H96V160zM128.3 415.1c-40.56 0-70.76-36.45-62.83-75.45L96 224h64l30.94 116.9C198.7 379.7 168.5 415.1 128.3 415.1zM144 336h-32C103.2 336 96 343.2 96 352s7.164 16 16 16h32C152.8 368 160 360.8 160 352S152.8 336 144 336z"};case G.GDRIVE:return{viewBox:"0 0 512 512",d:"M339 314.9L175.4 32h161.2l163.6 282.9H339zm-137.5 23.6L120.9 480h310.5L512 338.5H201.5zM154.1 67.4L0 338.5 80.6 480 237 208.8 154.1 67.4z"};case G.ONEDRIVE:return{viewBox:"0 0 640 512",d:"M96.2 200.1C96.07 197.4 96 194.7 96 192C96 103.6 167.6 32 256 32C315.3 32 367 64.25 394.7 112.2C409.9 101.1 428.3 96 448 96C501 96 544 138.1 544 192C544 204.2 541.7 215.8 537.6 226.6C596 238.4 640 290.1 640 352C640 422.7 582.7 480 512 480H144C64.47 480 0 415.5 0 336C0 273.2 40.17 219.8 96.2 200.1z"};case G.FS:return{viewBox:"0 0 576 512",d:"M544 32h-112l-32-32H320c-17.62 0-32 14.38-32 32v160c0 17.62 14.38 32 32 32h224c17.62 0 32-14.38 32-32V64C576 46.38 561.6 32 544 32zM544 320h-112l-32-32H320c-17.62 0-32 14.38-32 32v160c0 17.62 14.38 32 32 32h224c17.62 0 32-14.38 32-32v-128C576 334.4 561.6 320 544 320zM64 16C64 7.125 56.88 0 48 0h-32C7.125 0 0 7.125 0 16V416c0 17.62 14.38 32 32 32h224v-64H64V160h192V96H64V16z"};default:return{viewBox:"0 0 512 512",d:"M448 32C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H448zM96 96C78.33 96 64 110.3 64 128C64 145.7 78.33 160 96 160H416C433.7 160 448 145.7 448 128C448 110.3 433.7 96 416 96H96z"}}}const Fr=Ve()("lastStorageSource",G.BROWSER),A0=ln(gl(G.BROWSER));Fr.subscribe(n=>A0.next(gl(n)));/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const Dn=16,Di=12;async function wl(n,e,t){return n.crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:1e5,hash:"SHA-256"},await n.crypto.subtle.importKey("raw",new TextEncoder().encode(t),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}function C0(n){return n===Ge.GDRIVE_DEFAULT||n===Ge.ONEDRIVE_DEFAULT||n===qi}function ui(n,e){switch(e){case G.GDRIVE:as.next(n||Ge.GDRIVE_DEFAULT);break;case G.ONEDRIVE:os.next(n||Ge.ONEDRIVE_DEFAULT);break;case G.FS:ls.next(n);break}!n&&e===G.FS&&Fr.next(G.BROWSER)}async function I0(n,e,t){const r=Dn+Di,i=n.crypto.getRandomValues(new Uint8Array(Dn)),s=n.crypto.getRandomValues(new Uint8Array(Di)),a=await n.crypto.subtle.encrypt({name:"AES-GCM",iv:s},await wl(n,i,t),new TextEncoder().encode(e)),l=new Uint8Array(a.byteLength+r);return l.set(new Uint8Array(i),0),l.set(new Uint8Array(s),i.byteLength),l.set(new Uint8Array(a),r),l.buffer}async function B0(n,e,t){const r=Dn+Di,i=e.slice(0,Dn),s=e.slice(Dn,r),a=e.slice(r),l=await wl(n,new Uint8Array(i),t);return n.crypto.subtle.decrypt({name:"AES-GCM",iv:s},l,a)}function Sa(n){let e,t,r;return{c(){e=ge("input"),this.h()},l(i){e=we(i,"INPUT",{type:!0,placeholder:!0}),this.h()},h(){oe(e,"type","password"),oe(e,"placeholder","Password")},m(i,s){Ie(i,e,s),us(e,n[5]),t||(r=Gn(e,"input",n[13]),t=!0)},p(i,s){s&32&&e.value!==i[5]&&us(e,i[5])},d(i){i&&K(e),t=!1,r()}}}function P0(n){let e,t,r,i,s,a,l,o,c,d,f=n[2]&&Sa(n);return{c(){e=ge("div"),t=ge("div"),r=et(n[0]),i=St(),s=ge("div"),a=et(n[1]),l=St(),f&&f.c(),o=St(),c=ge("div"),d=et(n[6]),this.h()},l(u){e=we(u,"DIV",{class:!0,slot:!0});var m=xe(e);t=we(m,"DIV",{});var g=xe(t);r=tt(g,n[0]),g.forEach(K),i=At(m),s=we(m,"DIV",{class:!0});var h=xe(s);a=tt(h,n[1]),h.forEach(K),l=At(m),f&&f.l(m),o=At(m),c=we(m,"DIV",{class:!0});var p=xe(c);d=tt(p,n[6]),p.forEach(K),m.forEach(K),this.h()},h(){oe(s,"class","my-2"),oe(c,"class","text-red-500"),oe(e,"class","flex flex-col text-sm sm:text-base"),oe(e,"slot","content")},m(u,m){Ie(u,e,m),ue(e,t),ue(t,r),ue(e,i),ue(e,s),ue(s,a),ue(e,l),f&&f.m(e,null),ue(e,o),ue(e,c),ue(c,d),n[14](e)},p(u,m){m&1&&on(r,u[0]),m&2&&on(a,u[1]),u[2]?f?f.p(u,m):(f=Sa(u),f.c(),f.m(e,o)):f&&(f.d(1),f=null),m&64&&on(d,u[6])},d(u){u&&K(e),f&&f.d(),n[14](null)}}}function Aa(n){let e,t,r,i,s,a;return r=new Un({}),{c(){e=ge("button"),t=et(`Cancel
        `),Zt(r.$$.fragment),this.h()},l(l){e=we(l,"BUTTON",{class:!0});var o=xe(e);t=tt(o,`Cancel
        `),Gt(r.$$.fragment,o),o.forEach(K),this.h()},h(){oe(e,"class",Ua(Ln)+" svelte-1f582b9")},m(l,o){Ie(l,e,o),ue(e,t),Xt(r,e,null),i=!0,s||(a=Gn(e,"click",n[12]),s=!0)},p:Or,i(l){i||(he(r.$$.fragment,l),i=!0)},o(l){Ce(r.$$.fragment,l),i=!1},d(l){l&&K(e),zt(r),s=!1,a()}}}function N0(n){let e,t,r,i,s,a,l,o,c=(n[2]||n[3])&&Aa(n);return s=new Un({}),{c(){e=ge("div"),c&&c.c(),t=St(),r=ge("button"),i=et(`Confirm
      `),Zt(s.$$.fragment),this.h()},l(d){e=we(d,"DIV",{class:!0,slot:!0});var f=xe(e);c&&c.l(f),t=At(f),r=we(f,"BUTTON",{class:!0});var u=xe(r);i=tt(u,`Confirm
      `),Gt(s.$$.fragment,u),u.forEach(K),f.forEach(K),this.h()},h(){oe(r,"class",Ua(Ln)+" svelte-1f582b9"),oe(e,"class","mt-2 flex grow justify-between"),oe(e,"slot","footer")},m(d,f){Ie(d,e,f),c&&c.m(e,null),ue(e,t),ue(e,r),ue(r,i),Xt(s,r,null),a=!0,l||(o=Gn(r,"click",n[7]),l=!0)},p(d,f){d[2]||d[3]?c?(c.p(d,f),f&12&&he(c,1)):(c=Aa(d),c.c(),he(c,1),c.m(e,t)):c&&(wi(),Ce(c,1,1,()=>{c=null}),bi())},i(d){a||(he(c),he(s.$$.fragment,d),a=!0)},o(d){Ce(c),Ce(s.$$.fragment,d),a=!1},d(d){d&&K(e),c&&c.d(),zt(s),l=!1,o()}}}function F0(n){let e,t;return e=new ji({props:{$$slots:{footer:[N0],content:[P0]},$$scope:{ctx:n}}}),{c(){Zt(e.$$.fragment)},l(r){Gt(e.$$.fragment,r)},m(r,i){Xt(e,r,i),t=!0},p(r,[i]){const s={};i&65663&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||(he(e.$$.fragment,r),t=!0)},o(r){Ce(e.$$.fragment,r),t=!1},d(r){zt(e,r)}}}function O0(n,e,t){let{description:r}=e,{action:i}=e,{requiresSecret:s=!0}=e,{showCancel:a=!1}=e,{forwardSecret:l=!1}=e,{encryptedData:o}=e,{resolver:c}=e,d,f="",u="";const m=La();async function g(){d.classList.remove("error-animation"),t(6,u="");try{if(o)h({...JSON.parse(new TextDecoder().decode(await B0(window,o,f))),...l?{secret:f}:{}});else if(s)throw new Error("No data to unlock found");h({clientId:"",clientSecret:""})}catch(b){t(6,u=`Failed to unlock Data${b.message?`: ${b.message}`:""}`),d.classList.add("error-animation")}}function h(b){c(b),m("close")}Wl(()=>(Pa.next(!0),()=>Pa.next(!1)));const p=()=>{h()};function w(){f=this.value,t(5,f)}function x(b){Ma[b?"unshift":"push"](()=>{d=b,t(4,d)})}return n.$$set=b=>{"description"in b&&t(0,r=b.description),"action"in b&&t(1,i=b.action),"requiresSecret"in b&&t(2,s=b.requiresSecret),"showCancel"in b&&t(3,a=b.showCancel),"forwardSecret"in b&&t(9,l=b.forwardSecret),"encryptedData"in b&&t(10,o=b.encryptedData),"resolver"in b&&t(11,c=b.resolver)},[r,i,s,a,d,f,u,g,h,l,o,c,p,w,x]}class Mi extends Hn{constructor(e){super(),qn(this,e,O0,F0,Zn,{description:0,action:1,requiresSecret:2,showCancel:3,forwardSecret:9,encryptedData:10,resolver:11})}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */class nn extends I{constructor(){super(...arguments);$(this,"rootDirectory");$(this,"titleToDirectory",new Map);$(this,"titleToFiles",new Map)}updateSettings(t,r,i,s,a,l){this.window=t,this.isForBrowser=r,this.saveBehavior=i,this.cacheStorageData=s,this.askForStorageUnlock=a;const o=l||ls.getValue();o!==this.storageSourceName&&this.clearData(),this.storageSourceName=o}async getBookList(){if(!this.dataListFetched){re.listLoading$.next(!0);const t=await this.ensureRoot(),r=await nn.list(t,!0);await this.setTitleData(r),this.dataListFetched=!0}return[...this.titleToBookCard.values()]}clearData(t=!0){this.titleToFiles.clear(),t&&(this.rootDirectory=void 0,this.titleToDirectory.clear(),this.titleToBookCard.clear(),this.dataListFetched=!1)}async prepareBookForReading(){const t=await re.getDataByTitle(this.currentContext.title);let r=0,i=t;if(!i||!i.elementHtml){const{file:s}=await this.getExternalFile("bookdata_");i=s?i||{title:this.currentContext.title,styleSheet:"",elementHtml:"",blobs:{},coverImage:"",hasThumb:!0,characters:0,sections:[],lastBookModified:0,lastBookOpen:0,storageSource:void 0}:void 0}if(!i)throw new Error("No local or external book data found");return i.storageSource!==this.storageSourceName?(i.storageSource=this.storageSourceName,r=await is(this.window,G.BROWSER,void 0,!0,this.cacheStorageData,be.Overwrite).saveBook(i,!0,!1)):t!=null&&t.id&&(r=t.id),r}async updateLastRead(t){const{file:r,files:i,rootDirectory:s}=await this.getExternalFile("bookdata_");if(!r)return;const a=await r.getFile(),l=I.getBookFileName(t),{characters:o,lastBookModified:c,lastBookOpen:d}=I.getBookMetadata(l);await this.writeFile(s,l,a,i,r),this.addBookCard(this.currentContext.title,{characters:o,lastBookModified:c,lastBookOpen:d})}async getFilenameForRecentCheck(t){if(this.saveBehavior===be.Overwrite){I.reportProgress();return}const{file:r}=await this.getExternalFile(t,1);return r==null?void 0:r.name}async isBookPresentAndUpToDate(t){if(!t)return I.reportProgress(),!1;const{file:r}=await this.getExternalFile("bookdata_",1);let i=!1;if(r&&this.saveBehavior===be.NewOnly){const{lastBookModified:s,lastBookOpen:a}=I.getBookMetadata(t),{lastBookModified:l,lastBookOpen:o}=I.getBookMetadata(r.name);i=!!(l&&s&&l>=s&&(o||0)>=(a||0))}return i}async isProgressPresentAndUpToDate(t){if(!t)return I.reportProgress(),!1;const{file:r}=await this.getExternalFile("progress_",1);let i=!1;if(r&&this.saveBehavior===be.NewOnly){const{lastBookmarkModified:s}=I.getProgressMetadata(t),{lastBookmarkModified:a}=I.getProgressMetadata(r.name);i=!!(a&&s&&(a||0)>=(s||0))}return i}async getBook(){const{file:t}=await this.getExternalFile("bookdata_",this.isForBrowser?.4:.8);if(!t)return;const r=await t.getFile();return this.isForBrowser?this.extractBookData(r,r.name,.6):r}async getProgress(){const{file:t}=await this.getExternalFile("progress_",this.isForBrowser?.6:.8);if(!t)return;const r=await t.getFile();if(this.isForBrowser){const i=JSON.parse(await nn.readFileObject(r));return I.reportProgress(.4),i}return r}async getCover(){if(this.currentContext.imagePath instanceof Blob)return I.reportProgress(),this.currentContext.imagePath;const{file:t}=await this.getExternalFile("cover_",.8);return t?await t.getFile():void 0}async saveBook(t,r=!0){const i=t instanceof File,{file:s,files:a,rootDirectory:l}=await this.getExternalFile("bookdata_",.2),o=I.getBookFileName(t,s&&r?"":s==null?void 0:s.name),{characters:c,lastBookModified:d,lastBookOpen:f}=I.getBookMetadata(o);if(s&&this.saveBehavior===be.NewOnly){const{lastBookModified:m,lastBookOpen:g}=I.getBookMetadata(s.name);if(m&&d&&m>=d&&(g||0)>=(f||0))return 0}let u;return i?(u=t,I.reportProgress(.2)):u=await this.zipBookData(t,.4),await this.writeFile(l,o,u,a,s,i?.6:.4),this.addBookCard(this.currentContext.title,{characters:c,lastBookModified:d,lastBookOpen:f}),0}async saveProgress(t){const r=I.getProgressFileName(t),{lastBookmarkModified:i,progress:s}=I.getProgressMetadata(r),{file:a,files:l,rootDirectory:o}=await this.getExternalFile("progress_");if(a&&this.saveBehavior===be.NewOnly){const{lastBookmarkModified:c}=I.getProgressMetadata(a.name);if(c&&i&&(c||0)>=(i||0))return}await this.writeFile(o,r,t instanceof File?t:JSON.stringify(t),l,a,.6),this.addBookCard(this.currentContext.title,{lastBookmarkModified:i,progress:s})}async saveCover(t){if(!t){I.reportProgress();return}const{file:r,files:i,rootDirectory:s}=await this.getExternalFile("cover_");if(!r){const a=await I.getCoverFileName(t);await this.writeFile(s,a,t,i,void 0,.6)}this.titleToBookCard.has(this.currentContext.title)&&this.addBookCard(this.currentContext.title,{imagePath:t})}async deleteBookData(t,r){const i=await this.ensureRoot(),s=[],a=ut(1),l=[];let o="";return qt.next({progressBase:1,maxProgress:t.length}),t.forEach(c=>l.push(a(async()=>{var d;try{Bt(r),await i.removeEntry(I.sanitizeForFilename(c),{recursive:!0});const f=(d=this.titleToBookCard.get(c))==null?void 0:d.id;f&&s.push(f),this.titleToDirectory.delete(c),this.titleToFiles.delete(c),this.titleToBookCard.delete(c),re.dataListChanged$.next(this),I.reportProgress()}catch(f){o=Wn(f,`Error deleting ${c}: `,[a])}}))),await Promise.all(l).catch(()=>{}),{error:o,deleted:s}}async ensureRoot(t=this.askForStorageUnlock){try{if(this.rootDirectory)return await nn.verifyPermission(this.rootDirectory),this.rootDirectory;const i=await(await re.db).get("storageSource",this.storageSourceName);if(!i)throw new Error(`No storage source with name ${this.storageSourceName} found`);const s=i.data;if(s instanceof ArrayBuffer)throw new Error("Wrong filesystem handle type");if(!s.directoryHandle)throw new Error("Filesystem handle not found");await nn.verifyPermission(s.directoryHandle),this.rootDirectory=s.directoryHandle}catch(r){if(r.message.includes("activation is required")&&(!this.rootDirectory||t))return await new Promise(i=>{Sr.dialogs$.next([{component:Mi,props:{description:"You are trying to access data on your filesystem",action:"Please grant permissions in the next dialog",requiresSecret:!1,resolver:i},disableCloseOnClick:!0}])}),this.ensureRoot(!1);throw r}return this.rootDirectory}async setTitleData(t,r=!0){const i=ut(1),s=[];t.forEach(a=>s.push(i(async()=>{try{const l=await nn.list(a);if(!l.length)return;const o={id:I.getDummyId(),title:I.desanitizeFilename(a.name),imagePath:"",characters:0,lastBookModified:0,lastBookOpen:0,progress:0,lastBookmarkModified:0,isPlaceholder:!1},c=ut(1),d=[];l.forEach(f=>d.push(c(async()=>{try{if(f.name.startsWith("bookdata_")){const u=I.getBookMetadata(f.name);o.characters=u.characters,o.lastBookModified=u.lastBookModified,o.lastBookOpen=u.lastBookOpen}else if(f.name.startsWith("progress_")){const u=I.getProgressMetadata(f.name);o.lastBookmarkModified=u.lastBookmarkModified,o.progress=u.progress}else f.name.startsWith("cover_")&&(o.imagePath=await f.getFile())}catch(u){throw c.clearQueue(),u}}))),await Promise.all(d),this.titleToDirectory.set(o.title,a),this.titleToFiles.set(o.title,l),this.titleToBookCard.set(o.title,o)}catch(l){throw i.clearQueue(),l}}))),await Promise.all(s).catch(a=>{throw r&&this.clearData(),a})}async getExternalFile(t,r=.4){const i=r/2,s=await this.ensureRoot();I.reportProgress(i);const a=await this.getExternalFiles(s),l=a.find(o=>o.name.startsWith(t));return I.reportProgress(i),{file:l,files:a,rootDirectory:s}}async getExternalFiles(t){if((!this.cacheStorageData||!this.dataListFetched)&&!this.titleToFiles.has(this.currentContext.title)){const r=await t.getDirectoryHandle(this.sanitizedTitle,{create:!1}).catch(()=>{});r&&await this.setTitleData([r],!1)}return this.titleToFiles.get(this.currentContext.title)||[]}async writeFile(t,r,i,s,a,l=.4){const o=l/2,c=this.titleToDirectory.get(this.currentContext.title)||await t.getDirectoryHandle(this.sanitizedTitle,{create:!0}),d=await c.getFileHandle(r,{create:!0}),f=await d.createWritable();if(await f.write(i),await f.close(),I.reportProgress(o),a){await d.isSameEntry(a)||await c.removeEntry(a.name);const u=s.filter(m=>m.name!==a.name);u.push(d),this.titleToFiles.set(this.currentContext.title,u)}else s.push(d),this.titleToFiles.set(this.currentContext.title,s);this.titleToDirectory.set(this.currentContext.title,c),I.reportProgress(o)}static async verifyPermission(t){const r={mode:"readwrite"};if(await t.queryPermission(r)==="granted"||await t.requestPermission(r)==="granted")return!0;throw new Error("No permissions granted to access filesystem")}static async list(t,r=!1){const i=[],s=t.values();let a=await s.next();for(;!a.done;)(a.value.kind==="directory"&&r||a.value.kind==="file")&&i.push(a.value),a=await s.next();return i}static readFileObject(t){return new Promise((r,i)=>{const s=new FileReader;s.addEventListener("load",()=>{r(s.result)}),s.addEventListener("error",()=>{i(new Error(`Error reading file ${t.name}`))}),s.readAsText(t)})}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function R0(n){var i;const e=n.navigator.userAgent,t=/\b(BlackBerry|webOS|iPhone|IEMobile|Android|Windows Phone|iPad|iPod)\b/i;if("maxTouchPoints"in n.navigator)return n.navigator.maxTouchPoints>0;if("msMaxTouchPoints"in n.navigator)return n.navigator.msMaxTouchPoints>0;const r=(i=n.matchMedia)==null?void 0:i.call(n,"(pointer:coarse)");return(r==null?void 0:r.media)==="(pointer: coarse)"?!!r.matches:"orientation"in n?!0:t.test(e)}function Yh(n){return n.location.href.startsWith("https://ttu-ebook.web.app")}function Jh(){}const ep=ln(!1);/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const hi=new Map;class Mn{constructor(e,t){$(this,"storageType");$(this,"refreshEndpoint");$(this,"parentWindow");$(this,"storageSourceName","");$(this,"remoteData");$(this,"authWindow",null);$(this,"codeVerifier","");$(this,"authResolver");$(this,"authRejector");$(this,"rebindedWinHandler");$(this,"authCloseIntervalTime",500);$(this,"authCloseInterval");$(this,"authTimeout",45e3);$(this,"authTimeoutTimer");this.storageType=e,this.refreshEndpoint=t}async getToken(e,t,r,i,s){const a=hi.get(t),l=!a||r;(!a||this.storageSourceName!==t)&&(this.remoteData=void 0,this.storageSourceName=t);let o=await this.verifyToken(a);if(o)return o.accessToken;this.remoteData=void 0;let c,d=s;if(t===Ge.GDRIVE_DEFAULT)this.remoteData={clientId:oo,clientSecret:""};else if(t===Ge.ONEDRIVE_DEFAULT)this.remoteData={clientId:uo,clientSecret:""};else{if(!d){const m=await(await re.db).get("storageSource",t);if(!m)throw new Error(`No storage source with name ${t} found`);if(d=l?await new Promise(g=>{Sr.dialogs$.next([{component:Mi,props:{description:"You are trying to access protected data",action:`Enter the correct password for ${t} and login to your account if required to proceed`,encryptedData:m.data,forwardSecret:!0,resolver:g},disableCloseOnClick:!0}])}):void 0,!d)throw new Error("Unable to unlock required data")}if(this.remoteData={clientId:d.clientId,clientSecret:d.clientSecret,refreshToken:d.refreshToken},o=await this.verifyToken(o),o)return o.accessToken;c=d.secret}if(this.parentWindow=e,i?(this.authWindow=i,this.authWindow.location.assign(`${Kr}/auth.html?ttu-init-auth=1`)):l?this.authWindow=Mn.createWindow(`${Kr}/auth.html?ttu-init-auth=1`,"auth",Math.min(Math.max(this.parentWindow.innerWidth,300),560),Math.min(Math.max(this.parentWindow.innerHeight,300),560),e):this.authWindow=null,!this.authWindow){if(l)return await new Promise(u=>{Sr.dialogs$.next([{component:Mi,props:{description:"You are trying to access external data",action:"Login to your account when prompted",requiresSecret:!1,encryptedData:void 0,resolver:u},disableCloseOnClick:!0}])}),this.getToken(e,t,!1,Mn.createWindow(`${Kr}/auth?ttu-init-wait=1`,"auth",Math.min(Math.max(this.parentWindow.innerWidth,300),560),Math.min(Math.max(this.parentWindow.innerHeight,300),560),e),d);throw new Error("Unable to open login window. Please check your popup settings")}let f="";try{if(o=await this.waitForAuth(),hi.set(t,o),this.parentWindow&&this.remoteData.clientId&&(this.storageType!==G.GDRIVE||this.remoteData.clientSecret)&&o.refreshToken&&o.refreshToken!==this.remoteData.refreshToken&&c){this.remoteData.refreshToken=o.refreshToken;try{await(await re.db).put("storageSource",{name:t,type:this.storageType,data:await I0(this.parentWindow,JSON.stringify({clientId:this.remoteData.clientId,clientSecret:this.remoteData.clientSecret,refreshToken:o.refreshToken}),c),lastSourceModified:Date.now()})}catch(u){Tt.error(`Error updating refresh token for ${t}: ${u.message}`)}}}catch(u){f=u.message}finally{c="",this.clearAuthData()}if(f)throw new Error(f);return o==null?void 0:o.accessToken}async verifyToken(e){if(!(!e&&!this.remoteData))return e&&e.expiration>Date.now()?e:this.refreshToken()}async refreshToken(){var l;if(!(this.refreshEndpoint&&this.storageSourceName&&((l=this.remoteData)!=null&&l.clientId)&&(this.storageType!==G.GDRIVE||this.remoteData.clientSecret)&&this.remoteData.refreshToken))return;const e=new FormData;e.append("client_id",this.remoteData.clientId),e.append("refresh_token",this.remoteData.refreshToken),e.append("grant_type","refresh_token"),this.storageType===G.GDRIVE&&e.append("client_secret",this.remoteData.clientSecret);const t=await fetch(this.refreshEndpoint,{method:"POST",body:e}).then(async o=>{if(!o.ok)throw new Error(await Da(o));return o.json()}).catch(o=>{Tt.error(`Unable to refresh token for ${this.storageSourceName}: ${o.message}`)});if(!t){this.remoteData.refreshToken=void 0;return}const{access_token:r,expires_in:i,scope:s}=t;if(!r||!i||!s){this.remoteData.refreshToken=void 0,Tt.error(`A required authentication property was not found
had token: ${!!r}
had expiration: ${!!i}
had scope: ${!!s}`);return}const a={accessToken:r,scope:s,expiration:Date.now()+(Number.parseInt(i,10)-600)*1e3,refreshToken:this.remoteData.refreshToken};return hi.set(this.storageSourceName,a),a}base64Url(e){if(!this.parentWindow)throw new Error("Parent window not defined");return this.parentWindow.btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}waitForAuth(){return new Promise((e,t)=>{if(!this.parentWindow){t(new Error("Parent window not defined"));return}this.authResolver=e,this.authRejector=t,this.rebindedWinHandler=this.winHandler.bind(this),this.parentWindow.addEventListener("message",this.rebindedWinHandler,!1),this.authCloseInterval=setInterval(()=>{var r;(r=this.authWindow)!=null&&r.closed&&t(new Error("Window was closed before login"))},this.authCloseIntervalTime),this.authTimeoutTimer=setTimeout(()=>{t(new Error("Login timeout"))},this.authTimeout)})}async winHandler(e){if(!(!this.parentWindow||!this.remoteData||e.source!==this.authWindow||!this.authResolver||!this.authRejector))switch(e.data.type){case"getAuthVariables":e.ports[0].postMessage({result:{...this.remoteData,...Mn.getAuthVariables(this.storageType),sendSecret:this.storageType===G.GDRIVE&&!C0(this.storageSourceName)}});break;case"auth":this.authResolver(e.data.payload);break;case"getCodeChallenge":if(!this.codeVerifier){const t=new Uint8Array(32);this.parentWindow.crypto.getRandomValues(t),this.codeVerifier=this.base64Url(t)}e.ports[0].postMessage({result:this.base64Url(await this.parentWindow.crypto.subtle.digest("SHA-256",new TextEncoder().encode(this.codeVerifier)))});break;case"getCodeVerifier":e.ports[0].postMessage({result:this.codeVerifier});break;case"failure":Tt.error(e.data.payload.detail),this.authRejector(new Error(e.data.payload.message));break}}clearAuthData(){var e,t;clearTimeout(this.authTimeoutTimer),clearInterval(this.authCloseInterval),this.parentWindow&&this.rebindedWinHandler&&this.parentWindow.removeEventListener("message",this.rebindedWinHandler,!1);try{(e=this.authWindow)!=null&&e.closed||(t=this.authWindow)==null||t.close()}catch{}this.authResolver=void 0,this.authRejector=void 0,this.rebindedWinHandler=void 0,this.parentWindow=void 0,this.authWindow=null,this.codeVerifier=""}static createWindow(e,t,r,i,s){const a=R0(s),l=typeof s.screenX<"u"?s.screenX:s.screenLeft,o=typeof s.screenY<"u"?s.screenY:s.screenTop,c=typeof s.outerWidth<"u"?s.outerWidth:document.documentElement.clientWidth,d=typeof s.outerHeight<"u"?s.outerHeight:document.documentElement.clientHeight-22,f=a?null:r,u=a?null:i,m=l<0?s.screen.width+l:l,g=f?parseInt(`${m+(c-f)/2}`,10):0,h=u?parseInt(`${o+(d-u)/2.5}`,10):0,p=[];return f!==null&&p.push(`width=${f}`),u!==null&&p.push(`height=${u}`),p.push(`left=${g}`),p.push(`top=${h}`),p.push("scrollbars=1"),s.open(e,t,p.join(","))}static getAuthVariables(e){switch(e){case G.GDRIVE:return{authEndpoint:so,tokenEndpoint:jc,scope:ao};case G.ONEDRIVE:return{authEndpoint:lo,tokenEndpoint:co,scope:fo};default:return{}}}static revokeToken(e,t){const r=new URLSearchParams;r.append("token",t),fetch(`${e}?${r.toString()}`,{method:"POST"}).catch(()=>{})}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */class bl extends I{constructor(t,r,i){super(r,t);$(this,"authManager");$(this,"rootId","");$(this,"titleToId",new Map);$(this,"titleToFiles",new Map);this.authManager=new Mn(this.storageType,i)}updateSettings(t,r,i,s,a,l){this.window=t,this.isForBrowser=r,this.saveBehavior=i,this.cacheStorageData=s,this.askForStorageUnlock=a,this.setInternalSettings(l)}clearData(t=!0){this.titleToFiles.clear(),t&&(this.rootId="",this.titleToId.clear(),this.titleToBookCard.clear(),this.dataListFetched=!1)}async prepareBookForReading(){const t=await re.getDataByTitle(this.currentContext.title);let r=0,i=t;if(!i||!i.elementHtml){const{file:s}=await this.getExternalFile("bookdata_");i=s?i||{title:this.currentContext.title,styleSheet:"",elementHtml:"",blobs:{},coverImage:"",hasThumb:!0,characters:0,sections:[],lastBookModified:0,lastBookOpen:0,storageSource:void 0}:void 0}if(!i)throw new Error("No local or external book data found");return i.storageSource!==this.storageSourceName?(i.storageSource=this.storageSourceName,r=await is(this.window,G.BROWSER,void 0,!0,this.cacheStorageData,be.Overwrite).saveBook(i,!0,!1)):t!=null&&t.id&&(r=t.id),r}async updateLastRead(t){const{titleId:r,files:i,file:s}=await this.getExternalFile("bookdata_");if(!s)return;const a=I.getBookFileName(t),{characters:l,lastBookModified:o,lastBookOpen:c}=I.getBookMetadata(a);await this.upload(r,a,i,s,void 0),await(await re.db).put("data",t),this.addBookCard(this.currentContext.title,{characters:l,lastBookModified:o,lastBookOpen:c})}async getFilenameForRecentCheck(t){if(this.saveBehavior===be.Overwrite){I.reportProgress();return}const{file:r}=await this.getExternalFile(t);return I.completeStep(),r==null?void 0:r.name}async isBookPresentAndUpToDate(t){if(!t)return I.reportProgress(),!1;const{file:r}=await this.getExternalFile("bookdata_");let i=!1;if(r&&this.saveBehavior===be.NewOnly){const{lastBookModified:s,lastBookOpen:a}=I.getBookMetadata(t),{lastBookModified:l,lastBookOpen:o}=I.getBookMetadata(r.name);i=!!(l&&s&&l>=s&&(o||0)>=(a||0))}return I.completeStep(),i}async isProgressPresentAndUpToDate(t){if(!t)return I.reportProgress(),!1;const{file:r}=await this.getExternalFile("progress_");let i=!1;if(r&&this.saveBehavior===be.NewOnly){const{lastBookmarkModified:s}=I.getProgressMetadata(t),{lastBookmarkModified:a}=I.getProgressMetadata(r.name);i=!!(a&&s&&(a||0)>=(s||0))}return I.completeStep(),i}async getBook(){const{file:t,data:r}=await this.getExternalFile("bookdata_","blob",this.isForBrowser?.7:1);if(t)return this.isForBrowser?this.extractBookData(r,t.name,.3):new File([r],t.name,{type:"application/zip"})}async getProgress(){const{file:t,data:r}=await this.getExternalFile("progress_","json");if(t)return this.isForBrowser?r:new File([new Blob([JSON.stringify(r)])],t.name,{type:"application/json"})}async getCover(){if(this.currentContext.imagePath instanceof Blob)return I.reportProgress(),this.currentContext.imagePath;const{data:t}=await this.getExternalFile("cover_","blob");return t}async saveBook(t,r=!0){const{titleId:i,files:s,file:a}=await this.getExternalFile("bookdata_","",.2,!1),l=I.getBookFileName(t,r?"":a==null?void 0:a.name),{characters:o,lastBookModified:c,lastBookOpen:d}=I.getBookMetadata(l);if(a&&this.saveBehavior===be.NewOnly){const{lastBookModified:f,lastBookOpen:u}=I.getBookMetadata(a.name);if(f&&c&&f>=c&&(u||0)>=(d||0))return 0}return t instanceof File?await this.upload(i,l,s,a,t):await this.upload(i,l,s,a,await this.zipBookData(t,.2),.6),this.addBookCard(this.currentContext.title,{characters:o,lastBookModified:c,lastBookOpen:d}),0}async saveProgress(t){const r=I.getProgressFileName(t),i=t instanceof File?t:JSON.stringify(t),{titleId:s,files:a,file:l}=await this.getExternalFile("progress_","",.2,!1),{lastBookmarkModified:o,progress:c}=I.getProgressMetadata(r);if(l&&this.saveBehavior===be.NewOnly){const{lastBookmarkModified:d}=I.getProgressMetadata(l.name);if(d&&o&&(d||0)>=(o||0))return}await this.upload(s,r,a,l,i),this.addBookCard(this.currentContext.title,{lastBookmarkModified:o,progress:c})}async saveCover(t){if(!t){I.reportProgress();return}const{titleId:r,files:i,file:s}=await this.getExternalFile("cover_","",.2,!1);if(!(s!=null&&s.id)){const a=await I.getCoverFileName(t);await this.upload(r,a,i,void 0,t)}this.titleToBookCard.has(this.currentContext.title)&&this.addBookCard(this.currentContext.title,{imagePath:t})}async deleteBookData(t,r){await this.ensureTitle();let i="";const s=[],a=ut(1),l=[];return qt.next({progressBase:1,maxProgress:t.length}),t.forEach(o=>l.push(a(async()=>{try{Bt(r);const c=this.titleToId.get(o);c&&await this.executeDelete(c),this.titleToFiles.delete(o);const d=this.titleToBookCard.get(o);d&&s.push(d.id),this.titleToId.delete(o),this.titleToBookCard.delete(o),re.dataListChanged$.next(this),I.reportProgress()}catch(c){i=Wn(c,`Error deleting ${o}: `,[a])}}))),await Promise.all(l).catch(()=>{}),{error:i,deleted:s}}async request(t,r={},i="json",s=1){const a=await this.authManager.getToken(this.window,this.storageSourceName,this.askForStorageUnlock),l=this;return new Promise((o,c)=>{const d=new XMLHttpRequest;if(d.responseType=i,d.addEventListener("abort",()=>{c(new hl)}),r.trackDownload&&(this.currentLastProgressValue=0,this.currentProgressBase=s,d.onprogress=f=>{var u;if((u=l.cancelSignal)!=null&&u.aborted){d.abort();return}f.lengthComputable&&l.reportFunction(f.loaded,f.total)}),r.trackUpload&&(this.currentLastProgressValue=0,this.currentProgressBase=s,d.upload.onprogress=f=>{var u;if((u=l.cancelSignal)!=null&&u.aborted){d.abort();return}f.lengthComputable&&l.reportFunction(f.loaded,f.total)}),d.addEventListener("readystatechange",async function(){if(this.readyState===4)if(this.status>=200&&this.status<400)o(this.response);else{const u=await Da(this);this.status===404?(Tt.error(u),c(new Error("Resource not found. Refresh your current tab and try again"))):c(new Error(u))}},!1),d.open(r.method||"GET",t,!0),r.headers){const f=Object.entries(r.headers);for(let u=0,{length:m}=f;u<m;u+=1){const[g,h]=f[u];d.setRequestHeader(g,h)}}a&&d.setRequestHeader("Authorization",`Bearer ${a}`),d.send(r.body||null)})}async getExternalFile(t,r="",i=1,s=!0){const a=i/5;await this.ensureTitle(),I.reportProgress(a);const l=await this.ensureTitle(this.currentContext.title,this.rootId,s);if(I.reportProgress(a),!l)return{titleId:"",file:void 0,files:[],data:void 0};const o=await this.getExternalFiles(l),c=o.find(f=>f.name.startsWith(t));if(I.reportProgress(a),!c)return{titleId:l,file:void 0,files:o,data:void 0};let d;return r&&(d=await this.retrieve(c,r,a*2)),{titleId:l,file:c,files:o,data:d}}updateAfterUpload(t,r,i,s,a={}){if(s){const l=i.map(o=>{const c=o;return o.name===s.name&&(c.name=r),c});this.titleToFiles.set(this.currentContext.title,l)}else i.push({id:t,name:r,...a}),this.titleToFiles.set(this.currentContext.title,i)}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */class D0 extends bl{constructor(t){super(G.GDRIVE,t,Wc);$(this,"baseFileApiUrl","https://www.googleapis.com/drive/v3/files");$(this,"baseUploadApiUrl","https://www.googleapis.com/upload/drive/v3/files")}setInternalSettings(t){const r=t||as.getValue();r!==this.storageSourceName&&this.clearData(),this.storageSourceName=r}async getBookList(){if(!this.dataListFetched){re.listLoading$.next(!0);try{await this.ensureTitle();const t=await this.list(`trashed=false and mimeType='application/vnd.google-apps.folder' and '${this.rootId}' in parents`,"files(id,name),nextPageToken"),r=new Map;for(let i=0,{length:s}=t;i<s;i+=1){const a=t[i],l=I.desanitizeFilename(a.name);this.titleToId.set(l,a.id),r.set(a.id,l)}if(t.length){const i=[];for(let l=0,{length:o}=t;l<o;l+=50)i.push(t.slice(l,l+50).map(c=>c.id));const s=ut(1),a=[];i.forEach(l=>a.push(s(async()=>{this.setTitleData(this.groupExternalFiles(await this.list(`trashed=false and ('${l.join("' in parents or '")}' in parents)`,"files(id,name,thumbnailLink,parents),nextPageToken"),r))}))),await Promise.all(a).catch(l=>{throw s.clearQueue(),l})}this.dataListFetched=!0}catch(t){throw this.clearData(),t}}return[...this.titleToBookCard.values()]}async ensureTitle(t=I.rootName,r="root",i=!1){var c,d,f;if(t===I.rootName&&this.rootId)return this.rootId;const s=this.titleToId.get(t);if(s)return s;const a=I.sanitizeForFilename(t),l=new URLSearchParams;l.append("corpora","user"),l.append("spaces","drive"),l.append("fields","files(id)"),l.append("q",`trashed=false and '${r}' in parents and mimeType = 'application/vnd.google-apps.folder' and name = "${a}"`);let o=(f=(d=(c=await this.request(`${this.baseFileApiUrl}?${l.toString()}`))==null?void 0:c.files)==null?void 0:d[0])==null?void 0:f.id;if(!o&&!i){const u=JSON.stringify({mimeType:"application/vnd.google-apps.folder",name:a,parents:[r]});o=(await this.request(this.baseFileApiUrl,{method:"POST",body:u,headers:{"Content-Type":"application/json"}})).id}if(o&&this.titleToId.set(t,o),o&&t===I.rootName&&(this.rootId=o),!o&&t===I.rootName)throw new Error("Root folder not found");return o}async getExternalFiles(t){if((!this.cacheStorageData||!this.dataListFetched)&&!this.titleToFiles.has(this.currentContext.title)){const r=await this.list(`trashed=false and '${t}' in parents`,"files(id,name,thumbnailLink,parents)");if(r.length){const i=new Map;i.set(this.currentContext.title,r),this.setTitleData(i)}}return this.titleToFiles.get(this.currentContext.title)||[]}retrieve(t,r,i=1){const s=new URLSearchParams;return s.append("fields","files(name)"),s.append("alt","media"),this.request(`${this.baseFileApiUrl}/${t.id}?${s.toString()}`,{trackDownload:!0},r,i)}async upload(t,r,i,s,a,l=.8){const o=new FormData,c=new URLSearchParams;o.append("resource",new Blob([JSON.stringify(s?{name:r}:{name:r,parents:[t]})],{type:"application/json"})),a&&o.append("file",a),c.append("uploadType","multipart");const d=await this.request(`${this.baseUploadApiUrl}${s?`/${s.id}`:""}?${c.toString()}`,{method:s?"PATCH":"POST",body:o,trackUpload:!0},"json",l);return this.updateAfterUpload(d.id,d.name,i,s,{parents:[t]}),d}executeDelete(t){return this.request(`${this.baseFileApiUrl}/${t}`,{method:"DELETE"})}async list(t,r,i=[],s=""){const a=new URLSearchParams;a.append("corpora","user"),a.append("spaces","drive"),a.append("fields",r),a.append("q",t),s&&a.append("pageToken",s);const l=await this.request(`${this.baseFileApiUrl}?${a.toString()}`);return l&&(i.push(...l.files||[]),l.nextPageToken&&await this.list(t,r,i,l.nextPageToken)),i}groupExternalFiles(t,r){const i=new Map;for(let s=0,{length:a}=t;s<a;s+=1){const l=t[s],o=r.get(l.parents[0]);if(o){const c=i.get(o)||[];c.push(l),i.set(o,c)}}return i}setTitleData(t){const r=[...t.entries()];for(let i=0,{length:s}=r;i<s;i+=1){const[a,l]=r[i];if(!l.length)return;const o={id:I.getDummyId(),title:a,imagePath:"",characters:0,lastBookModified:0,lastBookOpen:0,progress:0,lastBookmarkModified:0,isPlaceholder:!1};for(let c=0,{length:d}=l;c<d;c+=1){const f=l[c];if(f.name.startsWith("bookdata_")){const{characters:u,lastBookModified:m,lastBookOpen:g}=I.getBookMetadata(f.name);o.characters=u,o.lastBookModified=m,o.lastBookOpen=g}else if(f.name.startsWith("progress_")){const{progress:u,lastBookmarkModified:m}=I.getProgressMetadata(f.name);o.progress=u,o.lastBookmarkModified=m}else f.name.startsWith("cover_")&&f.thumbnailLink&&(o.imagePath=f.thumbnailLink)}this.titleToFiles.set(a,l),this.titleToBookCard.set(a,o)}}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */class M0 extends bl{constructor(t){super(G.ONEDRIVE,t,co);$(this,"baseEndpoint","https://graph.microsoft.com/v1.0/me/drive/items")}setInternalSettings(t){const r=t||os.getValue();r!==this.storageSourceName&&this.clearData(),this.storageSourceName=r}async getBookList(){if(!this.dataListFetched){re.listLoading$.next(!0);try{await this.ensureTitle();const t=await this.list(this.rootId),r=[],i=new Map,s=new Map,a=new URLSearchParams;a.append("select","id,name"),a.append("expand","thumbnails(select=large)");for(let l=0,{length:o}=t;l<o;l+=20){const c=t.slice(l,l+20),d=[];for(let f=0,{length:u}=c;f<u;f+=1){const m=c[f],g=I.desanitizeFilename(m.name),h=`${r.length}_${d.length}`;this.titleToId.set(g,m.id),s.set(m.id,g),i.set(h,m.id),d.push({id:h,method:"GET",url:`/me/drive/items/${m.id}/children?${a.toString()}`})}d.length&&r.push(d)}if(r.length){const l=ut(1),o=[];r.forEach(c=>o.push(l(async()=>{var u,m;const{responses:d}=await this.request("https://graph.microsoft.com/v1.0/$batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:c})}),f=d.find(g=>g.status<200||g.status>299);if(f){const{body:g}=f;throw new Error(g.error_description||((u=g.error)==null?void 0:u.message)||g.error||"Received error on data retrival")}for(let g=0,{length:h}=d;g<h;g+=1){const p=d[g],w=((m=p.body)==null?void 0:m.value)||[],x=i.get(p.id)||"",b=s.get(x);b&&x&&this.setTitleData(b,w)}}))),await Promise.all(o).catch(c=>{throw l.clearQueue(),c})}this.dataListFetched=!0}catch(t){throw this.clearData(),t}}return[...this.titleToBookCard.values()]}async ensureTitle(t=I.rootName,r="root",i=!1){var c,d,f;if(t===I.rootName&&this.rootId)return this.rootId;const s=this.titleToId.get(t);if(s)return s;const a=I.sanitizeForFilename(t),l=new URLSearchParams;l.append("select","id,name"),l.append("filter",`name eq '${a}'`);let o="";if(t===I.rootName)o=(f=(d=(c=await this.request(`${this.baseEndpoint}/${r}/children?${l.toString()}`))==null?void 0:c.value)==null?void 0:d[0])==null?void 0:f.id;else if(this.rootId){const u=await this.list(this.rootId);for(let m=0,{length:g}=u;m<g;m+=1){const h=u[m],p=I.desanitizeFilename(h.name);this.titleToId.set(p,h.id),p===t&&(o=h.id)}}else throw new Error("RootId required for search");if(!o&&!i&&(l.delete("filter"),o=(await this.request(`${this.baseEndpoint}/${r}/children?${l.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,folder:{},"@microsoft.graph.conflictBehavior":"fail"})})).id),o&&this.titleToId.set(t,o),o&&t===I.rootName&&(this.rootId=o),!o&&t===I.rootName)throw new Error("Root folder not found");return o}async getExternalFiles(t){if((!this.cacheStorageData||!this.dataListFetched)&&!this.titleToFiles.has(this.currentContext.title)){const r=await this.list(t,!0);r.length&&this.setTitleData(this.currentContext.title,r)}return this.titleToFiles.get(this.currentContext.title)||[]}retrieve(t,r,i=1){return this.request(`${this.baseEndpoint}/${t.id}/content`,{trackDownload:!0},r,i)}async upload(t,r,i,s,a,l=.8){const o=new URLSearchParams;if(o.append("select","id,name"),a){const{uploadUrl:d}=await this.request(`${this.baseEndpoint}/${s?`${s.id}`:`${t}:/${encodeURIComponent(r)}:`}/createUploadSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:{"@odata.type":"microsoft.graph.driveItemUploadableProperties",name:(s==null?void 0:s.name)||r}})});if(!d)throw new Error("Upload url was not returned");try{const f=a instanceof Blob?a.size:new Blob([a]).size,u=await this.request(`${d}?${o.toString()}`,{method:"PUT",headers:{"Content-Range":`bytes 0-${f-1}/${f}`},body:a,trackUpload:!0},"json",l);return s&&r!==s.name?await this.rename(r,i,s,o):(this.updateAfterUpload(u.id,u.name,i,s,{thumbnails:u.thumbnails}),u)}catch(f){throw await this.request(d,{method:"DELETE"}).catch(()=>{}),f}}if(!s)throw new Error("Renaming requires a remote id");return await this.rename(r,i,s,o)}executeDelete(t){return this.request(`${this.baseEndpoint}/${t}`,{method:"DELETE"})}async list(t="root",r=!1,i=[],s=""){let a;if(s)a=await this.request(s);else{const l=new URLSearchParams;l.append("select","id,name"),r&&l.append("expand","thumbnails"),a=await this.request(`${this.baseEndpoint}/${t}/children?${l.toString()}`)}return a&&(i.push(...a.value||[]),a["@odata.nextLink"]&&await this.list(t,r,i,a==null?void 0:a["@odata.nextLink"])),i}async setTitleData(t,r){var s,a,l,o;if(!r.length)return;const i={id:I.getDummyId(),title:t,imagePath:"",characters:0,lastBookModified:0,lastBookOpen:0,progress:0,lastBookmarkModified:0,isPlaceholder:!1};for(let c=0,{length:d}=r;c<d;c+=1){const f=r[c];if(f.name.startsWith("bookdata_")){const{characters:u,lastBookModified:m,lastBookOpen:g}=I.getBookMetadata(f.name);i.characters=u,i.lastBookModified=m,i.lastBookOpen=g}else if(f.name.startsWith("progress_")){const{progress:u,lastBookmarkModified:m}=I.getProgressMetadata(f.name);i.progress=u,i.lastBookmarkModified=m}else f.name.startsWith("cover_")&&((a=(s=f.thumbnails)==null?void 0:s[0].large)!=null&&a.url)&&(i.imagePath=(o=(l=f.thumbnails)==null?void 0:l[0].large)==null?void 0:o.url)}this.titleToFiles.set(t,r),this.titleToBookCard.set(t,i)}async rename(t,r,i,s){const a=await this.request(`${this.baseEndpoint}/${i.id}?${s.toString()}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});return this.updateAfterUpload(a.id,a.name,r,i,{thumbnails:(a==null?void 0:a.thumbnails)||[]}),a}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */let fr,ur,hr,pr,mr;function is(n,e,t=qi,r=!1,i=!1,s=be.NewOnly,a=!0){switch(e){case G.BACKUP:return fr=fr||new ml(n,G.BACKUP),fr.updateSettings(n,r),fr;case G.BROWSER:return ur=ur||new Rn(n,G.BROWSER),ur.updateSettings(n,!0,s),ur;case G.GDRIVE:return hr=hr||new D0(n),hr.updateSettings(n,r,s,i,a,t),hr;case G.ONEDRIVE:return pr=pr||new M0(n),pr.updateSettings(n,r,s,i,a,t),pr;case G.FS:return mr=mr||new nn(n,G.FS),mr.updateSettings(n,r,s,i,a,t),mr;default:throw new Error(`No handler implementation for ${e}`)}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function L0(n,e=ql){return e?n():Ic}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */const Fn=0;class U0{constructor(e){$(this,"db$");$(this,"isReady$");$(this,"listLoading$",new $t);$(this,"dataListChanged$",new $t);$(this,"lastHandler");$(this,"dataList$",L0(()=>this.dataListChanged$.pipe(zr(void 0),ys(e=>{this.lastHandler=e}),dn(()=>Fr),dn(e=>xi(Promise.resolve(this.lastHandler||is(window,e,"")).then(t=>(Tt.clearHistory(),t.getBookList()))).pipe(ro(t=>{if(t instanceof Error){const r=Tt.errorCount>1;Tt.warn(t.message),Sr.dialogs$.next([{component:r?Vc:oc,props:{title:"Failure",message:r?"Error(s) occurred":`An Error occured: ${t.message}`}}])}return e!==G.BROWSER&&(this.lastHandler=void 0,Fr.next(G.BROWSER)),[[]]}))),ys(()=>{this.lastHandler=void 0,this.listLoading$.next(!1)}),Yn({refCount:!0,bufferSize:1}))));$(this,"bookmarksChanged$",new $t);$(this,"bookmarks$",this.bookmarksChanged$.pipe(zr(0),dn(()=>this.db$),dn(e=>e.getAll("bookmark")),Yn({refCount:!0,bufferSize:1})));$(this,"lastItemChanged$",new $t);$(this,"lastItem$",this.lastItemChanged$.pipe(zr(0),dn(()=>this.db$),dn(e=>e.get("lastItem",Fn)),Yn({refCount:!0,bufferSize:1})));$(this,"storageSourcesChanged$",new $t);this.db=e,this.db$=xi(e).pipe(Yn({refCount:!0,bufferSize:1})),this.isReady$=this.db$.pipe(Hi(t=>!!t))}async getData(e){if(!Number.isNaN(e))return(await this.db).get("data",e)}async getDataByTitle(e){if(e)return(await this.db).getFromIndex("data","title",e)}async upsertData(e,t,r=!0,i=!0){const s=await this.db;let a,l;const o=s.transaction("data","readwrite"),{store:c}=o,d=await c.index("title").get(e.title);if(d)i&&(d.storageSource=void 0),t===be.NewOnly&&d.lastBookModified&&e.lastBookModified&&d.lastBookModified>=e.lastBookModified&&(d.lastBookOpen||0)>=(e.lastBookOpen||0)?(l=d,a=d.id):(l={...e,id:d.id,...r?{lastBookModified:e.lastBookModified,lastBookOpen:e.lastBookOpen}:{lastBookModified:e.lastBookModified||d.lastBookModified,lastBookOpen:e.lastBookOpen||d.lastBookOpen},...i?{storageSource:void 0}:{}},a=await c.put(l));else{const f=e;a=await c.add(f),l={...e,id:a}}return await o.done,l}async deleteData(e,t){const r=await this.db,i=await r.get("lastItem",Fn),s=await r.getAllKeys("bookmark"),a=i==null?void 0:i.dataId,l=new Set(s),o=[],c=ut(1),d=[];let f="";return qt.next({progressBase:1,maxProgress:e.length}),e.forEach(u=>d.push(c(async()=>{try{Bt(t),o.push(await this.deleteSingleData(r,u,{lastItem:a,bookmarkIds:l}))}catch(m){f=Wn(m,`Error deleting Book with id ${u}: `,[c])}}))),await Promise.all(d).catch(()=>{}),{error:f,deleted:o}}async getBookmark(e){return(await this.db).get("bookmark",e)}async putBookmark(e,t){const r=await this.db;let i;if(t===be.Overwrite)i=await r.put("bookmark",e);else{const s=await r.get("bookmark",e.dataId);s&&s.lastBookmarkModified&&e.lastBookmarkModified&&(s.lastBookmarkModified||0)>=(e.lastBookmarkModified||0)?i=s.dataId:i=await r.put("bookmark",e)}return i}async putLastItem(e){const r=await(await this.db).put("lastItem",{dataId:e},Fn);return this.lastItemChanged$.next(),r}async deleteLastItem(){await(await this.db).delete("lastItem",Fn),this.lastItemChanged$.next()}async deleteSingleData(e,t,r){const i=["data"],s=r.lastItem===t,a=r.bookmarkIds.has(t);s&&i.push("lastItem"),a&&i.push("bookmark");const l=e.transaction(i,"readwrite");try{s&&await l.objectStore("lastItem").delete(Fn),a&&await l.objectStore("bookmark").delete(t),await l.objectStore("data").delete(t),await l.done,s&&this.lastItemChanged$.next()}catch(o){try{l.abort(),await l.done}catch{}throw o}return qt.next({progressToAdd:1}),t}async getStorageSources(){return(await this.db).getAll("storageSource")}async saveStorageSource(e,t,r,i){const a=(await this.db).transaction(["storageSource"],"readwrite");try{const l=a.objectStore("storageSource");t&&e.name!==t&&await l.delete(t),e.name===t?await l.put(e):await l.add(e),await a.done,r?_r.next(e.name):t&&_r.next(""),i?ui(e.name,e.type):t&&ui("",e.type)}catch(l){try{a.abort(),await a.done}catch{}throw l}}async deleteStorageSource(e,t,r){await(await this.db).delete("storageSource",e.name),t&&_r.next(""),r&&ui("",e.type)}}const V0=(n,e)=>e.some(t=>n instanceof t);let Ca,Ia;function $0(){return Ca||(Ca=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j0(){return Ia||(Ia=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xl=new WeakMap,Li=new WeakMap,vl=new WeakMap,pi=new WeakMap,ss=new WeakMap;function W0(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Ht(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&xl.set(t,n)}).catch(()=>{}),ss.set(e,n),e}function H0(n){if(Li.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Li.set(n,e)}let Ui={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Li.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vl.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ht(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function q0(n){Ui=n(Ui)}function Z0(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(mi(this),e,...t);return vl.set(r,e.sort?e.sort():[e]),Ht(r)}:j0().includes(n)?function(...e){return n.apply(mi(this),e),Ht(xl.get(this))}:function(...e){return Ht(n.apply(mi(this),e))}}function G0(n){return typeof n=="function"?Z0(n):(n instanceof IDBTransaction&&H0(n),V0(n,$0())?new Proxy(n,Ui):n)}function Ht(n){if(n instanceof IDBRequest)return W0(n);if(pi.has(n))return pi.get(n);const e=G0(n);return e!==n&&(pi.set(n,e),ss.set(e,n)),e}const mi=n=>ss.get(n);function X0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),l=Ht(a);return r&&a.addEventListener("upgradeneeded",o=>{r(Ht(a.result),o.oldVersion,o.newVersion,Ht(a.transaction),o)}),t&&a.addEventListener("blocked",o=>t(o.oldVersion,o.newVersion,o)),l.then(o=>{s&&o.addEventListener("close",()=>s()),i&&o.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const z0=["get","getKey","getAll","getAllKeys","count"],K0=["put","add","delete","clear"],gi=new Map;function Ba(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gi.get(e))return gi.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=K0.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||z0.includes(t)))return;const s=async function(a,...l){const o=this.transaction(a,i?"readwrite":"readonly");let c=o.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[t](...l),i&&o.done]))[0]};return gi.set(e,s),s}q0(n=>({...n,get:(e,t,r)=>Ba(e,t)||n.get(e,t,r),has:(e,t)=>!!Ba(e,t)||n.has(e,t)}));/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */async function Q0(n,e,t,r){n.createObjectStore("data",{keyPath:"id",autoIncrement:!0}).createIndex("title","title"),n.createObjectStore("bookmark",{keyPath:"dataId"}),n.createObjectStore("lastItem");const s=n,a=r,l={data:{},scrollX:{}};{let o=await a.objectStore("keyvaluepairs").openCursor();for(;o;){const c=/([^-]+)-(.+)/.exec(o.key);if(c)switch(c[1]){case"data":case"scrollX":l[c[1]][c[2]]=o.value;break}else o.key==="lastItem"&&(l[o.key]=o.value);o=await o.continue()}}await Promise.all(Object.entries(l.data).map(async([o,c])=>{const d=JSON.parse(c);if(Y0(d)){const f={...d,blobs:{},hasThumb:!1,characters:0,lastBookModified:0,lastBookOpen:0},u=await r.objectStore("data").add(f),m=l.scrollX[o];m&&await r.objectStore("bookmark").put({dataId:u,scrollX:+m,progress:"0%",lastBookmarkModified:0}),l.lastItem===o&&r.objectStore("lastItem").put({dataId:u},0)}})),s.deleteObjectStore("keyvaluepairs"),s.deleteObjectStore("local-forage-detect-blob-support")}function Y0(n){return typeof n=="object"&&n?["title","elementHtml","styleSheet"].every(e=>e in n&&typeof n[e]=="string"):!1}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function J0(n="books"){return X0(n,4,{async upgrade(e,t,r,i){switch(t){case 0:{e.createObjectStore("data",{keyPath:"id",autoIncrement:!0}).createIndex("title","title"),e.createObjectStore("bookmark",{keyPath:"dataId"}),e.createObjectStore("lastItem"),e.createObjectStore("storageSource",{keyPath:"name"});break}case 2:{await Q0(e,t,r,i);break}case 3:{e.createObjectStore("storageSource",{keyPath:"name"});break}}}})}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */var yl=(n=>(n.Partial="partial",n.Full="full",n.Toggle="toggle",n))(yl||{});/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function Xe(n=_n){return Vr(n,e=>!!+e,e=>e?"1":"0")}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function Ft(n=_n){return Vr(n,e=>+e,e=>`${e}`)}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */function _l(n,e=_n){return Vr(e,t=>JSON.parse(t||n),t=>JSON.stringify(t))}function eh(n=_n){return _l("{}",n)}function kl(n=_n){return _l("[]",n)}/**
 * @license BSD-3-Clause
 * Copyright (c) 2023, ッツ Reader Authors
 * All rights reserved.
 */var El=(n=>(n.Continuous="continuous",n.Paginated="paginated",n))(El||{});const th=Ve()("theme","light-theme"),nh=Ft()("autoScrollMultiplier",20),rh=Ve()("fontFamilyGroupOne",""),ih=Ve()("fontFamilyGroupTwo",""),sh=Ft()("fontSize",20),ah=Ft()("lineHeight",1.65),oh=Xe()("hideSpoilerImage",!0),lh=Xe()("hideFurigana",!1),ch=Ve()("furiganaStyle",yl.Partial),Tl=Ve()("writingMode","vertical-rl"),tp=Tl.pipe(Hi(n=>n==="vertical-rl")),dh=Ve()("viewMode",El.Paginated),fh=Ft()("secondDimensionMaxValue",0),uh=Ft()("firstDimensionMargin",0),hh=Ft()("swipeThreshold",10),ph=Xe()("disableWheelNavigation",!1),mh=Xe()("autoPositionOnResize",!0),gh=Xe()("avoidPageBreak",!1),wh=Xe()("customReadingPointEnabled",!1),bh=Xe()("selectionToBookmarkEnabled",!1),xh=Xe()("confirmClose",!1),vh=Xe()("autoBookmark",!1),yh=Ft()("pageColumns",0),Sl=Xe()("requestPersistentStorage",!0),_h=Xe()("cacheStorageData",!1),kh=Ve()("autoReplication",io.Off),Eh=Ve()("replicationSaveBehavior",be.NewOnly),Th=Xe()("showExternalPlaceholder",!1),as=Ve()("gDriveStorageSource",Ge.GDRIVE_DEFAULT),os=Ve()("oneDriveStorageSource",Ge.ONEDRIVE_DEFAULT),ls=Ve()("fsStorageSource",""),_r=Ve()("syncTarget",""),np=Ve()("lastExportedTarget",G.BACKUP),rp=kl()("lastExportedTypes",[vn.PROGRESS]),ip=ln({KeyB:at.BOOKMARK,KeyR:at.JUMP_TO_BOOKMARK,PageDown:at.NEXT_PAGE,PageUp:at.PREV_PAGE,Space:at.AUTO_SCROLL_TOGGLE,KeyA:at.AUTO_SCROLL_INCREASE,KeyD:at.AUTO_SCROLL_DECREASE,KeyN:at.PREV_CHAPTER,KeyM:at.NEXT_CHAPTER,KeyT:at.SET_READING_POINT}),Sh=J0(),re=new U0(Sh),sp=Xe()("domainHintSeen",!1),ap=eh()("booklistSortOptions",{[G.BROWSER]:{property:"lastBookOpen",direction:On.DESC},[G.GDRIVE]:{property:"title",direction:On.ASC},[G.ONEDRIVE]:{property:"title",direction:On.ASC},[G.FS]:{property:"title",direction:On.ASC}}),op=Ft()("verticalCustomReadingPosition",100),lp=Ft()("horizontalCustomReadingPosition",0),Ah=ln(!0),Pa=ln(!1),cp=kl()("userfonts",[]);export{ll as $,dn as A,dc as B,Bc as C,s0 as D,Pa as E,yl as F,ph as G,wh as H,Nc as I,Ja as J,Nn as K,uh as L,oc as M,bh as N,hh as O,L0 as P,ln as Q,zr as R,Yn as S,fc as T,Pc as U,El as V,Mh as W,Oh as X,Rh as Y,Ph as Z,dh as _,Sr as a,qh as a$,i0 as a0,Ic as a1,ql as a2,at as a3,is as a4,G as a5,io as a6,th as a7,Tl as a8,Ge as a9,vn as aA,$h as aB,Wt as aC,ap as aD,ls as aE,os as aF,as as aG,A0 as aH,Qh as aI,Er as aJ,On as aK,Vh as aL,Nh as aM,Fh as aN,ji as aO,rp as aP,np as aQ,gl as aR,Un as aS,Ln as aT,zh as aU,Kh as aV,Th as aW,I as aX,C0 as aY,I0 as aZ,Mn as a_,E0 as aa,Vc as ab,ip as ac,lp as ad,Lh as ae,Uh as af,tp as ag,_h as ah,Eh as ai,Fr as aj,_r as ak,kh as al,xh as am,op as an,nh as ao,ih as ap,sh as aq,ah as ar,oh as as,lh as at,ch as au,fh as av,mh as aw,gh as ax,yh as ay,vh as az,Hh as b,hi as b0,Mi as b1,ui as b2,Dh as b3,be as b4,Wh as b5,qc as b6,ep as c,sp as d,R0 as e,Jh as f,Ah as g,rh as h,Yh as i,re as j,$a as k,ja as l,Hi as m,xi as n,Wa as o,Kr as p,no as q,Nt as r,uc as s,ys as t,cp as u,jh as v,Ac as w,Pt as x,yt as y,c0 as z};
